(()=>{var e={1993:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=1993,e.exports=t},1875:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=1875,e.exports=t},6700:(e,t,n)=>{var a={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6737,"./ar-kw.js":6737,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":941,"./en-il.js":941,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":7930,"./se.js":7930,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=6700},6272:(e,t,n)=>{"use strict";n.r(t);n(8862),n(7658);var a=n(655),o=n(9895),r=n(5137),s=n(8250),i=n(2136),c=n(942),l=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,u=localStorage.getItem("themeMode");function d(){l=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,u=localStorage.getItem("themeMode")}function m(){i.A_.setOverlaysWebView({overlay:!0}),i.A_.setStyle({style:i.bg.Default})}function g(){d(),f(),"dark"===u||l&&"light"!==u?(document.body.classList.add("dark"),document.body.classList.remove("light")):(document.body.classList.add("light"),document.body.classList.remove("dark"))}function p(){"dark"===u||l&&"light"!==u?c.v.setColor({color:"#111112",darkButtons:!1}):c.v.setColor({color:"#ffffff",darkButtons:!0})}function f(){"web"!==o.dV.getPlatform()&&(d(),"android"===o.dV.getPlatform()&&(m(),p()))}function h(e,t){var n=JSON.parse(localStorage.getItem("logs")||"[]");"object"===typeof e&&(e=JSON.stringify(e,null,2)),n.push({date:new Date,type:t,message:e}),n.length>100&&n.shift(),localStorage.setItem("logs",JSON.stringify(n))}s.E.getSafeAreaInsets().then((function(e){return(0,a.mG)(void 0,void 0,void 0,(function(){var t;return(0,a.Jh)(this,(function(n){return t=e.insets,document.documentElement.style.setProperty("--papillon-safe-area-top",t.top+"px"),document.documentElement.style.setProperty("--papillon-safe-area-right",t.right+"px"),document.documentElement.style.setProperty("--papillon-safe-area-bottom",t.bottom+"px"),document.documentElement.style.setProperty("--papillon-safe-area-left",t.left+"px"),document.documentElement.style.setProperty("--ion-safe-area-top",t.top+"px"),document.documentElement.style.setProperty("--ion-safe-area-right",t.right+"px"),document.documentElement.style.setProperty("--ion-safe-area-bottom",t.bottom+"px"),document.documentElement.style.setProperty("--ion-safe-area-left",t.left+"px"),[2]}))}))})),f(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(){f()})),setInterval(g,100),setInterval(f,100),null===localStorage.getItem("logs")&&localStorage.setItem("logs",JSON.stringify([]));var v=console.log,w=console.warn,b=console.error,S=console.info,k=console.debug;console.log=function(e){v(e),h(e,"log")},console.warn=function(e){w(e),h(e,"warn")},console.error=function(e){b(e),h(e,"error")},console.info=function(e){S(e),h(e,"info")},console.debug=function(e){k(e),h(e,"debug")},r.g.addListener("backButton",(function(e){var t=e.canGoBack;t?window.history.back():r.g.exitApp()}))},433:(e,t,n)=>{"use strict";n.d(t,{l:()=>te});n(6992),n(8674),n(7727);var a=n(9963),o=n(6252),r=n(2262),s=n(5274),i=(n(1817),n(3577)),c=function(e){return(0,o.dD)("data-v-f9449056"),e=e(),(0,o.Cn)(),e},l={class:"userItem_content"},u={key:0,class:"avatar"},d=["src"],m={key:2,class:"userData"},g={key:3,class:"userData"},p={key:0},f={class:"material-symbols-outlined mdls",slot:"start"},h=c((function(){return(0,o._)("div",{class:"completeMenuNavBar"},null,-1)})),v=c((function(){return(0,o._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"support",-1)})),w=c((function(){return(0,o._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"dns",-1)})),b={class:"update_inner"},S=c((function(){return(0,o._)("div",{id:"update-header"},[(0,o._)("img",{class:"logoPapillon",src:"/assets/icons/icon-192.webp"}),(0,o._)("h1",null,"Quoi de neuf dans Papillon ?"),(0,o._)("p",null,"Voici les dernières nouveautés de Papillon.")],-1)})),k={class:"material-symbols-outlined mdls",slot:"start"},j=c((function(){return(0,o._)("p",{class:"warning"},"Cet écran n’apparaîtra pas au redémarrage de Papillon. Il restera accessible dans les paramètres.",-1)}));function y(e,t,n,a,r,s){var c=(0,o.up)("ion-skeleton-text"),y=(0,o.up)("ion-header"),C=(0,o.up)("ion-label"),A=(0,o.up)("ion-item"),I=(0,o.up)("ion-list"),D=(0,o.up)("ion-chip"),E=(0,o.up)("ion-content"),O=(0,o.up)("ion-menu"),x=(0,o.up)("ion-router-outlet"),N=(0,o.up)("ion-split-pane"),P=(0,o.up)("ion-title"),T=(0,o.up)("ion-button"),F=(0,o.up)("ion-buttons"),J=(0,o.up)("ion-toolbar"),M=(0,o.up)("ion-modal"),R=(0,o.up)("ion-app");return(0,o.wg)(),(0,o.j4)(R,null,{default:(0,o.w5)((function(){return["dev"==e.appCanal?((0,o.wg)(),(0,o.iD)("div",{key:0,id:"debug_banner",onClick:t[0]||(t[0]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.displayDevMsg&&e.displayDevMsg.apply(e,t)})}," Devbuild ")):(0,o.kq)("",!0),(0,o.Wm)(N,{"content-id":"main-content"},{default:(0,o.w5)((function(){return[e.loggedIn?((0,o.wg)(),(0,o.j4)(O,{key:0,onIonWillOpen:t[2]||(t[2]=function(t){return e.menuOpened(!0)}),onIonWillClose:t[3]||(t[3]=function(t){return e.menuOpened(!1)}),onIonDidOpen:t[4]||(t[4]=function(t){return e.menuOpened(!0)}),onIonDidClose:t[5]||(t[5]=function(t){return e.menuOpened(!1)}),type:"overlay","content-id":"main-content",class:"menu",swipeGesture:!0},{default:(0,o.w5)((function(){return[(0,o.Wm)(y,{collapse:"fade"},{default:(0,o.w5)((function(){return[(0,o._)("div",{class:"userItem",style:(0,i.j5)("background-image: url('".concat(e.avatar,"');"))},[(0,o._)("div",l,[e.dataLoading?((0,o.wg)(),(0,o.iD)("div",u,[(0,o.Wm)(c,{animated:!0,style:{width:"100%",height:"100%","border-radius":"50%"}})])):((0,o.wg)(),(0,o.iD)("img",{key:1,class:"avatar",src:e.avatar,ref:"avatar"},null,8,d)),e.dataLoading?((0,o.wg)(),(0,o.iD)("div",m,[(0,o._)("h3",null,[(0,o.Wm)(c,{animated:!0,style:{width:"40%","margin-bottom":"5px",height:"18px"}})]),(0,o._)("p",null,[(0,o.Wm)(c,{animated:!0,style:{width:"80%"}})])])):((0,o.wg)(),(0,o.iD)("div",g,[(0,o._)("h3",null,(0,i.zw)(e.userData.student.name),1),""!=e.userData.class.school.trim()?((0,o.wg)(),(0,o.iD)("p",p,(0,i.zw)(e.userData.class.name)+" — "+(0,i.zw)(e.userData.class.school),1)):(0,o.kq)("",!0)]))])],4)]})),_:1}),(0,o.Wm)(E,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(I,{id:"inbox-list"},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.appPages,(function(t,n){return(0,o.wg)(),(0,o.j4)(A,{mode:"md",onClick:function(a){return e.changePage(t.url,n)},"router-link":t.url,key:n,button:"",routerDirection:"root",lines:"none",detail:!1,class:(0,i.C_)({selected:e.selectedIndex===n})},{default:(0,o.w5)((function(){return[(0,o._)("span",f,(0,i.zw)(t.icon),1),(0,o.Wm)(C,null,{default:(0,o.w5)((function(){return[(0,o.Uk)((0,i.zw)(t.title),1)]})),_:2},1024)]})),_:2},1032,["onClick","router-link","class"])})),128))]})),_:1}),h,(0,o.Wm)(I,{id:"bottomActionsList"},{default:(0,o.w5)((function(){return[(0,o.Wm)(A,{onClick:t[1]||(t[1]=function(t){return e.openURL("https://docs.getpapillon.xyz")}),button:"",mode:"md",lines:"none",detail:!1},{default:(0,o.w5)((function(){return[v,(0,o.Wm)(C,null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Aide de Papillon")]})),_:1})]})),_:1}),(0,o.Wm)(A,{button:"",mode:"md",lines:"none",detail:!1},{default:(0,o.w5)((function(){return[w,(0,o.Wm)(C,null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Serveur")]})),_:1}),"connected"==e.connectedToServer?((0,o.wg)(),(0,o.j4)(D,{key:0,slot:"end",color:"success"},{default:(0,o.w5)((function(){return[(0,o.Wm)(C,null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Connecté")]})),_:1})]})),_:1})):"connecting"==e.connectedToServer?((0,o.wg)(),(0,o.j4)(D,{key:1,slot:"end",color:"warning"},{default:(0,o.w5)((function(){return[(0,o.Wm)(C,null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Reconnexion")]})),_:1})]})),_:1})):"disconnected"==e.connectedToServer?((0,o.wg)(),(0,o.j4)(D,{key:2,slot:"end",color:"danger"},{default:(0,o.w5)((function(){return[(0,o.Wm)(C,null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Déconnecté")]})),_:1})]})),_:1})):((0,o.wg)(),(0,o.j4)(D,{key:3,slot:"end",color:"medium"},{default:(0,o.w5)((function(){return[(0,o.Wm)(C,null,{default:(0,o.w5)((function(){return[(0,o.Uk)("En pause")]})),_:1})]})),_:1}))]})),_:1})]})),_:1})]})),_:1})]})),_:1})):(0,o.kq)("",!0),(0,o.Wm)(x,{ref:"outlet",animated:!0,animation:e.transition,id:"main-content"},{default:(0,o.w5)((function(e){var t=e.Component;return[((0,o.wg)(),(0,o.j4)((0,o.LL)(t)))]})),_:1},8,["animation"])]})),_:1}),(0,o.Wm)(M,{ref:"changelogModal"},{default:(0,o.w5)((function(){return[(0,o.Wm)(y,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(J,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(P,null,{default:(0,o.w5)((function(){return[(0,o.Uk)("Notes de mise à jour")]})),_:1}),(0,o.Wm)(F,{slot:"end"},{default:(0,o.w5)((function(){return[(0,o.Wm)(T,{strong:!0,onClick:e.hideChangelog},{default:(0,o.w5)((function(){return[(0,o.Uk)("Terminé")]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1}),(0,o.Wm)(E,{class:"update"},{default:(0,o.w5)((function(){return[(0,o._)("div",b,[S,(0,o.Wm)(I,{inset:""},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.appUpdates.features,(function(e,t){return(0,o.wg)(),(0,o.j4)(A,{key:t},{default:(0,o.w5)((function(){return[(0,o._)("span",k,(0,i.zw)(e.icon),1),(0,o.Wm)(C,{class:"ion-text-wrap"},{default:(0,o.w5)((function(){return[(0,o._)("h2",null,(0,i.zw)(e.name),1),(0,o._)("p",null,(0,i.zw)(e.description),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1}),(0,o.Wm)(T,{mode:"md",onClick:e.hideChangelog,fill:"solid",class:"endButton"},{default:(0,o.w5)((function(){return[(0,o.Uk)("Accéder à Papillon")]})),_:1},8,["onClick"]),j])]})),_:1})]})),_:1},512)]})),_:1})}n(7658),n(8862),n(541);var C=n(655),A=n(2136),I=n(7806),D=n(9895),E=n(2201),O=n(8903),x=n(7717),N=n(5980),P=n(3573),T=n(125),F=n(1443).X,J=n(4147),M=J.version,R=J.canal,Z=n(1582).V,U=n(89),L=n(8874),B=n(2560);const z=(0,o.aZ)({name:"App",components:{IonApp:s.dr,IonContent:s.W2,IonItem:s.Ie,IonLabel:s.Q$,IonList:s.q_,IonMenu:s.z0,IonMenuToggle:s.zc,IonRouterOutlet:s.jP,IonSplitPane:s.jI,IonHeader:s.Gu,IonToolbar:s.sr,IonSkeletonText:s.CK,IonModal:s.ki,IonThumbnail:s.Bs,IonButtons:s.Sm,IonButton:s.YG},data:function(){return{loggedIn:localStorage.loggedIn,dataLoading:!0,userData:{student:{name:"",avatar:"",ine:"",contact:{email:"",phone:""}},class:{name:"",school:""}},avatar:"",presentingElement:void 0,isMenuOpened:!1,changeStatusTimeout:!0,connectedToServer:"",showTransition:void 0,selectedIndex:0}},setup:function(){var e=[{title:"Accueil",url:"/home",icon:"home",disabled:!1}];if("skolengo"===localStorage.getItem("loginService")&&e.push({title:"Emploi du temps",url:"/timetable",icon:"calendar_month",disabled:!1},{title:"Travail à faire",url:"/homework",icon:"auto_stories",disabled:!1},{title:"Actualités",url:"/news",icon:"newspaper",disabled:!1}),"pronote"===localStorage.getItem("loginService")&&(e.push({title:"Emploi du temps",url:"/timetable",icon:"calendar_month",disabled:!1},{title:"Travail à faire",url:"/homework",icon:"auto_stories",disabled:!1},{title:"Notes",url:"/grades",icon:"insights",disabled:!1}),"true"==localStorage.getItem("viescolaireEnabled")&&e.push({title:"Vie scolaire",url:"/schoollife",icon:"gavel",disabled:!1}),e.push({title:"Actualités",url:"/news",icon:"newspaper",disabled:!1},{title:"Conversations",url:"/conversations",icon:"forum",disabled:!1})),"ecoledirecte"===localStorage.getItem("loginService")){var t=localStorage.getItem("UserCache");if(null!=t){var n=JSON.parse(t);n.modules.forEach((function(t){switch(t.code){case"VIE_SCOLAIRE":t.enable&&e.push({title:"Vie scolaire",url:"/schoollife",icon:"gavel",disabled:!1});break;case"VIE_DE_LA_CLASSE":t.enable&&e.push({title:"Vie de la classe (non dispo.)",url:"/classlife",icon:"forum",disabled:!0});break;case"NOTES":t.enable&&e.push({title:"Notes",url:"/grades",icon:"insights",disabled:!1});break;case"CLOUD":t.enable&&e.push({title:"Cloud (non dispo.)",url:"/cloud",icon:"cloud",disabled:!0});break;case"MESSAGERIE":t.enable&&e.push({title:"Messagerie (non dispo.)",url:"/mails",icon:"mail",disabled:!0});break;case"EDT":t.enable&&e.push({title:"Emploi du temps",url:"/timetable",icon:"calendar_month",disabled:!1});break;case"CAHIER_DE_TEXTES":t.enable&&e.push({title:"Travail à faire",url:"/homework",icon:"auto_stories",disabled:!1});break}}))}}e.push({title:"Paramètres",url:"/settings",icon:"settings",disabled:!1});var a=(0,E.yj)();return{appCanal:R,appVersion:M,appUpdates:Z,appPages:e,labels:[],isSelected:function(e){return e===a.path?"selected":""}}},methods:{checkAndroidShortcuts:function(){var e=this;"android"==D.dV.getPlatform()&&x.Q.isDynamicSupported().then((function(t){t&&x.Q.addListener("shortcut",(function(t){switch(t.data){case"timetable":e.$router.push("/timetable");break;case"homework":e.$router.push("/homework");break;case"grades":e.$router.push("/grades");break;default:break}}))}))},notify:function(e,t){return(0,C.mG)(this,void 0,void 0,(function(){return(0,C.Jh)(this,(function(n){return P.s.schedule({notifications:[{title:e,body:t,id:this.randomID(),schedule:{at:new Date(Date.now()+1e3)}}]}),[2]}))}))},openURL:function(e){return(0,C.mG)(this,void 0,void 0,(function(){return(0,C.Jh)(this,(function(t){switch(t.label){case 0:return[4,I.A.open({url:e,presentationStyle:"popover"})];case 1:return t.sent(),[2]}}))}))},randomID:function(){return Math.floor(1e5*Math.random()+1e3)},backgroundFetchEvent:function(e){return(0,C.mG)(this,void 0,void 0,(function(){var t=this;return(0,C.Jh)(this,(function(n){return B.default().then((function(n){return(0,C.mG)(t,void 0,void 0,(function(){var t=this;return(0,C.Jh)(this,(function(a){return n&&L.default().then((function(n){return(0,C.mG)(t,void 0,void 0,(function(){var t,a,o,r,s,i,c,l,u,d,m,g;return(0,C.Jh)(this,(function(p){switch(p.label){case 0:if(n)if(t=JSON.parse(localStorage.getItem("lastGrades")||"[]"),a=n.grades.last,0===t.length)localStorage.setItem("lastGrades",JSON.stringify(a));else if(JSON.stringify(t[0])==JSON.stringify(a[0])){for(o=a[0],r=o.info.description,s=Math.round(o.grade.value/o.grade.out_of*20),i={0:"Bon... 💀",5:"Aïe aïe aïe... 😤",10:"Peut-être une prochaine fois... 🫡",12:"Bien joué 👍",14:"Sympa ! 👌",17:"Bravo ! 🤩",18:"Félicitations ! 👏",20:"Champagne ! 🍾"},c="",l=0,u=Object.entries(i);l<u.length;l++)d=u[l],m=d[0],g=d[1],s>=parseInt(m)&&(c=g);r=""===r.trim()?"votre nouvelle note.":'"'+r+'".',this.notify("Nouvelle note en "+o.info.subject,"Vous avez eu "+o.grade.value+"/"+o.grade.out_of+" sur "+r+" "+c),localStorage.setItem("lastGrades",JSON.stringify(a))}return[4,F.finish(e)];case 1:return p.sent(),[2]}}))}))})),[2]}))}))})),[2]}))}))},configureBackgroundFetch:function(){return(0,C.mG)(this,void 0,void 0,(function(){var e=this;return(0,C.Jh)(this,(function(t){switch(t.label){case 0:return[4,F.configure({minimumFetchInterval:15},(function(t){return(0,C.mG)(e,void 0,void 0,(function(){var e;return(0,C.Jh)(this,(function(n){switch(n.label){case 0:console.log("[js] BackgroundFetch event received: ",t),n.label=1;case 1:return n.trys.push([1,2,,4]),this.backgroundFetchEvent(t),[3,4];case 2:return e=n.sent(),console.error(e),[4,F.finish(t)];case 3:return n.sent(),[3,4];case 4:return[2]}}))}))}),(function(){console.error("[js] RNBackgroundFetch failed to start")}))];case 1:return t.sent(),[2]}}))}))},checkIosShortcuts:function(){return!1},RGBToHSL:function(e,t,n){e/=255,t/=255,n/=255;var a=Math.max(e,t,n),o=a-Math.min(e,t,n),r=o?a===e?(t-n)/o:a===t?2+(n-e)/o:4+(e-t)/o:0;return[60*r<0?60*r+360:60*r,100*(o?a<=.5?o/(2*a-o):o/(2-(2*a-o)):0),100*(2*a-o)/2]},presentToast:function(e,t,n,a){return(0,C.mG)(this,void 0,void 0,(function(){var t;return(0,C.Jh)(this,(function(o){switch(o.label){case 0:return[4,s.Mn.create({header:e,duration:2e3,position:"top",color:n,icon:a,cssClass:"toast-small"})];case 1:return t=o.sent(),[4,t.present()];case 2:return o.sent(),[2]}}))}))},getUserData:function(){var e=this;this.dataLoading=!0,U.default().then((function(t){e.userData=t,t.student&&(e.dataLoading=!1),localStorage.getItem("avatarCache")||(e.avatar=t.student.avatar),localStorage.getItem("customName")&&(e.userData.student.name=localStorage.getItem("customName")),void 0!==t&&(localStorage.userData=JSON.stringify(t),document.dispatchEvent(new CustomEvent("userDataLoaded")));var n=e.userData.student.name.split(" "),a=n[n.length-1];n.pop(),n.unshift(a),e.userData.student.name=n.join(" ")}))},changePage:function(e,t){console.log(t),this.selectedIndex=t;var n=document.querySelector("ion-menu");setTimeout((function(){null===n||void 0===n||n.toggle()}),100)},askNotifPerms:function(){return(0,C.mG)(this,void 0,void 0,(function(){return(0,C.Jh)(this,(function(e){switch(e.label){case 0:return[4,P.s.requestPermissions()];case 1:return e.sent(),[2]}}))}))},TestNotif:function(){return(0,C.mG)(this,void 0,void 0,(function(){var e;return(0,C.Jh)(this,(function(t){switch(t.label){case 0:return[4,s.Mn.create({header:"Bonjour, c'est une notification de test !",message:"Exemple de notification",duration:2e5,position:"top",color:"light"})];case 1:return e=t.sent(),[4,e.present()];case 2:return t.sent(),[2]}}))}))},transition:function(e,t){var n=(0,N.c)().addElement(t.enteringEl).fromTo("opacity",0,1).fromTo("transform","scale(0.9)","scale(1)").fromTo("filter","blur(15px)","blur(0px)").easing("cubic-bezier(.66,-0.01,0,1)").duration(400),a=(0,N.c)().addElement(t.leavingEl).fromTo("opacity",1,0).fromTo("transform","scale(1)","scale(1.05)").fromTo("filter","blur(0px)","blur(15px)").easing("cubic-bezier(1,0,1,.99)").duration(200),o=(0,N.c)().addAnimation(n).addAnimation(a);return o},menuOpened:function(e){return(0,C.mG)(this,void 0,void 0,(function(){var t=this;return(0,C.Jh)(this,(function(n){return"web"!==D.dV.getPlatform()&&(e?A.A_.setStyle({style:A.bg.Dark}):(this.changeStatusTimeout&&A.A_.setStyle({style:A.bg.Default}),setTimeout((function(){1==t.isMenuOpened&&A.A_.setStyle({style:A.bg.Dark})}),500))),[2]}))}))},displayDevMsg:function(){return(0,C.mG)(this,void 0,void 0,(function(){var e;return(0,C.Jh)(this,(function(t){switch(t.label){case 0:return[4,s.Cl.create({header:"Version de développement",message:"Papillon fonctionne actuellement en mode développement. Certaines fonctionnalités ne sont pas encore terminées et risquent de ne pas fonctionner correctement.",mode:"md",buttons:["Je comprends"]})];case 1:return e=t.sent(),[4,e.present()];case 2:return t.sent(),[2]}}))}))},displayDevMessage:function(){return(0,C.mG)(this,void 0,void 0,(function(){var e;return(0,C.Jh)(this,(function(t){switch(t.label){case 0:return[4,s.Cl.create({header:"Fonctionnalité non disponible",message:"Cette fonctionnalité n'est pas disponible pour le moment. Elle le sera prochainement.",mode:"md",buttons:["Je comprends"]})];case 1:return e=t.sent(),[4,e.present()];case 2:return t.sent(),[2]}}))}))},showChangelog:function(){localStorage.setItem("version",this.appVersion);var e=this.$refs.changelogModal.$el;e.present()},hideChangelog:function(){var e=this.$refs.changelogModal.$el;e.dismiss()},setSelectedIndex:function(e){var t=this.appPages.findIndex((function(t){return t.url==e}));this.selectedIndex=t}},watch:{$route:function(e){var t=e.path;this.setSelectedIndex(t)}},mounted:function(){var e=this,t=window.location.pathname;this.setSelectedIndex(t),this.$nextTick((function(){setTimeout((function(){T.c.hide()}),220)})),"android"===D.dV.getPlatform()?this.checkAndroidShortcuts():"ios"===D.dV.getPlatform()&&(this.checkIosShortcuts(),this.configureBackgroundFetch()),localStorage.loggedIn&&this.getUserData();var n=new Date;if(document.addEventListener("connectionState",(function(t){var a=t.detail;e.connectedToServer=a,n=new Date})),setInterval((function(){var t=new Date,a=t.getTime()-n.getTime(),o=Math.floor(a/1e3/60);o>=5&&(e.connectedToServer="paused")}),1e3),document.addEventListener("tokenUpdated",(function(){e.getUserData()})),localStorage.getItem("customAvatar")?this.avatar=localStorage.getItem("customAvatar"):localStorage.getItem("avatarCache")&&(this.avatar=localStorage.getItem("avatarCache")),document.addEventListener("userDataUpdated",(function(){localStorage.getItem("customAvatar")?e.avatar=localStorage.getItem("customAvatar"):localStorage.getItem("avatarCache")&&(e.avatar=localStorage.getItem("avatarCache")),localStorage.getItem("customName")?e.userData.student.name=localStorage.getItem("customName"):e.getUserData()})),window.addEventListener("online",(function(){e.presentToast("Vous êtes de nouveau connecté.","Certaines informations nécessiteront peut-être un rafraîchissement.","success",O.jgG),document.dispatchEvent(new CustomEvent("connectionState",{detail:"paused"}))})),window.addEventListener("offline",(function(){e.presentToast("Vous n'êtes plus connecté à Internet.","Vous n'aurez accès qu'aux informations déjà téléchargées.","danger",O.jgG),document.dispatchEvent(new CustomEvent("connectionState",{detail:"disconnected"}))})),navigator.onLine||(this.presentToast("Vous n'êtes pas connecté à Internet.","Vous n'aurez accès qu'aux informations déjà téléchargées.","danger",O.jgG),document.dispatchEvent(new CustomEvent("connectionState",{detail:"disconnected"}))),this.askNotifPerms(),document.addEventListener("settingsUpdated",(function(){if("true"!==localStorage.getItem("viescolaireEnabled")){if(!e.appPages.find((function(e){return"Vie scolaire"===e.title})))return;e.appPages.splice(3,1)}else{if(e.appPages.find((function(e){return"Vie scolaire"===e.title})))return;e.appPages.splice(3,0,{title:"Vie scolaire",url:"/schoollife",icon:"gavel",disabled:!1})}})),localStorage.getItem("customizations")){var a=JSON.parse(localStorage.getItem("customizations"));a.color&&(document.body.style.setProperty("--ion-color-primary",a.color.color.hex),document.body.style.setProperty("--ion-color-primary-rgb",a.color.color.rgb))}localStorage.getItem("version")?localStorage.getItem("version")!==this.appVersion&&this.showChangelog():this.loggedIn,document.addEventListener("showChangelog",(function(){e.showChangelog()})),document.addEventListener("navTransitionEnable",(function(t){e.showTransition=void 0,setTimeout((function(){e.showTransition=e.transition}),200),console.log("navTransitionEnable",t.detail)}))}});var W=n(3744);const H=(0,W.Z)(z,[["render",y],["__scopeId","data-v-f9449056"]]),_=H,G=(0,o.aZ)({__name:"MainApp",setup:function(e){var t=(0,r.iH)(null);return(0,o.bv)((function(){window.nav=t})),function(e,n){return(0,o.wg)(),(0,o.j4)((0,r.SU)(s._i),null,{default:(0,o.w5)((function(){return[(0,o.Wm)((0,r.SU)(s.O1),{ref_key:"nav",ref:t,root:_,swipeGesture:!0},null,512)]})),_:1})}}}),Q=G,Y=Q;n(3948);var V=n(4297),K=[{path:"/login",name:"Login",component:function(){return n.e(244).then(n.bind(n,7244))}}],q=(0,C.ev)((0,C.ev)([],K,!0),[{path:"",redirect:"/home"},{path:"/home",name:"Home",component:function(){return n.e(356).then(n.bind(n,6356))}},{path:"/timetable",name:"Timetable",component:function(){return Promise.all([n.e(118),n.e(397)]).then(n.bind(n,5397))}},{path:"/homework",name:"Homework",component:function(){return Promise.all([n.e(118),n.e(384)]).then(n.bind(n,1384))}},{path:"/homework/hw/:hw?",props:!0,name:"HomeworkItem",component:function(){return n.e(121).then(n.bind(n,8121))}},{path:"/grades",name:"Grades",component:function(){return n.e(70).then(n.bind(n,8070))}},{path:"/grades/:markID",props:!0,name:"Mark",component:function(){return n.e(392).then(n.bind(n,392))}},{path:"/schoollife",name:"Schoollife",component:function(){return n.e(692).then(n.bind(n,8692))}},{path:"/conversations",name:"Conversations",component:function(){return n.e(837).then(n.bind(n,575))}},{path:"/chat/:conversationID",props:!0,name:"chat",component:function(){return n.e(837).then(n.bind(n,8042))}},{path:"/news",name:"News",component:function(){return n.e(977).then(n.bind(n,1977))}},{path:"/news/info/:urlNews",props:!0,name:"Info",component:function(){return n.e(334).then(n.bind(n,4334))}},{path:"/settings",name:"Settings",component:function(){return n.e(895).then(n.bind(n,4895))}}],!1),X=(0,V.p7)({history:(0,V.PO)("/"),routes:q});X.beforeEach((function(e){return(0,C.mG)(void 0,void 0,void 0,(function(){return(0,C.Jh)(this,(function(t){return"true"!==localStorage.loggedIn&&"Login"!==e.name?[2,{name:"Login"}]:[2]}))}))}));const $=X;var ee=n(7751);n(8851),n(1292),n(1633),n(1045),n(6187),n(2299),n(3423),n(4687),n(9147),n(6250);n(6272);var te=(0,a.ri)(Y).use(s.oX).use(ee.Z).use($);$.isReady().then((function(){te.mount("#app")})),te.config.globalProperties.$rn=new Date,te.config.globalProperties.$api=localStorage.getItem("customApiUrl")||"https://api.getpapillon.xyz"},6684:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});n(8862),n(2707),n(7658),n(1817),n(5827),n(4916),n(5306);var a=n(6154),o=n(433),r=n(2560),s=n(6251),i=n(381),c=n(3162);function l(e){return Number(e)===e&&e%1!==0}async function u(e){switch(localStorage.loginService){case"pronote":return d(e);case"ecoledirecte":return h(e)}}function d(e){const t=o.l.config.globalProperties.$api,n=localStorage.getItem("token"),s=`${t}/grades?token=${n}`;let i=localStorage.getItem("GradeCache");if(null!=i&&!e){i=JSON.parse(i);const e=new Date,t=new Date(i.date);if(e.toDateString()==t.toDateString())return new Promise((e=>{e(f(i.grades))}))}return a.Z.get(s).then((e=>{"expired"==e.data&&(0,r["default"])();const t=new Date,n={date:t,grades:e.data};return localStorage.setItem("GradeCache",JSON.stringify(n)),new Promise((t=>{t(f(e.data))}))})).catch((e=>{if(498==e.response.status&&(0,r["default"])(),e.code)return e.code}))}function m(e,t){const n={significant:!0,significantReason:null,significantZero:!1};if("pronote"==t)switch(e){case 0:n.significant=!0,n.significantReason=null,n.significantZero=!1;break;case 1:n.significant=!1,n.significantReason="Abs.",n.significantZero=!1;break;case 2:n.significant=!1,n.significantReason="Disp.",n.significantZero=!1;break;case 3:n.significant=!1,n.significantReason="N.Not",n.significantZero=!1;break;case 4:n.significant=!1,n.significantReason="Inap.",n.significantZero=!1;break;case 5:n.significant=!1,n.significantReason="N.Ren",n.significantZero=!1;break;case 6:n.significant=!1,n.significantReason="Abs.",n.significantZero=!0;break;case 7:n.significant=!1,n.significantReason="N.Ren",n.significantZero=!0;break;case 8:n.significant=!1,n.significantReason="Disp.",n.significantZero=!0;break;case-1:n.significant=!1,n.significantReason=null,n.significantZero=!1;break}return"ecoledirecte"==t&&(e.nonSignificatif&&(n.significant=!1),e.enLettre&&(n.significant=!1,n.significantReason=e.valeur)),n}function g(){return Math.random().toString(36).substr(2,9).toUpperCase()}function p(e,t){let n=[],a="",o="",r=!1,s=!1;if("true"!=localStorage.getItem("groupSubjects"))n=t.find((t=>t.id==e.id)),a=e.name,o=e.id;else{if(null!=localStorage.getItem("excludedGroupSubjects")){const t=JSON.parse(localStorage.getItem("excludedGroupSubjects"));for(let n=0;n<t.length;n++){if(e.name.split(" > ")[0]==t[n]){s=!0;break}s=!1}}s?(n=t.find((t=>t.id==e.id)),a=e.name,o=e.id):(n=t.find((t=>t.name==e.name.split(" > ")[0])),a=e.name.split(" > ")[0],o=e.id,e.name.split(" > ").length>1&&(r=!0,o=g()))}return{subject:n,subjectName:a,subjectId:o,grouped:r,excluded:s}}function f(e){const t=e.averages,n=e.grades,a=[];n.sort(((e,t)=>new Date(t.date)-new Date(e.date))),n.forEach((e=>{let{subject:t,subjectName:n,subjectId:o,grouped:r,excluded:s}=p(e.subject,a);void 0==t&&(t={name:n,id:o,grouped:r,grpExcluded:s,marks:[]},a.push(t));const i={id:e.id,info:{subject:n,date:e.date,description:e.description||"Pas d'intitulé"},grade:e.grade},c=m(e.grade.significant,"pronote");i.info.significant=c.significant,i.info.significantReason=c.significantReason,i.info.significantZero=c.significantZero,delete i.grade.significant,i.info.significantZero&&(i.grade.value=0),i.info.significant||-1!=e.grade.average?i.info.significantAverage=!0:i.info.significantAverage=!1,(i.info.significant||null!=i.info.significantReason)&&(i.info.outOf20=e.is_out_of_20,i.info.bonus=e.is_bonus,i.info.optional=e.is_optional,i.grade.value=parseFloat(i.grade.value).toFixed(2),l(i.grade.average)&&(i.grade.average=parseFloat(i.grade.average).toFixed(2)),l(i.grade.min)&&(i.grade.min=parseFloat(i.grade.min).toFixed(2)),l(i.grade.max)&&(i.grade.max=parseFloat(i.grade.max).toFixed(2)),t.marks.push(i))})),a.forEach((e=>{e.marks.sort(((e,t)=>new Date(t.date)-new Date(e.date)))})),t.forEach((e=>{const{subject:t,subjectName:n,subjectId:o,grouped:r}=p(e.subject,a);if(void 0==t){const e={name:n,id:o,grouped:r,marks:[]};a.push(e)}const i=m(e.significant,"pronote");if(t.significant=i.significant,t.significantReason=i.significantReason,t.significantZero=i.significantZero,t.significantZero&&(t.average=0),t.significant||-1!=e.class_average?t.significantAverage=!0:t.significantAverage=!1,t.color=s.Z.getSubjectColor(n,s.Z.getRandomColor()),t.class={},t.grouped){let e=0,n=0,a=0,o=0;t.marks.forEach((t=>{const r=t.grade.coefficient;e+=t.grade.value*r,n+=t.grade.average*r,a+=t.grade.min*r,o+=t.grade.max*r})),t.average=parseFloat((e/t.marks.reduce(((e,t)=>e+t.grade.coefficient*t.grade.out_of),0)*20).toFixed(2)),t.class.average=parseFloat((n/t.marks.reduce(((e,t)=>e+t.grade.coefficient*t.grade.out_of),0)*20).toFixed(2)),t.class.min=parseFloat((a/t.marks.reduce(((e,t)=>e+t.grade.coefficient*t.grade.out_of),0)*20).toFixed(2)),t.class.max=parseFloat((o/t.marks.reduce(((e,t)=>e+t.grade.coefficient*t.grade.out_of),0)*20).toFixed(2))}else t.class.average=e.class_average,t.class.min=e.min,t.class.max=e.max,t.average=e.average}));let o=0,r=0,i=0,c=0;a.forEach((e=>{o+=e.average,r+=e.class.average,i+=e.class.min,c+=e.class.max})),o/=a.length,r/=a.length,i/=a.length,c/=a.length,-1!=o&&void 0!=o&&(o=e.overall_average),-1!=e.class_overall_average&&void 0!=e.class_overall_average&&(r=e.class_overall_average);const u={average:o,class:{average:r,min:i,max:c}};a.sort(((e,t)=>new Date(e.marks[0].date)-new Date(t.marks[0].date)));const d={marks:a,averages:u};return d}function h(e){const t="https://api.ecoledirecte.com/v3";console.log("Getting grades from ecoledirecte");const n=localStorage.getItem("token"),o=JSON.parse(localStorage.UserCache).id,s=`${t}/eleves/${o}/notes.awp?verbe=get`;let i=localStorage.getItem("GradeCache");if(null!=i&&!e){i=JSON.parse(i);const e=new Date,t=new Date(i.date);if(e.toDateString()==t.toDateString())return new Promise((e=>{e(v(i.grades))}))}const c={headers:{"Content-Type":"application/x-www-form-urlencoded","X-Token":n}},l="data={}";return a.Z.post(s,l,c).then((e=>{if(200!=e.data.code)if(525===e.data.code)(0,r["default"])();else{if(520!==e.data.code)return new Promise((t=>{t({error:e.data.code})}));(0,r["default"])()}const t=new Date,n={date:t,grades:e.data.data};return localStorage.setItem("GradeCache",JSON.stringify(n)),new Promise((t=>{t(v(e.data.data))}))}))}function v(e){console.log("Building grades");const t=e.notes;if(!e.periodes)return c.Z.presentError("Impossible de construire les notes.","danger","[ED] Auth failed. Essayez d'actualiser manuellement pour résoudre le problème."),{marks:[],averages:[]};const n=JSON.parse(localStorage.getItem("periodsCache")),a=n.find((e=>1==e.actual)).id,o=e.periodes.find((e=>e.idPeriode==a)),r=o.ensembleMatieres.disciplines,u=[];let d;if(t.sort(((e,t)=>new Date(t.date)-new Date(e.date))),r.forEach((e=>{const t={data:e,codeMatiere:e.codeMatiere,name:e.discipline,id:e.id,grouped:e.groupeMatiere,class:{},color:s.Z.getSubjectColor(e.discipline,s.Z.getRandomColor()),marks:[],average:parseFloat(e.moyenne.replace(",",".")),significant:!0};u.push(t)})),localStorage.getItem("currentPeriod")){let t=JSON.parse(localStorage.getItem("currentPeriod")),n=e.periodes.filter((e=>e.idPeriode===t.id));d={...t,...n}}else{let t=JSON.parse(localStorage.getItem("userData")).periods,n=t.find((e=>1==e.actual)),a=e.periodes.filter((e=>e.idPeriode===n.id));d={...n,...a}}t.forEach((e=>{if(e.codePeriode!=d.id)return;const t={id:e.id,info:{subject:e.libelleMatiere,date:e.date,description:e.devoir||"Pas d'intitulé",significant:!0},class:{max:e.maxClasse,min:e.minClasse,average:e.moyenneClasse},grade:{value:parseFloat(e.valeur.replace(",",".")),coefficient:parseFloat(e.coef),average:parseFloat(e.moyenneClasse),min:parseFloat(e.minClasse),max:parseFloat(e.maxClasse),out_of:parseFloat(e.noteSur)}},n=m(e,"ecoledirecte");if(t.info.significant=n.significant,t.info.significantReason=n.significantReason,t.info.significantZero=n.significantZero,t.info.significantZero&&(t.grade.value=0),t.info.significant||-1!=t.grade.average?t.info.significantAverage=!0:t.info.significantAverage=!1,!t.info.significant&&null==t.info.significantReason)return;"20"==e.noteSur&&(t.info.outOf20=20),t.grade.value=parseFloat(t.grade.value).toFixed(2),l(t.grade.average)&&(t.grade.average=parseFloat(t.grade.average).toFixed(2)),l(t.grade.min)&&(t.grade.min=parseFloat(t.grade.min).toFixed(2)),l(t.grade.max)&&(t.grade.max=parseFloat(t.grade.max).toFixed(2));const a=u.find((t=>t.codeMatiere==e.codeMatiere));a.marks.push(t)})),u.forEach((e=>{e.marks.sort(((e,t)=>new Date(t.date)-new Date(e.date)))})),u.forEach((e=>{e.grouped?e.marks.forEach((e=>{const t=e.grade.coefficient;g+=e.grade.value*t,p+=e.grade.average*t,f+=e.grade.min*t,h+=e.grade.max*t})):(e.data.moyenne.length>1?e.average=parseFloat(e.data.moyenne.replace(",",".")):e.average=0,e.data.moyenneClasse.length>1?e.class.average=parseFloat(e.data.moyenneClasse.replace(",",".")):e.class.average=0,e.data.moyenneMin.length>1?e.class.min=parseFloat(e.data.moyenneMin.replace(",",".")):e.class.min=0,e.data.moyenneMax.length>1?e.class.max=parseFloat(e.data.moyenneMax.replace(",",".")):e.class.max=0)}));let g=parseFloat(d[0].ensembleMatieres.moyenneGenerale.replace(",",".")),p=parseFloat(d[0].ensembleMatieres.moyenneClasse.replace(",",".")),f=parseFloat(d[0].ensembleMatieres.moyenneMin.replace(",",".")),h=parseFloat(d[0].ensembleMatieres.moyenneMax.replace(",",".")),v=[i(d[0].ensembleMatieres.dateCalcul).format("DD/MM/YYYY"),d[0].ensembleMatieres.dateCalcul.split(" ")[1]];const w={average:g,class:{average:p,min:f,max:h},calculate:v};u.sort(((e,t)=>{if(0!=e.marks.length&&0!=t.marks.length)return new Date(e.marks[0].date)-new Date(t.marks[0].date)}));const b={marks:u,averages:w};return b}const w=u},4892:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u,m:()=>v});n(1703),n(3948),n(4944),n(3792),n(8862),n(7658),n(4916),n(5306),n(1817),n(2801);var a=n(6154),o=n(381),r=n(433),s=n(2560),i=n(6251),c=n(2021),l=n(3162);async function u(e,t,n){switch(localStorage.loginService){case"pronote":return g(e,t,n);case"ecoledirecte":return f(e,t,n);case"skolengo":return d(e,t,n)}}async function d(e,t,n){const a=new Date(e).toISOString().split("T")[0];let o=JSON.parse(localStorage.getItem("HomeworkCache"))||[];if(o=o.filter((e=>e.dateFrom===a)),o.length>0&&!n)return new Promise((e=>{const t=JSON.parse(o[0].homework);e(m(t))}));try{const t=localStorage.getItem("token"),n=localStorage.getItem("ent"),o=new c.Kdecole(t,c.ApiVersion[n],0,"https://cors.api.getpapillon.xyz/"+c.ApiUrl[n]);console.log("[REQUEST] [HOMEWORK] Requesting homeworks...");const r=await o.getTravailAFaire(void 0,new Date(e));if(!r.tafOuvert)throw new Error("Service TAF fermé");const s=(await Promise.all(r.listeTravaux.map((e=>e.listTravail)).flat().map((e=>o.getContenuActivite(e.uidSeance,e.uid).catch(console.error))))).filter((e=>void 0!==e));if(!s.length)throw new Error("Aucun travail à faire n'a été trouvé.");const i=m(s),l=JSON.parse(localStorage.getItem("HomeworkCache"))||[],u={dateFrom:a,token:t,homework:JSON.stringify(s)};return l.push(u),localStorage.setItem("HomeworkCache",JSON.stringify(l)),i}catch(r){l.Z.presentError(`${r.message}`,"danger",r),console.error(r)}}function m(e){return e.map((e=>({data:{id:e.uid,date:e.date,color:i.Z.getSubjectColor(e.matiere),done:e.flagRealise},homework:{subject:e.matiere,content:e.codeHTML.replace(/style=/g,"nostyle="),shortContent:e.type},files:e.pjs.map((e=>({name:e.name,url:e.url})))})))}function g(e,t,n){const o=r.l.config.globalProperties.$api,i=new Date(e),c=new Date(t),l=localStorage.getItem("token"),u=i.toISOString().split("T")[0],d=c.toISOString().split("T")[0],m=`${o}/homework?dateFrom=${u}&dateTo=${d}&token=${l}`;let g=JSON.parse(localStorage.getItem("HomeworkCache"))||[];return g=g.filter((e=>e.dateFrom==u&&e.dateTo==d)),g.length>0&&!n?new Promise((t=>{const n=JSON.parse(g[0].homework);t(p(n,e))})):a.Z.get(m).then((t=>{let n=t.data;n=p(n,e);let a=JSON.parse(localStorage.getItem("HomeworkCache"))||[];const o={dateFrom:u,dateTo:d,token:l,homework:JSON.stringify(t.data)};return a=a.filter((e=>e.dateFrom!=u&&e.dateTo!=d)),a.push(o),localStorage.setItem("HomeworkCache",JSON.stringify(a)),n})).catch((e=>{if(e.response&&("notfound"==e.response.data||"expired"==e.response.data)&&(0,s["default"])(),e.code)return e.code}))}function p(e,t){const n=[];e.forEach((e=>{e.files.forEach((t=>{t.name||(t.name="Document"),t.url.startsWith("http")||e.files.splice(e.files.indexOf(t),1)}));let t=e.description;t.length>80&&(t=t.substring(0,80),t=t.substring(0,t.lastIndexOf(" ")),t+="..."),e.description=e.description.replace(/\n/g,"<br/>"),e.description=e.description.replace(/(https?:\/\/[^\s]+)/g,'<a href="$1" target="_blank">$1</a>');const a={data:{id:e.id,date:e.date.replace(/-/g,"/"),color:i.Z.getSubjectColor(e.subject.name,e.background_color),done:e.done},homework:{subject:e.subject.name,content:e.description,shortContent:t},files:e.files};i.Z.setSubjectColor(a.homework.subject,a.data.color,!0),n.push(a)}));const a=JSON.parse(localStorage.getItem("customHomeworks"))||[];return a.forEach((e=>{const a=new Date(e.date);a.setHours(0,0,0,0);const o=new Date(t);o.setHours(0,0,0,0),a.getDate()==o.getDate()&&n.push(e.homework)})),n}function f(e,t,n){const r="https://api.ecoledirecte.com/v3",i=new o(e),c=new o(t),l=i.format("YYYY-MM-DD").replace("/","-").replace("/","-").replace("/","-"),u=localStorage.getItem("token"),d=JSON.parse(localStorage.UserCache).id,m=i.toISOString().split("T")[0],g=c.toISOString().split("T")[0],p=`${r}/Eleves/${d}/cahierdetexte.awp?verbe=get`;let f=JSON.parse(localStorage.getItem("HomeworkCache"))||[];if(f=f.filter((e=>e.dateFrom==m&&e.dateTo==g)),f.length>0&&!n)return new Promise((e=>{const t=JSON.parse(f[0].homework);e(h(t))}));{const e={headers:{"Content-Type":"application/x-www-form-urlencoded","X-Token":u}},t="data={}";return console.log("[REQUEST] [HOMEWORK] Requesting homeworks..."),a.Z.post(p,t,e).then((async n=>{if(200!=n.data.code)if(525===n.data.code)(0,s["default"])();else{if(520!==n.data.code)return new Promise((e=>{e({error:n.data.code})}));(0,s["default"])()}const o=n.data.data;let i=[];async function c(){return new Promise((c=>{Object.keys(o).forEach((async o=>{const l=`${r}/Eleves/${d}/cahierdetexte/${o}.awp?verbe=get`;await a.Z.post(l,t,e).then((e=>{if(n.data.data.code){if(525!=n.data.data.code)return new Promise((e=>{e({error:n.data.data.code})}));(0,s["default"])()}const t=e.data.data;i[o]=t.matieres,c(i)}))}))}))}console.log("[REQUEST] [HOMEWORK] Requesting content homeworks..."),i=await c(),i=h(i);const p=JSON.parse(localStorage.getItem("HomeworkCache"))||[],f={dateFrom:m,dateTo:g,newDayRequest:l,token:u,homework:JSON.stringify(i)};return p.push(f),localStorage.setItem("HomeworkCache",JSON.stringify(p)),i}))}}function h(e){console.log("Building homeworks...");const t=[];return e.length>0?(e.forEach((e=>t.push(e))),t):(Object.keys(e).forEach((n=>{e[n].forEach((e=>{const n=e;if(!n.aFaire)return void console.warn('Skip construct of homework because doesn\'t contain any "aFaire" var');n.aFaire.documents.forEach((e=>{e.libelle||(e.name="Document")})),n.aFaire.contenu=atob(n.aFaire.contenu);let a=n.aFaire.contenu;a.length>80&&(a=a.substring(0,80),a=a.substring(0,a.lastIndexOf(" ")),a+="..."),n.aFaire.contenu=n.aFaire.contenu.replace(/\n/g,"<br/>"),n.aFaire.contenu=n.aFaire.contenu.replace(/(https?:\/\/[^\s]+)/g,'<a href="$1" target="_blank">$1</a>');const o={data:{id:n.id,date:n.aFaire.donneLe.replace(/-/g,"/"),color:i.Z.getSubjectColor(n.matiere,n.color||"#12d4a6"),done:n.effectue},homework:{subject:n.matiere,content:n.aFaire.contenu,shortContent:a},files:n.aFaire.documents};i.Z.setSubjectColor(o.homework.subject,o.data.color,!0),t.push(o)}))})),t)}async function v(e){if(e[0].toString().startsWith("custom_"))return w(e[0]);switch(localStorage.loginService){case"pronote":return b(e);case"ecoledirecte":return S(e)}}async function w(e){const t=JSON.parse(localStorage.customHomeworks),n=t.find((t=>t.homework.data.id==e));n&&(n.homework.data.done=!n.homework.data.done),localStorage.customHomeworks=JSON.stringify(t)}async function b(e){const t=e[0],n=e[1],o=localStorage.getItem("token"),s=r.l.config.globalProperties.$api,i=new Date(n),c=i.toISOString().split("T")[0],l=`${s}/homework/changeState`;return a.Z.post(l,{token:o,homeworkId:t,dateFrom:c,dateTo:c})}async function S(e){const t="https://api.ecoledirecte.com/v3",n=localStorage.getItem("token"),o=JSON.parse(localStorage.getItem("UserCache")).id,r=e[2].homework,s=e[0],i={headers:{"Content-Type":"application/x-www-form-urlencoded","X-Token":`${n}`}};let c,l;r.effectue?(c=[],l=[s]):(c=[s],l=[]),c=[s],l=[];const u=`data={\n                "idDevoirsEffectues": [${c}],\n                "idDevoirsNonEffectues": [${l}]\n            }`,d=`${t}/Eleves/${o}/cahierdetexte.awp?verbe=put`;return a.Z.post(d,u,i)}},8170:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});n(8862),n(2707),n(7658);var a=n(6154),o=n(433),r=n(2560),s=n(2021),i=n(3162);async function c(e){switch(localStorage.loginService){case"pronote":return d(e);case"ecoledirecte":return g(e);case"skolengo":return l(e)}}function l(e){const t=localStorage.getItem("token"),n=localStorage.getItem("ent"),a=new s.Kdecole(t,s.ApiVersion[n],0,"https://cors.api.getpapillon.xyz/"+s.ApiUrl[n]);let o=localStorage.getItem("NewsCache");if(null!=o&&!e){o=JSON.parse(o);const e=new Date,t=new Date(o.date);if(e.toDateString()==t.toDateString())return new Promise((e=>{e(u(o.news))}))}return a.getActualites().then((e=>{const t=new Date,n={date:t,news:e};return localStorage.setItem("NewsCache",JSON.stringify(n)),new Promise((t=>{t(u(e))}))})).catch((e=>{i.Z.presentError(`${e.message}`,"danger",e),console.error(e)}))}function u(e){return e.map((e=>({title:e.titre,content:e.titre,htmlContent:"Rendez vous votre ENT pour consulter le détail de cet article.",date:new Date(e.date),dateString:new Date(e.date).toLocaleDateString("fr-FR",{weekday:"long",month:"long",day:"numeric"})+" à "+new Date(e.date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),category:e.type,author:e.auteur,attachments:[],isSurvey:!1,isRead:!0,isAnonymized:!1}))).sort(((e,t)=>new Date(t.date)-new Date(e.date)))}function d(e){const t=o.l.config.globalProperties.$api,n=localStorage.getItem("token"),s=`${t}/news?token=${n}`;let i=localStorage.getItem("NewsCache");if(null!=i&&!e){i=JSON.parse(i);const e=new Date,t=new Date(i.date);if(e.toDateString()==t.toDateString())return new Promise((e=>{e(m(i.news))}))}return a.Z.get(s).then((e=>{"expired"==e.data&&(0,r["default"])();const t=new Date,n={date:t,news:e.data};return localStorage.setItem("NewsCache",JSON.stringify(n)),new Promise((t=>{t(m(e.data))}))})).catch((e=>{if("expired"==e.response.data&&(0,r["default"])(),e.code)return e.code}))}function m(e){const t=[];for(let n=0;n<e.length;n++){const a=e[n];null==a.title&&(a.title="Sans titre");const o={title:a.title,content:a.content,htmlContent:a.html_content[0].texte.V,date:a.date,dateString:new Date(a.date).toLocaleDateString("fr-FR",{weekday:"long",month:"long",day:"numeric"})+" à "+new Date(a.date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),category:a.category,author:a.author,attachments:a.attachments,isSurvey:a.survey,isRead:a.read,isAnonymized:a.anonymous_survey};t.push(o)}return t.sort(((e,t)=>new Date(t.date)-new Date(e.date))),t}function g(){return new Promise((e=>{e([])}))}const p=c},8874:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});n(7658),n(2707);var a=n(1586),o=n(4892),r=n(6684),s=n(8170);async function i(e){switch(localStorage.loginService){case"pronote":return c(e);case"ecoledirecte":return l(e);case"skolengo":return u(e)}}function c(e){return new Promise(((t,n)=>{let i=[],c=[];const l={full:[],last:[]};let u=[],d=0,m=0;const g=[];(0,a.Z)(new Date,e).then((e=>{"ERR_NETWORK"==e?(m++,g.push(e)):(i=e,d++)}));const p=new Date,f=new Date;f.setDate(f.getDate()+3),(0,o.Z)(p,f,e).then((e=>{"ERR_NETWORK"==e?(m++,g.push(e)):(c=e,d++)})),(0,r.Z)(e).then((e=>{if("ERR_NETWORK"==e)m++,g.push(e);else{l.full=e,d++;const t=[];for(let e=0;e<l.full.marks.length;e++)for(let n=0;n<l.full.marks[e].marks.length;n++){const a=l.full.marks[e].marks[n];a.subject={name:l.full.marks[e].name,color:l.full.marks[e].color,id:l.full.marks[e].id},t.push(a)}t.sort(((e,t)=>new Date(t.info.date)-new Date(e.info.date)));for(let e=0;e<5;e++)void 0!=t[e]&&l.last.push(t[e])}})),(0,s.Z)(e).then((e=>{"ERR_NETWORK"==e?(m++,g.push(e)):(u=e,d++)}));const h=setInterval((()=>{4==d&&(clearInterval(h),t({timetable:i,homeworks:c,grades:l,news:u})),2==m&&(clearInterval(h),n({errors:g}))}))}))}function l(e){return new Promise((t=>{let n=[],i=[];const c={full:[],last:[]};let l=[],u=0;(0,a.Z)(new Date,e).then((e=>{n=e,u++}));const d=new Date,m=new Date;m.setDate(m.getDate()+3),(0,o.Z)(d,m,e).then((e=>{i=e,u++})),(0,r.Z)(e).then((e=>{c.full=e,u++;const t=[];for(let n=0;n<c.full.marks.length;n++)for(let e=0;e<c.full.marks[n].marks.length;e++){const a=c.full.marks[n].marks[e];a.subject={name:c.full.marks[n].name,color:c.full.marks[n].color,id:c.full.marks[n].id},t.push(a)}t.sort(((e,t)=>new Date(t.info.date)-new Date(e.info.date)));for(let n=0;n<5;n++)void 0!=t[n]&&c.last.push(t[n])})),(0,s.Z)(e).then((e=>{l=e,u++}));const g=setInterval((()=>{4==u&&(clearInterval(g),t({timetable:n,homeworks:i,grades:c,news:l}))}))}))}async function u(e){const t=await(0,a.Z)(new Date,e),n=await(0,o.Z)(new Date,new Date,e);return{timetable:t,homeworks:n}}const d=i},1586:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});n(1703),n(8862),n(7658),n(2707),n(4916),n(5306);var a=n(6154),o=n(433),r=n(2560),s=n(6251),i=n(2021),c=n(3162);let l;async function u(e,t){switch(localStorage.loginService){case"pronote":return g(e,t);case"ecoledirecte":return f(e,t);case"skolengo":return d(e,t)}}function d(e,t){const n=new Date(e),a=n.toISOString().split("T")[0],o=localStorage.getItem("token"),r=localStorage.getItem("ent");let s=JSON.parse(localStorage.getItem("TimetableCache"))||[];if(s=s.filter((e=>e.date==a&&e.token==o)),s.length>0&&!t)return new Promise((e=>{const t=JSON.parse(s[0].timetable);e(m((null===t||void 0===t?void 0:t.listeSeances)||[]))}));{const e=new i.Kdecole(o,i.ApiVersion[r],0,"https://cors.api.getpapillon.xyz/"+i.ApiUrl[r]);return e.getCalendrier().then((e=>{if(!1===e.cdtOuvert)throw new Error("Le calendrier n'est pas ouvert.");const t=e.listeJourCdt.find((e=>e.date.toISOString().split("T")[0]===a)),n=m((null===t||void 0===t?void 0:t.listeSeances)||[]),r=JSON.parse(localStorage.getItem("TimetableCache"))||[],s={date:a,token:o,timetable:JSON.stringify(t||[])};return r.push(s),localStorage.setItem("TimetableCache",JSON.stringify(r)),n})).catch((e=>new Promise((t=>{c.Z.presentError(`${e.message}`,"danger",e),console.error(e),t({error:e.code})}))))}}function m(e){return e.map((e=>({course:{id:e.idSeance,subject:e.matiere,color:s.Z.getSubjectColor(e.matiere),num:null,sameTime:!1,actual:!1,distance:!1,lengthCours:0},data:{subject:e.matiere,teachers:[" "],rooms:[e.salle],groupNames:null,memo:e.aRendre.map((e=>e.type)).join(" "),hasMemo:!1,linkVirtual:null},time:{start:new Date(e.hdeb),end:new Date(e.hfin)},status:{isCancelled:!e.flagActif,isExempted:!1,isDetention:!1,isOuting:!1,isTest:!1,isCustom:!1,status:e.motifModif}}))).sort(((e,t)=>new Date(e.time.start)-new Date(t.time.start)))}function g(e,t){const n=o.l.config.globalProperties.$api;l=new Date(e);const s=localStorage.getItem("token"),i=l.toISOString().split("T")[0],c=`${n}/timetable?dateString=${i}&token=${s}`;let u=JSON.parse(localStorage.getItem("TimetableCache"))||[];return u=u.filter((e=>e.date==i&&e.token==s)),u.length>0&&!t?new Promise((e=>{const t=JSON.parse(u[0].timetable);e(p(t))})):a.Z.get(c).then((e=>{let t=e.data;t=p(t);const n=JSON.parse(localStorage.getItem("TimetableCache"))||[],a={date:i,token:s,timetable:JSON.stringify(e.data)};return n.push(a),localStorage.setItem("TimetableCache",JSON.stringify(n)),document.dispatchEvent(new CustomEvent("connectionState",{detail:"connected"})),t})).catch((e=>{if(e.response&&("notfound"==e.response.data||"expired"==e.response.data)&&((0,r["default"])(),document.dispatchEvent(new CustomEvent("connectionState",{detail:"disconnected"}))),e.code)return e.code}))}function p(e){const t=[];return e.forEach((e=>{const n={course:{id:e.id,color:s.Z.getSubjectColor(e.subject.name,e.background_color),num:e.num,sameTime:!1,actual:!1,distance:!1,lengthCours:0},data:{subject:e.subject.name,teachers:e.teachers,rooms:e.rooms,groupNames:e.group_names,memo:e.memo,hasMemo:!1,linkVirtual:e.virtual},time:{start:new Date(e.start.replace(/-/g,"/")),end:new Date(e.end.replace(/-/g,"/"))},status:{isCancelled:e.is_cancelled,isExempted:e.is_exempted,isDetention:e.is_detention,isOuting:e.is_outing,isTest:e.is_test,isCustom:!1,status:e.status}};""!=e.subject.name&&s.Z.setSubjectColor(n.data.subject,n.course.color,!0),null!=e.memo&&(n.data.hasMemo=!0),e.is_detention&&(n.data.subject="🚨 Retenue",n.course.color="#ff0000",n.status.status="Vous êtes placé en retenue"),e.is_exempted&&(n.course.color="#627E66",n.status.status="Vous êtes dispensé de cours"),t.push(n)})),t.sort(((e,t)=>new Date(e.time.start)-new Date(t.time.start))),t}function f(e,t){const n="https://api.ecoledirecte.com/v3";l=new Date(e);const o=localStorage.getItem("token"),s=l.toISOString().split("T")[0],i=JSON.parse(localStorage.UserCache).id,c=`${n}/E/${i}/emploidutemps.awp?verbe=get`;let u=JSON.parse(localStorage.getItem("TimetableCache"))||[];if(u=u.filter((e=>e.date==s&&e.token==o)),u.length>0&&!t)return new Promise((e=>{const t=JSON.parse(u[0].timetable);e(h(t))}));{const e={headers:{"Content-Type":"application/x-www-form-urlencoded","X-Token":o}},t=`data={\n            "dateDebut": "${s}",\n            "dateFin": "${s}",\n            "avecTrous": false\n        }`;return a.Z.post(c,t,e).then((e=>{if(200!=e.data.code)if(525===e.data.code)(0,r["default"])();else{if(520!==e.data.code)return new Promise((t=>{t({error:e.data.code})}));(0,r["default"])()}let t=e.data.data;t=h(t);const n=JSON.parse(localStorage.getItem("TimetableCache"))||[],a={date:s,token:o,timetable:JSON.stringify(e.data.data)};return n.push(a),localStorage.setItem("TimetableCache",JSON.stringify(n)),t})).catch((e=>{if(e.response&&525==e.response.data.code&&(0,r["default"])(),e.code)return new Promise((t=>{t({error:e.code})}))}))}}function h(e){const t=[];return e.forEach((e=>{const n={course:{id:e.id,color:s.Z.getSubjectColor(e.matiere,e.color),num:null,sameTime:!1,actual:!1,distance:!1,lengthCours:0},data:{subject:e.matiere,teachers:e.prof.split(),rooms:e.salle.split(),groupNames:e.groupe,memo:null,hasMemo:!1,linkVirtual:!1},time:{start:new Date(e.start_date.replace(/-/g,"/")),end:new Date(e.end_date.replace(/-/g,"/"))},status:{isCancelled:e.isAnnule,isExempted:e.dispensable,isDetention:!1,isOuting:!1,isCustom:!1,status:e.isAnnule?"Cours annulé":null}};"CONGE"==e.typeCours&&(n.data.subject=e.text,n.course.color="#3462e0",n.status.status="Vous êtes en congés",n.data.rooms=["Chez vous"],n.data.teachers=["Aucun prof."]),""!=e.matiere&&s.Z.setSubjectColor(n.data.subject,n.course.color,!0),null!=e.memo&&(n.data.hasMemo=!0),e.isModifie&&(n.status.status="Le cours a été modifié"),e.is_detention&&(n.data.subject="🚨 Retenue",n.course.color="#ff0000",n.status.status="Vous êtes placé en retenue"),e.is_exempted&&(n.course.color="#627E66",n.status.status="Vous êtes dispensé de cours"),t.push(n)})),t.sort(((e,t)=>new Date(e.time.start)-new Date(t.time.start))),t}const v=u},89:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});n(8862);var a=n(6154),o=n(433),r=n(2560),s=n(2021),i=n(3162),c=n(415);const l=n(8664).Z,u=new l;function d(e){switch(localStorage.loginService){case"pronote":return f(e);case"ecoledirecte":return v(e);case"skolengo":return g(e)}}const m="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";async function g(e){const t=localStorage.getItem("token"),n=localStorage.getItem("ent"),a=JSON.parse(localStorage.getItem("UserCache"))||[];if(a.user&&!e){const e=JSON.parse(a.user);return new Promise((t=>{t(p(e))}))}{const e=new s.Kdecole(t,s.ApiVersion[n],0,"https://cors.api.getpapillon.xyz/"+s.ApiUrl[n]);return e.getInfoUtilisateur().then((e=>{localStorage.setItem("avatarCache","data:image/png;base64,"+m);const t=p(e);return localStorage.setItem("UserCache",JSON.stringify(t)),document.dispatchEvent(new CustomEvent("avatarLoaded")),t})).catch((e=>{i.Z.presentError("Impossible de joindre le serveur.","danger",e),console.error("Unable to join server - "+e)}))}}function p(e){return{student:{name:e.nom,avatar:"",ine:"",contact:{phone:"",email:""}},class:{name:"",school:""},periods:[]}}async function f(e){const t=o.l.config.globalProperties.$api,n=localStorage.getItem("token"),s=`${t}/user?token=${n}`,i=JSON.parse(localStorage.getItem("UserCache"))||[];if(i.user&&!e){const e=JSON.parse(i.user);return new Promise((t=>{t(h(e))}))}return a.Z.get(s).then((e=>{const t=e.data,n=t.profile_picture;if(null==n||void 0==n){const n=m;return localStorage.setItem("avatarCache","data:image/png;base64,"+n),localStorage.setItem("UserCache",JSON.stringify(e.data)),h(t)}const o="https://cors.api.getpapillon.xyz/"+n;return a.Z.get(o,{responseType:"blob"}).then((e=>{const t=e.data,n=new FileReader;n.readAsDataURL(t),n.onloadend=async function(){const e=n.result,t=`${e}`;u.getColorAsync(t).then((e=>{localStorage.setItem("averageColor",JSON.stringify(e)),document.dispatchEvent(new CustomEvent("averageColorUpdated"))})).catch((e=>{console.error(e)})),localStorage.setItem("avatarCache",t)}})),localStorage.setItem("UserCache",JSON.stringify(e.data)),h(t)})).catch((e=>{if(e.response)if("notfound"==e.response.data)(0,r["default"])();else{if("expired"!=e.response.data)return console.error(e),new Promise((t=>{t({error:e.response.data})}));(0,r["default"])()}}))}function h(e){return{student:{name:e.name,avatar:e.profile_picture,ine:e.ine,contact:{phone:e.phone,email:e.email}},class:{name:e.class,school:e.establishment},periods:e.periods}}async function v(e){const t="https://api.ecoledirecte.com/v3",n=`${t}/login.awp`,o=JSON.parse(localStorage.getItem("UserCache"))||[];return o&&!e?new Promise((e=>{if(o.profile.photo=void 0,null==o.profile.photo||void 0==o.profile.photo){const e=m;localStorage.setItem("avatarCache","data:image/png;base64,"+e)}e(w(o))})):a.Z.get(n).then((async e=>{"notfound"!=e&&"expired"!=e||(0,r["default"])();const t=e.data.accounts[0],n=t.profile.photo;if(null==n||void 0==n){const n=m;return localStorage.setItem("avatarCache","data:image/png;base64,"+n),localStorage.setItem("UserCache",JSON.stringify(e.data.accounts[0])),w(t)}return await(0,c.Z)().then((n=>{t.periods=n,e.data.accounts[0].periods=n})),localStorage.setItem("UserCache",JSON.stringify(e.data.accounts[0])),w(t)})).catch((e=>{e.response&&525==e.response.data.code&&(0,r["default"])()}))}function w(e){return{student:{name:e.nom+" "+e.prenom,avatar:e.profile.photo,ine:e.profile.rneEtablissement,contact:{phone:e.profile.telPortable,email:e.email}},class:{name:e.profile.classe.code,school:e.nomEtablissement},periods:e.periods}}const b=d},415:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});n(7658),n(8862);var a=n(6154),o=n(2560);async function r(e,t){e||(e=JSON.parse(localStorage.UserCache).id),t||(t=localStorage.getItem("token"));const n="https://api.ecoledirecte.com/v3",r=`${n}/eleves/${e}/notes.awp?verbe=get`,s={headers:{"Content-Type":"application/x-www-form-urlencoded","X-Token":t}},i="data={}";return a.Z.post(r,i,s).then((e=>{if(200!=e.data.code)if(525===e.data.code)(0,o["default"])();else{if(520!==e.data.code)return new Promise((t=>{t({error:e.data.code})}));(0,o["default"])()}const t=e.data.data.periodes,n=[];return t.forEach((e=>{const t={start:e.dateDebut,end:e.dateFin,name:e.periode,id:e.idPeriode,actual:!e.cloture};n.push(t)})),localStorage.setItem("periodsCache",JSON.stringify(n)),new Promise((e=>{e(n)}))}))}const s=r},7907:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});n(8862);const a=n(8664).Z,o=new a;async function r(e){const t=e.profile.photo,n="data:image/png;base64,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";let a;if(null==t||void 0==t)return a=n,localStorage.setItem("avatarCache",n),a;{const e=`${t}`,r={headers:{"Sec-Fetch-Dest":"image","Sec-Fetch-Mode":"no-cors",Host:"doc1.ecoledirecte.com","Sec-GPC":"1"},mode:"no-cors",referrerPolicy:"no-referrer"};a=await fetch(e,r).then((e=>{const t=e.data,n=new FileReader;n.readAsDataURL(t),n.onloadend=async function(){const e=n.result,t=`${e}`;return o.getColorAsync(t).then((e=>{localStorage.setItem("averageColor",JSON.stringify(e)),document.dispatchEvent(new CustomEvent("averageColorUpdated"))})).catch((e=>{console.log(e)})),localStorage.setItem("avatarCache",t),t}})).catch((e=>(console.log(e),n)))}return a}const s=r},2560:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});n(2801),n(3948),n(1637),n(2062),n(8862),n(6699);var a=n(433),o=n(3162),r=n(6154),s=n(7907),i=n(415);let c=!1;function l(){switch(localStorage.loginService){case"pronote":return u();case"ecoledirecte":return d()}}function u(){return new Promise(((e,t)=>{if(!c){const r=a.l.config.globalProperties.$api;let s=null;try{s=JSON.parse(atob(localStorage.getItem("loginData")))}catch(n){return o.Z.presentError("Merci de vous reconnecter.","danger",`Une erreur s'est produite lors de la récupération des données de connexion. Merci de vous reconnecter. (${n})`),console.error(`[Connect to Pronote API] Error while parsing loginData: ${n}`),void t(n)}const i=s.username,l=s.password,u=s.cas,d=s.url,m=new Headers;m.append("Content-Type","application/x-www-form-urlencoded");const g=new URLSearchParams;g.append("url",d),g.append("ent",u),g.append("username",i),g.append("password",l);const p={method:"POST",headers:m,body:g,redirect:"follow"};return c=!0,document.dispatchEvent(new CustomEvent("connectionState",{detail:"connecting"})),fetch(r+"/generatetoken",p).then((e=>e.json())).then((n=>{n.token?(localStorage.setItem("token",n.token),localStorage.setItem("UserCache",JSON.stringify({})),localStorage.setItem("TimetableCache",JSON.stringify([])),document.dispatchEvent(new CustomEvent("tokenUpdated")),document.dispatchEvent(new CustomEvent("connectionState",{detail:"connected"})),c=!1,e(n.token)):("Missing password"==n.error||"Missing username"==n.error||n.error.includes("probably wrong login information")||n.error.includes("probably bad username/password")?o.Z.presentToast("Merci de vous reconnecter.","danger"):"Your IP address is suspended."==n.error?o.Z.presentError("Une erreur s'est produite","danger","L'adresse IP de nos serveurs est suspendue pour votre établissement. S'il vous plaît réessayez dans quelques heures."):o.Z.presentError("Une erreur s'est produite.","danger",n.error),t(n.error),console.error("[Get Token]: Return to login page - "+n),document.dispatchEvent(new CustomEvent("connectionState",{detail:"disconnected"})),c=!1)})).catch((e=>{o.Z.presentError("Impossible de joindre le serveur.","danger",""+e),console.error("[Get Token]: Unable to join server - "+e),document.dispatchEvent(new CustomEvent("connectionState",{detail:"disconnected"})),c=!1,t(""+e)}))}}))}function d(){return new Promise(((e,t)=>{if(document.dispatchEvent(new CustomEvent("connectionState",{detail:"connecting"})),!c){const a="https://api.ecoledirecte.com/v3";let l=null;try{l=JSON.parse(atob(localStorage.getItem("loginData")))}catch(n){return o.Z.presentError("Une erreur interne est survenue","danger",`Une erreur s'est produite lors de la récupération des données de connexion. Merci de vous reconnecter. (${n})`),console.error(`[Connect to EcoleDirecte API] Error while parsing loginData: ${n}`),t(n),void document.dispatchEvent(new CustomEvent("connectionState",{detail:"disconnected"}))}const u=l.username,d=l.password,m={headers:{"Content-Type":"application/x-www-form-urlencoded","X-Token":""}},g=`data={\n                "uuid": "",\n                "identifiant": "${encodeURIComponent(u)}",\n                "motdepasse": "${encodeURIComponent(d)}",\n                "isReLogin": false\n            }`;return c=!0,r.Z.post(a+"/login.awp",g,m).then((async n=>{200===n.data.code?(localStorage.setItem("token",n.data.token),n.data.data.accounts[0].profile.photo=await(0,s.Z)(n.data.data.accounts[0]),localStorage.setItem("TimetableCache",JSON.stringify([])),await(0,i.Z)(n.data.data.accounts[0].id,n.data.token).then((e=>{n.data.data.accounts[0].periods=e})),localStorage.setItem("UserCache",JSON.stringify(n.data.data.accounts[0])),document.dispatchEvent(new CustomEvent("tokenUpdated")),c=!1,document.dispatchEvent(new CustomEvent("connectionState",{detail:"connected"})),e(n.data.token)):(t(n.code+", "+n.message),505===n.data.code?o.Z.presentToast("Échec de la reconnexion","danger","Vos identifiants semblent invalides. Pour les mettre à jour, déconnectez-vous puis reconnectez-vous de papillon.\n"+n.data.message):o.Z.presentError("Une erreur s'est produite.","danger",n.error),console.error("[Get Token]: Return to login page - "+n),document.dispatchEvent(new CustomEvent("connectionState",{detail:"disconnected"})))})).catch((e=>{o.Z.presentError("Impossible de joindre le serveur.","danger",e),console.error(e),console.error("[Get Token]: Unable to join server - "+e),document.dispatchEvent(new CustomEvent("connectionState",{detail:"disconnected"})),t(`[${e.code}] ${e.name}: ${e.message}`)}))}}))}const m=l},3162:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});n(3948);var a=n(5274),o=n(2634),r=n(6726);async function s(e,t){const n=await a.Mn.create({message:e,duration:5e3,position:"bottom",color:t});await n.present()}async function i(e){o.F.show({text:e,position:"bottom",duration:"short"})}async function c(e,t,n){const o=await a.Mn.create({message:e,duration:5e3,position:"bottom",color:t,icon:n});await o.present()}async function l(e,t,n,o,s=!1,i=null){"danger"==n?r.Z.notification("error"):"success"==n?r.Z.notification("success"):"warning"==n&&r.Z.notification("warning");let c=[];1==s&&(c=[{text:"Plus d'infos",role:"info",handler:()=>{"[object Object]"!=i&&"undefined"!=i&&null!=i||(i="Impossible d'obtenir plus d'infos."),m(i)}}]);const l=await a.Mn.create({header:e,message:t,duration:5e3,position:"bottom",color:n,icon:o,buttons:[...c]});await l.present()}async function u(e,t,n){"danger"==t?r.Z.notification("error"):"success"==t?r.Z.notification("success"):"warning"==t&&r.Z.notification("warning");const o=await a.Mn.create({header:e,duration:5e3,position:"top",color:t,icon:n,cssClass:"toast-small"});await o.present()}async function d(e,t,n){"danger"==t&&r.Z.notification("error");const o=await a.Mn.create({message:e,duration:5e3,position:"bottom",color:t,buttons:[{text:"Plus d'infos",role:"info",handler:()=>{"[object Object]"!=n&&"undefined"!=n&&null!=n||(n=`Impossible d'obtenir plus d'infos (${n})`),m(n)}}]});await o.present()}async function m(e){const t=await a.Cl.create({header:"Détails de l'erreur",subHeader:"Une erreur s'est produite",message:e,mode:"md",buttons:["OK"]});await t.present()}async function g(){const e=await a.Mn.create({message:"Ceci est un test",duration:2e5,position:"bottom",color:"light"});await e.present()}const p={presentToastFull:l,presentToastSmall:u,presentNativeToast:i,presentToast:s,presentError:d,presentToastIcon:c,presentToastTest:g}},6726:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(4052);async function o(e){await a.ej.notification({type:e})}async function r(e){await a.ej.impact({style:e})}async function s(){let e=5;const t=setInterval((async()=>{await a.ej.impact({style:"MEDIUM"}),0===e&&clearInterval(t),e--}),50)}const i={notification:o,impact:r,confetti:s}},6251:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});n(6699),n(8862);let a=["#1E90FF","#228B22","#8B008B","#F7A139","#4B0082","#43C59E","#5C80BC","#F15152","#1244B8","#17BEBB","#6B8E23","#72408A","#B8860B","#9B4BBD","#F0E68C","#FF69B4","#008080","#D46C17","#209488","#008704","#4C7B8B"];function o(e=!1){const t=JSON.parse(localStorage.getItem("SubjectColors"))||{};return e||(a=a.filter((e=>!Object.values(t).includes(e)))),0==a.length?"#6AB764":a[Math.floor(Math.random()*a.length)]}function r(e,t){const n=parseInt(e,16),a=Math.round(2.55*t),o=(n>>16)+a,r=(n>>8&255)+a,s=(255&n)+a;return(16777216+65536*(o<255?o<1?0:o:255)+256*(r<255?r<1?0:r:255)+(s<255?s<1?0:s:255)).toString(16).slice(1)}function s(e){return"#"+r(e,-20)}function i(e,t,n=!1){const a=JSON.parse(localStorage.getItem("SubjectColors"))||{};return t.includes("#")||(t="#"+t),void 0==a[e]||n?a[e]==t?a[e]:(a[e]=t,localStorage.setItem("SubjectColors",JSON.stringify(a)),t):a[e]}function c(e,t,n=!1){const a=JSON.parse(localStorage.getItem("SubjectColors"))||{};return e.includes(">")?e=e.split(" > ")[0]:e.includes("&")||e.split(" ").length>1&&(e=e.split(" ")[0]),a[e]?a[e]:("true"==localStorage.getItem("useScolColors")||n||(t=o()),i(e,t))}const l={setSubjectColor:i,getSubjectColor:c,getRandomColor:o,lightenColor:r,darkenHexColor:s}},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"papillon","version":"5.7.1","canal":"dev","private":true,"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build","test:unit":"vue-cli-service test:unit","test:e2e":"vue-cli-service test:e2e","lint":"vue-cli-service lint"},"dependencies":{"@capacitor-community/app-icon":"^4.1.0","@capacitor/action-sheet":"^5.0.2","@capacitor/android":"^5.0.4","@capacitor/app":"^5.0.2","@capacitor/assets":"^2.0.4","@capacitor/browser":"^5.0.2","@capacitor/clipboard":"^5.0.2","@capacitor/core":"^5.0.4","@capacitor/device":"^5.0.2","@capacitor/dialog":"^5.0.2","@capacitor/filesystem":"^5.0.2","@capacitor/geolocation":"^5.0.2","@capacitor/haptics":"^5.0.2","@capacitor/ios":"^5.0.4","@capacitor/keyboard":"^5.0.2","@capacitor/local-notifications":"^5.0.2","@capacitor/network":"^5.0.2","@capacitor/preferences":"^5.0.2","@capacitor/share":"^5.0.2","@capacitor/splash-screen":"^5.0.2","@capacitor/status-bar":"^5.0.2","@capacitor/toast":"^5.0.2","@capawesome/capacitor-file-picker":"^5.0.0","@ionic/vue":"^7.0.1","@ionic/vue-router":"^7.0.1","@mauricewegner/capacitor-navigation-bar":"^2.0.3","@transistorsoft/capacitor-background-fetch":"^5.0.0","axios":"^1.2.1","capacitor-android-shortcuts":"^5.0.5","capacitor-calendar":"^1.0.6","capacitor-notification-badge":"^1.0.6","capacitor-plugin-safe-area":"^2.0.5","chart.js":"^4.3.0","core-js":"^3.6.5","fast-average-color":"^9.3.0","install":"^0.13.0","ionicons":"^7.1.1","js-confetti":"^0.11.0","kdecole-api":"^1.4.3","lucide-vue-next":"^0.221.0","moment":"^2.29.4","npm":"^9.6.2","pica":"^9.0.1","sharp":"^0.32.1","swiper":"^9.3.2","values.js":"^2.1.1","vue":"^3.2.47","vue-chartjs":"^5.2.0","vue-lazyload":"^3.0.0-rc.2","vue-router":"^4.1.6","xml2js":"^0.6.0"},"devDependencies":{"@capacitor/cli":"^5.0.1","@types/jest":"^29.5.1","@typescript-eslint/eslint-plugin":"^5.6.0","@typescript-eslint/parser":"^5.6.0","@vue/cli-plugin-babel":"~5.0.0-rc.1","@vue/cli-plugin-e2e-cypress":"~5.0.0-rc.1","@vue/cli-plugin-eslint":"~5.0.0-rc.1","@vue/cli-plugin-router":"~5.0.0-rc.1","@vue/cli-plugin-typescript":"^5.0.8","@vue/cli-service":"5.0.8","@vue/eslint-config-typescript":"^11.0.3","@vue/test-utils":"^2.0.0-rc.16","@vue/vue3-jest":"^29.2.4","babel-jest":"^29.5.0","cypress":"^12.13.0","eslint":"^8.4.1","eslint-plugin-vue":"^9.14.1","jest":"^29.5.0","ts-jest":"^29.1.0","typescript":"^5.0.4"}}')},1582:e=>{"use strict";e.exports=JSON.parse('{"V":{"features":[{"icon":"wifi_tethering","name":"Ajout de Skolengo","description":"Ajout de l\'API de Skolengo pour les établissements scolaires. Cette fonctionnalité est en ALPHA et comporte des bugs. Si vous rencontrez des problèmes, merci de nous contacter sur Discord ou GitHub. Les bugs peuvent aussi toucher les autres fonctionnalités de l\'application dont Pronote."},{"name":"Correction de bugs et améliorations","description":"De multiples corrections de bugs et améliorations ont été apportées à l\'application. L\'interface a été légèrement modifiée pour être plus claire et plus agréable à utiliser.","icon":"brush"},{"name":"Changement du système de navigation","description":"Le système de navigation a été changé pour être plus fluide et plus rapide. Des soucis peuvent encore apparaître, merci de nous contacter sur Discord ou GitHub.","icon":"navigation"}]}}')}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.m=e,(()=>{var e=[];n.O=(t,a,o,r)=>{if(!a){var s=1/0;for(u=0;u<e.length;u++){for(var[a,o,r]=e[u],i=!0,c=0;c<a.length;c++)(!1&r||s>=r)&&Object.keys(n.O).every((e=>n.O[e](a[c])))?a.splice(c--,1):(i=!1,r<s&&(s=r));if(i){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[a,o,r]}})(),(()=>{n.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return n.d(t,{a:t}),t}})(),(()=>{n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,a)=>(n.f[a](e,t),t)),[]))})(),(()=>{n.u=e=>"js/"+e+"-legacy."+{21:"2ad49e78",30:"70932a16",56:"9a5e3bf5",65:"7ea6427d",70:"cead7eff",74:"46f0fc5a",78:"b37d5ecb",118:"3cebaeb8",121:"bf884eed",185:"defcec0d",244:"fdf82be4",334:"4dcda0d7",338:"74dc1e64",356:"4e18fa34",357:"6f4a153e",384:"5f7ef35c",392:"061f1dc6",397:"8e0a0c7b",466:"cf490124",486:"8ad4784e",576:"c5c9c394",581:"9e066195",593:"26757a1e",642:"0aad4860",664:"ad8c333c",674:"6ba29639",692:"cc0baac9",753:"a0f2a27a",775:"fbeb42c3",776:"0fdc0c01",805:"0bf6d0b5",811:"ccd6a0b2",837:"9c0f74a3",880:"e577b777",895:"70e1a431",961:"dd72e27b",977:"f83ca9ac",990:"1cffccec"}[e]+".js"})(),(()=>{n.miniCssF=e=>"css/"+e+"."+{70:"b4023341",121:"2fa54cc6",244:"49dd3b84",334:"b2faec85",356:"163cde11",384:"8c89dcb9",392:"a45f85e0",397:"8cd621a4",692:"0227fcaa",837:"2cc86e49",895:"a8d1e54a",977:"fb885333"}[e]+".css"})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="papillon:";n.l=(a,o,r,s)=>{if(e[a])e[a].push(o);else{var i,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==t+r){i=d;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+r),i.src=a),e[a]=[o];var m=(t,n)=>{i.onerror=i.onload=null,clearTimeout(g);var o=e[a];if(delete e[a],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((e=>e(n))),t)return t(n)},g=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),c&&document.head.appendChild(i)}}})(),(()=>{n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{n.p="/"})(),(()=>{if("undefined"!==typeof document){var e=(e,t,n,a,o)=>{var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var s=n=>{if(r.onerror=r.onload=null,"load"===n.type)a();else{var s=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=i,r.parentNode&&r.parentNode.removeChild(r),o(c)}};return r.onerror=r.onload=s,r.href=t,n?n.parentNode.insertBefore(r,n.nextSibling):document.head.appendChild(r),r},t=(e,t)=>{for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var o=n[a],r=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===e||r===t))return o}var s=document.getElementsByTagName("style");for(a=0;a<s.length;a++){o=s[a],r=o.getAttribute("data-href");if(r===e||r===t)return o}},a=a=>new Promise(((o,r)=>{var s=n.miniCssF(a),i=n.p+s;if(t(s,i))return o();e(a,i,null,o,r)})),o={143:0};n.f.miniCss=(e,t)=>{var n={70:1,121:1,244:1,334:1,356:1,384:1,392:1,397:1,692:1,837:1,895:1,977:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=a(e).then((()=>{o[e]=0}),(t=>{throw delete o[e],t})))}}})(),(()=>{var e={143:0};n.f.j=(t,a)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)a.push(o[2]);else{var r=new Promise(((n,a)=>o=e[t]=[n,a]));a.push(o[2]=r);var s=n.p+n.u(t),i=new Error,c=a=>{if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var r=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",i.name="ChunkLoadError",i.type=r,i.request=s,o[1](i)}};n.l(s,c,"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,a)=>{var o,r,[s,i,c]=a,l=0;if(s.some((t=>0!==e[t]))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(c)var u=c(n)}for(t&&t(a);l<s.length;l++)r=s[l],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},a=self["webpackChunkpapillon"]=self["webpackChunkpapillon"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=n.O(void 0,[998],(()=>n(433)));a=n.O(a)})();
//# sourceMappingURL=app-legacy.6cd21904.js.map