"use strict";(self["webpackChunkpapillon"]=self["webpackChunkpapillon"]||[]).push([[392],{392:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});n(1817);var a=n(6252),l=n(3577);const r=e=>((0,a.dD)("data-v-27228f26"),e=e(),(0,a.Cn)(),e),u={key:0},i=r((()=>(0,a._)("p",null,"Note",-1))),s={key:0},o={key:1},d=r((()=>(0,a._)("p",null,"Coef.",-1))),f=r((()=>(0,a._)("p",null,"Note -",-1))),c=r((()=>(0,a._)("p",null,"Classe",-1))),g=r((()=>(0,a._)("p",null,"Note +",-1))),w=r((()=>(0,a._)("h2",null,[(0,a._)("small",null,"Les moyennes ne sont pas disponibles pour cette note")],-1))),_=r((()=>(0,a._)("p",null,"Matière",-1))),p=r((()=>(0,a._)("p",null,"Évaluation",-1))),m=r((()=>(0,a._)("p",null,"Rendu le",-1))),k=r((()=>(0,a._)("p",null,"Influence sur la moyenne",-1))),h=r((()=>(0,a._)("p",null,"Influence sur la matière",-1))),v={key:0},G=r((()=>(0,a._)("p",null,"Influence sur la classe",-1))),W={key:0};function I(e,t,n,r,I,b){const A=(0,a.up)("IonBackButton"),y=(0,a.up)("ion-buttons"),j=(0,a.up)("ion-title"),z=(0,a.up)("ion-skeleton-text"),C=(0,a.up)("IonToolbar"),N=(0,a.up)("IonHeader"),F=(0,a.up)("IonLabel"),S=(0,a.up)("ion-chip"),U=(0,a.up)("IonItem"),x=(0,a.up)("IonList"),q=(0,a.up)("ion-content");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(N,{class:"AppHeader",translucent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(C,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{slot:"start"},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{class:"only-ios",text:e.backTitle,onClick:e.pop},null,8,["text","onClick"]),(0,a.Wm)(A,{class:"only-md",onClick:e.pop},null,8,["onClick"])])),_:1}),e.currentGrade?((0,a.wg)(),(0,a.j4)(j,{key:0},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.currentGrade.info.description),1)])),_:1})):((0,a.wg)(),(0,a.j4)(j,{key:1},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{style:{width:"200px"}})])),_:1}))])),_:1})])),_:1}),(0,a.Wm)(q,{fullscreen:!0},{default:(0,a.w5)((()=>[e.currentGrade?((0,a.wg)(),(0,a.iD)("div",u,[(0,a.Wm)(x,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{class:"avgs"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[i,e.currentGrade.info.significant?((0,a.wg)(),(0,a.iD)("h1",s,[(0,a.Uk)((0,l.zw)(e.currentGrade.grade.value),1),(0,a._)("small",null,"/"+(0,l.zw)(e.currentGrade.grade.out_of),1)])):((0,a.wg)(),(0,a.iD)("h1",o,[(0,a.Uk)((0,l.zw)(e.currentGrade.info.significantReason),1),(0,a._)("small",null,"/"+(0,l.zw)(e.currentGrade.grade.out_of),1)]))])),_:1}),(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[d,(0,a._)("h2",null,(0,l.zw)(e.currentGrade.grade.coefficient),1)])),_:1}),e.currentGrade.info.optional||e.currentGrade.info.bonus?((0,a.wg)(),(0,a.j4)(F,{key:0},{default:(0,a.w5)((()=>[e.currentGrade.info.bonus?((0,a.wg)(),(0,a.j4)(S,{key:0,color:"success"},{default:(0,a.w5)((()=>[(0,a.Uk)("Bonus")])),_:1})):(0,a.kq)("",!0),e.currentGrade.info.optional?((0,a.wg)(),(0,a.j4)(S,{key:1,color:"warning"},{default:(0,a.w5)((()=>[(0,a.Uk)("Optionnel")])),_:1})):(0,a.kq)("",!0)])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a.Wm)(x,{inset:""},{default:(0,a.w5)((()=>[isNaN(e.currentGrade.grade.min)?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(U,{key:0,class:"avgs"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[f,(0,a._)("h2",null,[(0,a.Uk)((0,l.zw)(parseFloat(e.currentGrade.grade.min).toFixed(2)),1),(0,a._)("small",null,"/"+(0,l.zw)(e.currentGrade.grade.out_of),1)])])),_:1}),(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[c,(0,a._)("h2",null,[(0,a.Uk)((0,l.zw)(parseFloat(e.currentGrade.grade.average).toFixed(2)),1),(0,a._)("small",null,"/"+(0,l.zw)(e.currentGrade.grade.out_of),1)])])),_:1}),(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[g,(0,a._)("h2",null,[(0,a.Uk)((0,l.zw)(parseFloat(e.currentGrade.grade.max).toFixed(2)),1),(0,a._)("small",null,"/"+(0,l.zw)(e.currentGrade.grade.out_of),1)])])),_:1})])),_:1})),isNaN(e.currentGrade.grade.min)?((0,a.wg)(),(0,a.j4)(U,{key:1,class:"avgs"},{default:(0,a.w5)((()=>[w])),_:1})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(x,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[_])),_:1}),(0,a.Wm)(F,{slot:"end"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.currentGrade.info.subject),1)])),_:1})])),_:1}),(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[p])),_:1}),(0,a.Wm)(F,{slot:"end"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.currentGrade.info.description),1)])),_:1})])),_:1}),(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[m])),_:1}),(0,a.Wm)(F,{slot:"end"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(new Date(e.currentGrade.info.date).toLocaleString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(x,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[k])),_:1}),e.diffAvg>0&&!isNaN(e.currentGrade.grade.min)?((0,a.wg)(),(0,a.j4)(F,{key:0,class:"posMoyAdd",slot:"end"},{default:(0,a.w5)((()=>[(0,a._)("h2",null,"+"+(0,l.zw)(e.diffAvg.toFixed(2))+" pts",1)])),_:1})):((0,a.wg)(),(0,a.j4)(F,{key:1,class:"negMoyAdd",slot:"end"},{default:(0,a.w5)((()=>[(0,a._)("h2",null,(0,l.zw)(isNaN(e.currentGrade.grade.min)?"Moyenne indisponible":e.diffAvg.toFixed(2)+" pts"),1)])),_:1}))])),_:1}),isNaN(e.diffSubjectAvg)?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(U,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[h])),_:1}),(0,a.Wm)(F,{slot:"end"},{default:(0,a.w5)((()=>[e.diffSubjectAvg>0?((0,a.wg)(),(0,a.iD)("span",v,"+")):(0,a.kq)("",!0),(0,a.Uk)((0,l.zw)(isNaN(e.currentGrade.grade.min)?"Moyenne indisponible":e.diffSubjectAvg.toFixed(2)+" pts"),1)])),_:1})])),_:1}))])),_:1}),(0,a.Wm)(x,{inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[G])),_:1}),(0,a.Wm)(F,{slot:"end"},{default:(0,a.w5)((()=>[e.diffClassAvg>0?((0,a.wg)(),(0,a.iD)("span",W,"+")):(0,a.kq)("",!0),(0,a.Uk)((0,l.zw)(isNaN(e.currentGrade.grade.min)?"Moyenne indisponible":e.diffClassAvg.toFixed(2)+" pts"),1)])),_:1})])),_:1})])),_:1})])):(0,a.kq)("",!0)])),_:1})],64)}n(7658);var b=n(5274),A=n(6684);const y=(0,a.aZ)({name:"FolderPage",components:{IonHeader:b.Gu,IonToolbar:b.sr,IonButtons:b.Sm,IonBackButton:b.oU,IonTitle:b.wd,IonContent:b.W2,IonSkeletonText:b.CK,IonList:b.q_,IonItem:b.Ie,IonLabel:b.Q$,IonChip:b.hM},props:{markID:{type:String,required:!0}},data(){let e="Retour";const t=this.$router.currentRoute.value;return"Grades"==t.name&&(e="Notes"),{backTitle:e,grades:[],currentGrade:null,diffAvg:0,diffClassAvg:0,diffSubjectAvg:0}},methods:{findGrade(e){(0,A.Z)().then((t=>{t.marks.forEach((e=>{e.marks.forEach((e=>{this.grades.push(e)}))})),this.grades.forEach((t=>{t.id===e&&(this.currentGrade=t,this.getAverageInfluence(),this.getAverageClassInfluence(),this.getAverageSubjectInfluence())}))}))},getAverage(e,t){const n={};for(let r=0;r<e.length;r++){if(!1===e[r].info.significant&&!1===e[r].info.significantZero)continue;let a=parseFloat(e[r].grade.value);t&&(a=parseFloat(e[r].grade.average));const l=parseInt(e[r].grade.out_of),u=a/l*20;n[e[r].info.subject]||(n[e[r].info.subject]={},n[e[r].info.subject].grades=0,n[e[r].info.subject].count=0),n[e[r].info.subject].grades+=u*e[r].grade.coefficient,n[e[r].info.subject].count+=e[r].grade.coefficient}for(const r in n)n[r].average=n[r].grades/n[r].count;let a=0,l=0;for(const r in n)a+=n[r].average,l++;return a/l},getSimpleAverage(e){const t={grades:0,count:0};for(let n=0;n<e.length;n++){if(!1===e[n].info.significant&&!1===e[n].info.significantZero)continue;const a=parseFloat(e[n].grade.value),l=parseInt(e[n].grade.out_of),r=a/l*20;t.grades+=r*e[n].grade.coefficient,t.count+=e[n].grade.coefficient}return t.grades/t.count},getAverageInfluence(){const e=this.getAverage(this.grades,!1),t=this.grades.filter((e=>e.id!==this.currentGrade.id)),n=this.getAverage(t,!1),a=e-n;this.diffAvg=a},getAverageClassInfluence(){const e=this.getAverage(this.grades,!0),t=this.grades.filter((e=>e.id!==this.currentGrade.id)),n=this.getAverage(t,!0),a=e-n;this.diffClassAvg=a},getAverageSubjectInfluence(){const e=this.grades.filter((e=>e.info.subject===this.currentGrade.info.subject)),t=this.getSimpleAverage(e,!1),n=e.filter((e=>e.id!==this.currentGrade.id)),a=this.getSimpleAverage(n,!1),l=t-a;this.diffSubjectAvg=l}},mounted(){return this.findGrade(this.markID),!1}});var j=n(3744);const z=(0,j.Z)(y,[["render",I],["__scopeId","data-v-27228f26"]]),C=z}}]);
//# sourceMappingURL=392.061f1dc6.js.map