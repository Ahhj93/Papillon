"use strict";(self["webpackChunkpapillon"]=self["webpackChunkpapillon"]||[]).push([[977,334],{4334:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var l=n(6252),s=n(3577);const o=e=>((0,l.dD)("data-v-532a17eb"),e=e(),(0,l.Cn)(),e),a={key:0},u={class:"mainTitle"},r={class:"avatar",slot:"start"},i={class:"avatar",slot:"start"},d=o((()=>(0,l._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"contact_support",-1))),p=o((()=>(0,l._)("h2",null,"Cette news contient un sondage",-1))),w=o((()=>(0,l._)("p",null,"Papillon ne permet pas de répondre aux sondages.",-1))),c=["innerHTML"],m={key:1},h=o((()=>(0,l._)("p",null,"Documents attachés",-1))),f={key:0,class:"material-symbols-outlined mdls",slot:"start"},_={key:1,class:"material-symbols-outlined mdls",slot:"start"};function g(e,t,n,o,g,k){const I=(0,l.up)("IonBackButton"),N=(0,l.up)("ion-buttons"),y=(0,l.up)("ion-title"),W=(0,l.up)("ion-skeleton-text"),b=(0,l.up)("IonToolbar"),v=(0,l.up)("IonHeader"),L=(0,l.up)("ion-toolbar"),C=(0,l.up)("IonLabel"),z=(0,l.up)("IonItem"),S=(0,l.up)("ion-header"),T=(0,l.up)("IonList"),D=(0,l.up)("ion-content");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(v,{class:"AppHeader",translucent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(b,null,{default:(0,l.w5)((()=>[(0,l.Wm)(N,{slot:"start"},{default:(0,l.w5)((()=>[(0,l.Wm)(I,{class:"only-ios",text:e.backTitle,onClick:e.pop},null,8,["text","onClick"]),(0,l.Wm)(I,{class:"only-md",onClick:e.pop},null,8,["onClick"])])),_:1}),e.openedNews?((0,l.wg)(),(0,l.j4)(y,{key:0},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.openedNews.title),1)])),_:1})):((0,l.wg)(),(0,l.j4)(y,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{style:{width:"200px"}})])),_:1}))])),_:1})])),_:1}),(0,l.Wm)(D,{fullscreen:!0},{default:(0,l.w5)((()=>[e.openedNews?((0,l.wg)(),(0,l.iD)("div",a,[(0,l.Wm)(S,{collapse:"condense"},{default:(0,l.w5)((()=>[(0,l.Wm)(L,null,{default:(0,l.w5)((()=>[(0,l._)("h1",u,(0,s.zw)(e.openedNews.title),1)])),_:1}),(0,l.Wm)(L,null,{default:(0,l.w5)((()=>[(0,l.Wm)(z,null,{default:(0,l.w5)((()=>[(0,l._)("div",r,(0,s.zw)(e.shortName),1),(0,l.Wm)(C,null,{default:(0,l.w5)((()=>[(0,l._)("h2",null,(0,s.zw)(e.openedNews.author),1),(0,l._)("p",null,(0,s.zw)(e.openedNews.dateString),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(T,{class:"only-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(z,null,{default:(0,l.w5)((()=>[(0,l._)("div",i,(0,s.zw)(e.shortName),1),(0,l.Wm)(C,null,{default:(0,l.w5)((()=>[(0,l._)("h2",null,(0,s.zw)(e.openedNews.author),1),(0,l._)("p",null,(0,s.zw)(e.openedNews.dateString),1)])),_:1})])),_:1})])),_:1}),e.openedNews.isSurvey?((0,l.wg)(),(0,l.j4)(T,{key:0,inset:""},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{color:"danger"},{default:(0,l.w5)((()=>[d,(0,l.Wm)(C,{class:"ion-text-wrap"},{default:(0,l.w5)((()=>[p,w])),_:1})])),_:1})])),_:1})):(0,l.kq)("",!0),(0,l._)("div",{class:"content",innerHTML:e.openedNews.htmlContent},null,8,c),e.openedNews.attachments?((0,l.wg)(),(0,l.iD)("div",m,[0!==e.openedNews.attachments.length?((0,l.wg)(),(0,l.j4)(C,{key:0,class:"listGroupTitle"},{default:(0,l.w5)((()=>[h])),_:1})):(0,l.kq)("",!0),0!==e.openedNews.attachments.length?((0,l.wg)(),(0,l.j4)(T,{key:1,class:"listGroup"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.openedNews.attachments,(t=>((0,l.wg)(),(0,l.j4)(z,{key:t.id,onClick:n=>e.openLink(t.url)},{default:(0,l.w5)((()=>[1==t.type?((0,l.wg)(),(0,l.iD)("span",f,"description")):0==t.type?((0,l.wg)(),(0,l.iD)("span",_,"link")):(0,l.kq)("",!0),(0,l.Wm)(C,null,{default:(0,l.w5)((()=>[(0,l._)("h2",null,(0,s.zw)(t.name),1),(0,l._)("p",null,(0,s.zw)(t.url),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])),_:1})],64)}n(4916);var k=n(5274),I=n(7806);const N=(0,l.aZ)({name:"FolderPage",components:{IonHeader:k.Gu,IonToolbar:k.sr,IonButtons:k.Sm,IonBackButton:k.oU,IonTitle:k.wd,IonContent:k.W2,IonSkeletonText:k.CK,IonList:k.q_,IonItem:k.Ie,IonLabel:k.Q$},props:{urlNews:{type:String,required:!0}},data(){let e="Retour";const t=this.$router.currentRoute.value;return"News"==t.name&&(e="Actualités"),{backTitle:e,openedNews:[],shortName:""}},methods:{async openLink(e){await I.A.open({url:e,presentationStyle:"popover"})},getLettersFromName(e){"M"==e[0]&&(e=e.split(" ").slice(1).join(" "));const t=e.match(/\b(\w)/g).join("");return t.length>2?t.slice(0,2):t}},mounted(){if(this.urlNews){const e=this.urlNews,t=decodeURIComponent(e),n=JSON.parse(t);this.openedNews=n,this.shortName=this.getLettersFromName(this.openedNews.author)}return!1}});var y=n(3744);const W=(0,y.Z)(N,[["render",g],["__scopeId","data-v-532a17eb"]]),b=W},1977:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});n(8862),n(6699);var l=n(6252),s=n(9963),o=n(3577);const a=e=>((0,l.dD)("data-v-5e1e06a8"),e=e(),(0,l.Cn)(),e),u={key:0,class:"NoCours"},r=a((()=>(0,l._)("br",null,null,-1))),i=a((()=>(0,l._)("h2",null,"Téléchargement des actualités...",-1))),d=a((()=>(0,l._)("p",null,"Veuillez patienter pendant qu'on récupère les actualités depuis nos serveurs...",-1))),p={key:1,class:"NoCours"},w=a((()=>(0,l._)("span",{class:"material-symbols-outlined mdls"},"feed",-1))),c=a((()=>(0,l._)("h2",null,"Aucune actualité n'a été trouvée.",-1))),m=a((()=>(0,l._)("p",null,"Revenez plus tard ou essayer de rafraîchir.",-1))),h=[w,c,m],f={key:0,slot:"start",class:"material-symbols-outlined mdls emoji"},_={key:1,class:"material-symbols-outlined mdls",slot:"start"},g={key:2,class:"material-symbols-outlined mdls",slot:"start"};function k(e,t,n,a,w,c){const m=(0,l.up)("ion-menu-button"),k=(0,l.up)("ion-buttons"),I=(0,l.up)("ion-title"),N=(0,l.up)("IonToolbar"),y=(0,l.up)("IonHeader"),W=(0,l.up)("ion-toolbar"),b=(0,l.up)("ion-searchbar"),v=(0,l.up)("ion-header"),L=(0,l.up)("ion-refresher-content"),C=(0,l.up)("ion-refresher"),z=(0,l.up)("IonSpinner"),S=(0,l.up)("IonLabel"),T=(0,l.up)("IonItem"),D=(0,l.up)("IonNavLink"),j=(0,l.up)("IonList"),q=(0,l.up)("ion-content"),R=(0,l.up)("ion-page");return(0,l.wg)(),(0,l.j4)(R,{ref:"page"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{class:"AppHeader",translucent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,{slot:"start"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{color:"dark"})])),_:1}),(0,l.Wm)(I,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Actualités")])),_:1})])),_:1})])),_:1}),(0,l.Wm)(q,{fullscreen:!0},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{collapse:"condense"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(I,{size:"large"},{default:(0,l.w5)((()=>[(0,l.Uk)("Actualités")])),_:1})])),_:1}),(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{ref:"searchBar",placeholder:"Rechercher une actualité, une personne...",onIonInput:t[0]||(t[0]=t=>e.searchNews())},null,512)])),_:1})])),_:1}),(0,l.Wm)(C,{slot:"fixed",onIonRefresh:t[1]||(t[1]=t=>e.handleRefresh(t))},{default:(0,l.w5)((()=>[(0,l.Wm)(L)])),_:1}),(0,l.Wm)(s.uT,{name:"NoCoursAnim"},{default:(0,l.w5)((()=>[0==e.news.length&&e.isLoading?((0,l.wg)(),(0,l.iD)("div",u,[(0,l.Wm)(z),r,i,d])):0!=e.news.length||e.isLoading?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",p,h))])),_:1}),0!==e.news.length?((0,l.wg)(),(0,l.j4)(j,{key:0},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.news,((t,n)=>((0,l.wg)(),(0,l.j4)(D,{key:n,"router-direction":"forward",component:e.InfoView,componentProps:{urlNews:encodeURIComponent(JSON.stringify(t))}},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{button:""},{default:(0,l.w5)((()=>[t.title.toLowerCase().includes("menu")?((0,l.wg)(),(0,l.iD)("span",f,"restaurant")):t.isSurvey?t.isSurvey?((0,l.wg)(),(0,l.iD)("span",g,"contact_support")):(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("span",_,"feed")),(0,l.Wm)(S,null,{default:(0,l.w5)((()=>[(0,l._)("h2",null,(0,o.zw)(t.title),1),(0,l._)("p",null,(0,o.zw)(t.author)+" - "+(0,o.zw)(t.category),1),(0,l._)("small",null,(0,o.zw)(t.dateString),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["component","componentProps"])))),128))])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1},512)}var I=n(5274),N=n(7806),y=n(8170),W=n(4334);const b=(0,l.aZ)({name:"FolderPage",components:{IonHeader:I.Gu,IonContent:I.W2,IonToolbar:I.sr,IonTitle:I.wd,IonMenuButton:I.fG,IonPage:I._i,IonButtons:I.Sm,IonItem:I.Ie,IonLabel:I.Q$,IonList:I.q_,IonSpinner:I.PQ,IonSearchbar:I.VI,IonNavLink:I.Qx},props(){return{urlNews:{type:Object,default:[]}}},data(){return{InfoView:W["default"],news:[],fullNews:[],presentingElement:null,isLoading:!1}},methods:{async openLink(e){await N.A.open({url:e,toolbarColor:"#1e1e1e",presentationStyle:"popover"})},getNewsRefresh(){this.isLoading=!0,(0,y.Z)(!0).then((e=>{this.isLoading=!1,this.news=e}))},searchNews(){const e=this.$refs.searchBar.$el.value,t=this.$refs.searchBar.$el.value,n=this.fullNews;if(""==e&&""==t)this.news=n;else{const l=""==e?t:e,s=n.filter((e=>e.title.toLowerCase().includes(l.toLowerCase())||e.content.toLowerCase().includes(l.toLowerCase())||e.author.toLowerCase().includes(l.toLowerCase())));this.news=s}},handleRefresh(e){this.getNewsRefresh(),this.$watch("news",(()=>{setTimeout((()=>{e.target.complete()}),200)}))}},mounted(){this.presentingElement=this.$refs.page.$el,this.isLoading=!0,(0,y.Z)().then((e=>{this.news=e,this.fullNews=e,this.isLoading=!1})),document.addEventListener("tokenUpdated",(()=>{this.getNewsRefresh()}))}});var v=n(3744);const L=(0,v.Z)(b,[["render",k],["__scopeId","data-v-5e1e06a8"]]),C=L}}]);
//# sourceMappingURL=977-legacy.f83ca9ac.js.map