"use strict";(self["webpackChunkpapillon"]=self["webpackChunkpapillon"]||[]).push([[142,121,392,334],{2068:(e,t,n)=>{n.d(t,{V:()=>a});var o=n(9895);const a=(0,o.fo)("Dialog",{web:()=>n.e(674).then(n.bind(n,5674)).then((e=>new e.DialogWeb))})},2605:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(9895);const a=(0,o.fo)("Network",{web:()=>n.e(466).then(n.bind(n,2466)).then((e=>new e.NetworkWeb))})},5287:(e,t,n)=>{n.d(t,{Uw:()=>p,fo:()=>m});
/*! Capacitor: https://capacitorjs.com/ - MIT License */
const o=e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},o=(e,t)=>{n.platforms.set(e,t)},a=e=>{n.platforms.has(e)&&(n.currentPlatform=n.platforms.get(e))};return n.addPlatform=o,n.setPlatform=a,n},a=e=>e.CapacitorPlatforms=o(e),s=a("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});s.addPlatform,s.setPlatform;var i;(function(e){e["Unimplemented"]="UNIMPLEMENTED",e["Unavailable"]="UNAVAILABLE"})(i||(i={}));class l extends Error{constructor(e,t){super(e),this.message=e,this.code=t}}const r=e=>{var t,n;return(null===e||void 0===e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null===e||void 0===e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"},u=e=>{var t,n,o,a,s;const u=e.CapacitorCustomPlatform||null,d=e.Capacitor||{},c=d.Plugins=d.Plugins||{},m=e.CapacitorPlatforms,p=()=>null!==u?u.name:r(e),h=(null===(t=null===m||void 0===m?void 0:m.currentPlatform)||void 0===t?void 0:t.getPlatform)||p,f=()=>"web"!==h(),w=(null===(n=null===m||void 0===m?void 0:m.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||f,g=e=>{const t=C.get(e);return!!(null===t||void 0===t?void 0:t.platforms.has(h()))||!!k(e)},v=(null===(o=null===m||void 0===m?void 0:m.currentPlatform)||void 0===o?void 0:o.isPluginAvailable)||g,_=e=>{var t;return null===(t=d.PluginHeaders)||void 0===t?void 0:t.find((t=>t.name===e))},k=(null===(a=null===m||void 0===m?void 0:m.currentPlatform)||void 0===a?void 0:a.getPluginHeader)||_,y=t=>e.console.error(t),b=(e,t,n)=>Promise.reject(`${n} does not have an implementation of "${t}".`),C=new Map,I=(e,t={})=>{const n=C.get(e);if(n)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),n.proxy;const o=h(),a=k(e);let s;const r=async()=>(!s&&o in t?s=s="function"===typeof t[o]?await t[o]():t[o]:null!==u&&!s&&"web"in t&&(s=s="function"===typeof t["web"]?await t["web"]():t["web"]),s),m=(t,n)=>{var s,r;if(!a){if(t)return null===(r=t[n])||void 0===r?void 0:r.bind(t);throw new l(`"${e}" plugin is not implemented on ${o}`,i.Unimplemented)}{const o=null===a||void 0===a?void 0:a.methods.find((e=>n===e.name));if(o)return"promise"===o.rtype?t=>d.nativePromise(e,n.toString(),t):(t,o)=>d.nativeCallback(e,n.toString(),t,o);if(t)return null===(s=t[n])||void 0===s?void 0:s.bind(t)}},p=t=>{let n;const a=(...a)=>{const s=r().then((s=>{const r=m(s,t);if(r){const e=r(...a);return n=null===e||void 0===e?void 0:e.remove,e}throw new l(`"${e}.${t}()" is not implemented on ${o}`,i.Unimplemented)}));return"addListener"===t&&(s.remove=async()=>n()),s};return a.toString=()=>`${t.toString()}() { [capacitor code] }`,Object.defineProperty(a,"name",{value:t,writable:!1,configurable:!1}),a},f=p("addListener"),w=p("removeListener"),g=(e,t)=>{const n=f({eventName:e},t),o=async()=>{const o=await n;w({eventName:e,callbackId:o},t)},a=new Promise((e=>n.then((()=>e({remove:o})))));return a.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await o()},a},v=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return a?g:f;case"removeListener":return w;default:return p(t)}}});return c[e]=v,C.set(e,{name:e,proxy:v,platforms:new Set([...Object.keys(t),...a?[o]:[]])}),v},W=(null===(s=null===m||void 0===m?void 0:m.currentPlatform)||void 0===s?void 0:s.registerPlugin)||I;return d.convertFileSrc||(d.convertFileSrc=e=>e),d.getPlatform=h,d.handleError=y,d.isNativePlatform=w,d.isPluginAvailable=v,d.pluginMethodNoop=b,d.registerPlugin=W,d.Exception=l,d.DEBUG=!!d.DEBUG,d.isLoggingEnabled=!!d.isLoggingEnabled,d.platform=d.getPlatform(),d.isNative=d.isNativePlatform(),d},d=e=>e.Capacitor=u(e),c=d("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}),m=c.registerPlugin;c.Plugins;class p{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){const n=this.listeners[e];n||(this.listeners[e]=[]),this.listeners[e].push(t);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o);const a=async()=>this.removeListener(e,t),s=Promise.resolve({remove:a});return Object.defineProperty(s,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await a()}}),s}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const n=this.listeners[e];n&&n.forEach((e=>e(t)))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new c.Exception(e,i.Unimplemented)}unavailable(e="not available"){return new c.Exception(e,i.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const o=n.indexOf(t);this.listeners[e].splice(o,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}},6520:(e,t,n)=>{function o(e){for(let t=0;t<e.length;t++){const n=e[t],o=new Date(n.time.start),a=new Date(n.time.end);for(let s=0;s<e.length;s++){const i=e[s],l=new Date(i.time.start),r=new Date(i.time.end);o<=l&&a>=r&&n.course.num!=i.course.num&&(n.course.num>i.course.num?e[s].course.sameTime=!0:e[t].course.sameTime=!0)}}return e}function a(e){const t=new Date;for(let n=0;n<e.length;n++){const o=e[n],a=new Date(o.time.start),s=new Date(o.time.end);a<=t&&s>=t&&0==o.course.sameTime?e[n].course.actual=!0:e[n].course.actual=!1}return e}function s(e){for(let t=0;t<e.length;t++){const n=e[t],o=new Date(n.time.start);if(t>0){const n=e[t-1],a=new Date(n.time.end);o-a>=9e5&&(e[t].course.distance=!0)}}return e}function i(e){for(let t=0;t<e.length;t++){const n=e[t],o=new Date(n.time.start),a=new Date(n.time.end);let s=a-o;s=s/1e3/60/60,e[t].course.lengthCours=s}return e}function l(e){return e=o(e),e=i(e),e=s(e),e=a(e),e}n.d(t,{Z:()=>r});const r=l},392:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});n(1817);var o=n(6252),a=n(3577);const s=e=>((0,o.dD)("data-v-27228f26"),e=e(),(0,o.Cn)(),e),i={key:0},l=s((()=>(0,o._)("p",null,"Note",-1))),r={key:0},u={key:1},d=s((()=>(0,o._)("p",null,"Coef.",-1))),c=s((()=>(0,o._)("p",null,"Note -",-1))),m=s((()=>(0,o._)("p",null,"Classe",-1))),p=s((()=>(0,o._)("p",null,"Note +",-1))),h=s((()=>(0,o._)("h2",null,[(0,o._)("small",null,"Les moyennes ne sont pas disponibles pour cette note")],-1))),f=s((()=>(0,o._)("p",null,"Matière",-1))),w=s((()=>(0,o._)("p",null,"Évaluation",-1))),g=s((()=>(0,o._)("p",null,"Rendu le",-1))),v=s((()=>(0,o._)("p",null,"Influence sur la moyenne",-1))),_=s((()=>(0,o._)("p",null,"Influence sur la matière",-1))),k={key:0},y=s((()=>(0,o._)("p",null,"Influence sur la classe",-1))),b={key:0};function C(e,t,n,s,C,I){const W=(0,o.up)("IonBackButton"),S=(0,o.up)("ion-buttons"),D=(0,o.up)("ion-title"),N=(0,o.up)("ion-skeleton-text"),j=(0,o.up)("IonToolbar"),x=(0,o.up)("IonHeader"),L=(0,o.up)("IonLabel"),P=(0,o.up)("ion-chip"),T=(0,o.up)("IonItem"),A=(0,o.up)("IonList"),U=(0,o.up)("ion-content");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(x,{class:"AppHeader",translucent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[(0,o.Wm)(S,{slot:"start"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{class:"only-ios",text:e.backTitle,onClick:e.pop},null,8,["text","onClick"]),(0,o.Wm)(W,{class:"only-md",onClick:e.pop},null,8,["onClick"])])),_:1}),e.currentGrade?((0,o.wg)(),(0,o.j4)(D,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.currentGrade.info.description),1)])),_:1})):((0,o.wg)(),(0,o.j4)(D,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{style:{width:"200px"}})])),_:1}))])),_:1})])),_:1}),(0,o.Wm)(U,{fullscreen:!0},{default:(0,o.w5)((()=>[e.currentGrade?((0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(A,{inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{class:"avgs"},{default:(0,o.w5)((()=>[(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[l,e.currentGrade.info.significant?((0,o.wg)(),(0,o.iD)("h1",r,[(0,o.Uk)((0,a.zw)(e.currentGrade.grade.value),1),(0,o._)("small",null,"/"+(0,a.zw)(e.currentGrade.grade.out_of),1)])):((0,o.wg)(),(0,o.iD)("h1",u,[(0,o.Uk)((0,a.zw)(e.currentGrade.info.significantReason),1),(0,o._)("small",null,"/"+(0,a.zw)(e.currentGrade.grade.out_of),1)]))])),_:1}),(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[d,(0,o._)("h2",null,(0,a.zw)(e.currentGrade.grade.coefficient),1)])),_:1}),e.currentGrade.info.optional||e.currentGrade.info.bonus?((0,o.wg)(),(0,o.j4)(L,{key:0},{default:(0,o.w5)((()=>[e.currentGrade.info.bonus?((0,o.wg)(),(0,o.j4)(P,{key:0,color:"success"},{default:(0,o.w5)((()=>[(0,o.Uk)("Bonus")])),_:1})):(0,o.kq)("",!0),e.currentGrade.info.optional?((0,o.wg)(),(0,o.j4)(P,{key:1,color:"warning"},{default:(0,o.w5)((()=>[(0,o.Uk)("Optionnel")])),_:1})):(0,o.kq)("",!0)])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)(A,{inset:""},{default:(0,o.w5)((()=>[isNaN(e.currentGrade.grade.min)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(T,{key:0,class:"avgs"},{default:(0,o.w5)((()=>[(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[c,(0,o._)("h2",null,[(0,o.Uk)((0,a.zw)(parseFloat(e.currentGrade.grade.min).toFixed(2)),1),(0,o._)("small",null,"/"+(0,a.zw)(e.currentGrade.grade.out_of),1)])])),_:1}),(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[m,(0,o._)("h2",null,[(0,o.Uk)((0,a.zw)(parseFloat(e.currentGrade.grade.average).toFixed(2)),1),(0,o._)("small",null,"/"+(0,a.zw)(e.currentGrade.grade.out_of),1)])])),_:1}),(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[p,(0,o._)("h2",null,[(0,o.Uk)((0,a.zw)(parseFloat(e.currentGrade.grade.max).toFixed(2)),1),(0,o._)("small",null,"/"+(0,a.zw)(e.currentGrade.grade.out_of),1)])])),_:1})])),_:1})),isNaN(e.currentGrade.grade.min)?((0,o.wg)(),(0,o.j4)(T,{key:1,class:"avgs"},{default:(0,o.w5)((()=>[h])),_:1})):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(A,{inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(T,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[f])),_:1}),(0,o.Wm)(L,{slot:"end"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.currentGrade.info.subject),1)])),_:1})])),_:1}),(0,o.Wm)(T,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[w])),_:1}),(0,o.Wm)(L,{slot:"end"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.currentGrade.info.description),1)])),_:1})])),_:1}),(0,o.Wm)(T,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[g])),_:1}),(0,o.Wm)(L,{slot:"end"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(new Date(e.currentGrade.info.date).toLocaleString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),1)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(A,{inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(T,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[v])),_:1}),e.diffAvg>0&&!isNaN(e.currentGrade.grade.min)?((0,o.wg)(),(0,o.j4)(L,{key:0,class:"posMoyAdd",slot:"end"},{default:(0,o.w5)((()=>[(0,o._)("h2",null,"+"+(0,a.zw)(e.diffAvg.toFixed(2))+" pts",1)])),_:1})):((0,o.wg)(),(0,o.j4)(L,{key:1,class:"negMoyAdd",slot:"end"},{default:(0,o.w5)((()=>[(0,o._)("h2",null,(0,a.zw)(isNaN(e.currentGrade.grade.min)?"Moyenne indisponible":e.diffAvg.toFixed(2)+" pts"),1)])),_:1}))])),_:1}),isNaN(e.diffSubjectAvg)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(T,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[_])),_:1}),(0,o.Wm)(L,{slot:"end"},{default:(0,o.w5)((()=>[e.diffSubjectAvg>0?((0,o.wg)(),(0,o.iD)("span",k,"+")):(0,o.kq)("",!0),(0,o.Uk)((0,a.zw)(isNaN(e.currentGrade.grade.min)?"Moyenne indisponible":e.diffSubjectAvg.toFixed(2)+" pts"),1)])),_:1})])),_:1}))])),_:1}),(0,o.Wm)(A,{inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(T,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[y])),_:1}),(0,o.Wm)(L,{slot:"end"},{default:(0,o.w5)((()=>[e.diffClassAvg>0?((0,o.wg)(),(0,o.iD)("span",b,"+")):(0,o.kq)("",!0),(0,o.Uk)((0,a.zw)(isNaN(e.currentGrade.grade.min)?"Moyenne indisponible":e.diffClassAvg.toFixed(2)+" pts"),1)])),_:1})])),_:1})])),_:1})])):(0,o.kq)("",!0)])),_:1})],64)}n(7658);var I=n(5274),W=n(6684);const S=(0,o.aZ)({name:"FolderPage",components:{IonHeader:I.Gu,IonToolbar:I.sr,IonButtons:I.Sm,IonBackButton:I.oU,IonTitle:I.wd,IonContent:I.W2,IonSkeletonText:I.CK,IonList:I.q_,IonItem:I.Ie,IonLabel:I.Q$,IonChip:I.hM},props:{markID:{type:String,required:!0}},data(){let e="Retour";const t=this.$router.currentRoute.value;return"Grades"==t.name&&(e="Notes"),{backTitle:e,grades:[],currentGrade:null,diffAvg:0,diffClassAvg:0,diffSubjectAvg:0}},methods:{findGrade(e){(0,W.Z)().then((t=>{t.marks.forEach((e=>{e.marks.forEach((e=>{this.grades.push(e)}))})),this.grades.forEach((t=>{t.id===e&&(this.currentGrade=t,this.getAverageInfluence(),this.getAverageClassInfluence(),this.getAverageSubjectInfluence())}))}))},getAverage(e,t){const n={};for(let s=0;s<e.length;s++){if(!1===e[s].info.significant&&!1===e[s].info.significantZero)continue;let o=parseFloat(e[s].grade.value);t&&(o=parseFloat(e[s].grade.average));const a=parseInt(e[s].grade.out_of),i=o/a*20;n[e[s].info.subject]||(n[e[s].info.subject]={},n[e[s].info.subject].grades=0,n[e[s].info.subject].count=0),n[e[s].info.subject].grades+=i*e[s].grade.coefficient,n[e[s].info.subject].count+=e[s].grade.coefficient}for(const s in n)n[s].average=n[s].grades/n[s].count;let o=0,a=0;for(const s in n)o+=n[s].average,a++;return o/a},getSimpleAverage(e){const t={grades:0,count:0};for(let n=0;n<e.length;n++){if(!1===e[n].info.significant&&!1===e[n].info.significantZero)continue;const o=parseFloat(e[n].grade.value),a=parseInt(e[n].grade.out_of),s=o/a*20;t.grades+=s*e[n].grade.coefficient,t.count+=e[n].grade.coefficient}return t.grades/t.count},getAverageInfluence(){const e=this.getAverage(this.grades,!1),t=this.grades.filter((e=>e.id!==this.currentGrade.id)),n=this.getAverage(t,!1),o=e-n;this.diffAvg=o},getAverageClassInfluence(){const e=this.getAverage(this.grades,!0),t=this.grades.filter((e=>e.id!==this.currentGrade.id)),n=this.getAverage(t,!0),o=e-n;this.diffClassAvg=o},getAverageSubjectInfluence(){const e=this.grades.filter((e=>e.info.subject===this.currentGrade.info.subject)),t=this.getSimpleAverage(e,!1),n=e.filter((e=>e.id!==this.currentGrade.id)),o=this.getSimpleAverage(n,!1),a=t-o;this.diffSubjectAvg=a}},mounted(){return this.findGrade(this.markID),!1}});var D=n(3744);const N=(0,D.Z)(S,[["render",C],["__scopeId","data-v-27228f26"]]),j=N},7142:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_t});var o=n(6252);function a(e,t,n,a,s,i){var l=(0,o.up)("ion-nav"),r=(0,o.up)("ion-page");return(0,o.wg)(),(0,o.j4)(r,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(l,{onIonNavDidChange:i.navDidChange,onIonNavWillChange:i.navWillChange,root:s.component,ref:"page"},null,8,["onIonNavDidChange","onIonNavWillChange","root"])]})),_:1})}var s=n(5274),i=(n(8862),n(1817),n(6699),n(3577)),l=n(9963);const r=e=>((0,o.dD)("data-v-59cb67c0"),e=e(),(0,o.Cn)(),e),u={class:"profile"},d=r((()=>(0,o._)("h3",null,"Vue d'ensemble",-1))),c=["src"],m={slot:"start",class:"timeChip"},p=r((()=>(0,o._)("span",{class:"courseColor"},null,-1))),h={key:0,class:"progression"},f={class:"startProg"},w={class:"progressBar"},g={class:"endProg"},v={key:1},_={class:"CoursInfoContainer"},k={class:"CoursInfo room"},y=r((()=>(0,o._)("span",{class:"material-symbols-outlined smol",slot:"start"},"location_on",-1))),b=r((()=>(0,o._)("div",{class:"separator"},null,-1))),C={class:"CoursInfo"},I=r((()=>(0,o._)("span",{class:"material-symbols-outlined smol",slot:"start"},"face",-1))),W=r((()=>(0,o._)("span",{class:"material-symbols-outlined mdls"},"info",-1))),S=r((()=>(0,o._)("div",{slot:"start",style:{"margin-left":"5px","margin-right":"20px"}},[(0,o._)("span",{class:"material-symbols-outlined mdls"},"wifi_off")],-1))),D=r((()=>(0,o._)("h2",null,"Aucune connexion internet",-1))),N=r((()=>(0,o._)("p",null,"Les cours ne peuvent pas être chargés sans connection internet, réessayer plus tard...",-1))),j=r((()=>(0,o._)("div",{slot:"start",style:{"margin-left":"5px","margin-right":"20px"}},[(0,o._)("span",{class:"material-symbols-outlined mdls"},"crisis_alert")],-1))),x=r((()=>(0,o._)("h2",null,"Serveurs indisponibles",-1))),L=r((()=>(0,o._)("p",null,"Les cours ne peuvent pas être chargés, nos serveurs seront bientôt de nouveaux disponibles... ",-1))),P={slot:"start",class:"emoji"},T=r((()=>(0,o._)("h2",null,"Aucun cours",-1))),A={slot:"start",style:{"margin-left":"5px","margin-right":"20px"}},U={style:{display:"flex"}},E={key:0,class:"NoCours"},z=r((()=>(0,o._)("h1",null,"🌏",-1))),H=r((()=>(0,o._)("h2",null,"Pas de connexion à Internet",-1))),M=r((()=>(0,o._)("p",null,"Vous pouvez uniquement consulter les journées déjà chargées préalablement lorsque vous êtes hors-ligne.",-1))),R=[z,H,M],q={key:1,class:"NoCours"},G=r((()=>(0,o._)("h2",null,"Chargement de vos données",-1))),F=r((()=>(0,o._)("p",null,"Nous sommes en train de récupérer vos données depuis votre service scolaire.",-1))),B={key:2,class:"NoCours"},O=r((()=>(0,o._)("h1",null,"⚠️",-1))),$=r((()=>(0,o._)("h2",null,"Impossible de se connecter au serveur Papillon",-1))),Z=r((()=>(0,o._)("p",null,"Quelque chose s'est mal passé. Veuillez réessayer ultérieurement.",-1))),V=[O,$,Z],Y={id:"components",ref:"components"},J=r((()=>(0,o._)("h2",{style:{"font-size":"20px"}},"Travail à faire",-1))),K=r((()=>(0,o._)("span",{class:"material-symbols-outlined mdls",slot:"end"},"arrow_outward",-1))),Q={key:1},X={class:"homepage_divider"},ee=r((()=>(0,o._)("div",{class:"divider"},null,-1))),te={slot:"start"},ne=r((()=>(0,o._)("span",{class:"courseColor"},null,-1))),oe=r((()=>(0,o._)("div",{slot:"start",style:{"margin-left":"5px","margin-right":"20px"}},[(0,o._)("span",{class:"material-symbols-outlined mdls"},"done_all")],-1))),ae=r((()=>(0,o._)("h2",null,"Pas de devoirs",-1))),se=r((()=>(0,o._)("p",null,"Vous n'avez aucun travail à faire pour le reste de la semaine.",-1))),ie=r((()=>(0,o._)("h2",{style:{"font-size":"20px"}},"Dernières notes",-1))),le=r((()=>(0,o._)("span",{class:"material-symbols-outlined mdls",slot:"end"},"arrow_outward",-1))),re={key:0},ue=r((()=>(0,o._)("span",{class:"courseColor"},null,-1))),de={slot:"end"},ce=r((()=>(0,o._)("h2",{style:{"font-size":"20px"}},"Actualités",-1))),me=r((()=>(0,o._)("span",{class:"material-symbols-outlined mdls",slot:"end"},"arrow_outward",-1))),pe={key:0,slot:"start",class:"material-symbols-outlined mdls emoji"},he={key:1,slot:"start",class:"material-symbols-outlined mdls emoji"},fe=r((()=>(0,o._)("div",{slot:"start",style:{"margin-left":"5px","margin-right":"20px"}},[(0,o._)("span",{class:"material-symbols-outlined mdls"},"newspaper")],-1))),we=r((()=>(0,o._)("h2",null,"Aucune nouvelle actualité",-1))),ge=r((()=>(0,o._)("p",null,"Votre établissement n'a pas encore publié d'actualités.",-1)));function ve(e,t,n,a,s,r){const z=(0,o.up)("ion-menu-button"),H=(0,o.up)("ion-buttons"),M=(0,o.up)("ion-title"),O=(0,o.up)("ion-avatar"),$=(0,o.up)("ion-nav-link"),Z=(0,o.up)("IonToolbar"),ve=(0,o.up)("IonHeader"),_e=(0,o.up)("ion-toolbar"),ke=(0,o.up)("IonChip"),ye=(0,o.up)("ion-label"),be=(0,o.up)("ion-item"),Ce=(0,o.up)("IonSpinner"),Ie=(0,o.up)("ion-skeleton-text"),We=(0,o.up)("ion-list"),Se=(0,o.up)("ion-header"),De=(0,o.up)("ion-refresher-content"),Ne=(0,o.up)("ion-refresher"),je=(0,o.up)("ion-spinner"),xe=(0,o.up)("ion-button"),Le=(0,o.up)("ion-list-header"),Pe=(0,o.up)("IonCheckbox"),Te=(0,o.up)("IonNavLink"),Ae=(0,o.up)("ion-item-group"),Ue=(0,o.up)("ion-content"),Ee=(0,o.up)("ion-page");return(0,o.wg)(),(0,o.j4)(Ee,{ref:"page"},{default:(0,o.w5)((()=>[(0,o.Wm)(ve,{class:"AppHeader",translucent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{class:"toolbar"},{default:(0,o.w5)((()=>[(0,o.Wm)(H,{slot:"start"},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{mode:"md"})])),_:1}),(0,o.Wm)(M,{mode:"md"},{default:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o._)("p",null,(0,i.zw)(e.displayFirstName?e.userFullName:e.userName),1),d])])),_:1}),(0,o.Wm)(H,{slot:"end"},{default:(0,o.w5)((()=>[e.avatar?((0,o.wg)(),(0,o.j4)($,{key:0,"router-direction":"forward",component:e.UserView},{default:(0,o.w5)((()=>[e.displayAvatar?((0,o.wg)(),(0,o.j4)(O,{key:0,class:"userAvatar"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.avatar},null,8,c)])),_:1})):(0,o.kq)("",!0)])),_:1},8,["component"])):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(Ue,{fullscreen:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(Se,{collapse:"condense",class:"HomeHeader"},{default:(0,o.w5)((()=>[(0,o.Wm)(_e,{class:"welcomeHeader"},{default:(0,o.w5)((()=>[e.userName?((0,o.wg)(),(0,o.j4)(M,{key:0,size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)("Bonjour, "+(0,i.zw)(e.userName)+" !",1)])),_:1})):((0,o.wg)(),(0,o.j4)(M,{key:1,size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)("Vue d'ensemble")])),_:1}))])),_:1}),(0,o.Wm)(_e,null,{default:(0,o.w5)((()=>[(0,o.Wm)(We,{id:"comp-tt",class:"nextCourse",ref:"comp-tt",lines:"none",inset:"true"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.timetable,(n=>((0,o.wg)(),(0,o.iD)("div",{class:"coursElemNext",key:n.id,style:(0,i.j5)(`--courseColor: ${n.course.color};`)},[(0,o.Wm)(be,{class:(0,i.C_)(["nextCours",{cancelled:n.status.isCancelled,HasStatus:n.hasStatus}]),button:"",detail:!1,mode:"md",lines:"none",onClick:t[0]||(t[0]=t=>e.goto("timetable"))},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.Wm)(ke,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(e.nextCoursStartTime),1)])),_:1})]),(0,o.Wm)(ye,{style:(0,i.j5)(`--courseColor: ${n.course.color};`)},{default:(0,o.w5)((()=>[(0,o._)("h2",null,[p,(0,o.Uk)((0,i.zw)(n.data.subject),1)]),e.nextCoursStarted?((0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("p",f,(0,i.zw)(e.nextCoursTime),1),(0,o._)("div",w,[(0,o._)("div",{class:"progress",style:(0,i.j5)(`width: ${e.nextCoursCompletion}%`)},null,4)]),(0,o._)("p",g,(0,i.zw)(e.nextCoursEndTime),1)])):((0,o.wg)(),(0,o.iD)("div",v,[(0,o._)("p",null,(0,i.zw)(e.nextCoursTime),1)])),(0,o._)("div",_,[(0,o._)("div",k,[y,(0,o._)("p",null,(0,i.zw)(n.data.rooms.join(", ")||"Pas de salle"),1)]),b,(0,o._)("div",C,[I,(0,o._)("p",null,(0,i.zw)(n.data.teachers.join(", ")||"Pas de professeur"),1)])])])),_:2},1032,["style"])])),_:2},1032,["class"]),n.status.status?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,i.C_)(["nextStatus",{cancelled:n.status.isCancelled}])},[W,(0,o._)("p",null,(0,i.zw)(n.status.status),1)],2)):(0,o.kq)("",!0)],4)))),128)),"ERR_NETWORK"!=e.timetable.error||0!=e.timetable.length||e.connected?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(be,{key:0,style:{"margin-top":"12px"},class:"nextCours",button:"",detail:!1,mode:"md",lines:"none"},{default:(0,o.w5)((()=>[S,(0,o.Wm)(ye,{class:"ion-text-wrap"},{default:(0,o.w5)((()=>[D,N])),_:1})])),_:1})),"ERR_NETWORK"==e.timetable.error&&0==e.timetable.length&&e.connected?((0,o.wg)(),(0,o.j4)(be,{key:1,style:{"margin-top":"12px"},class:"nextCours",button:"",detail:!1,mode:"md",lines:"none"},{default:(0,o.w5)((()=>[j,(0,o.Wm)(ye,{class:"ion-text-wrap"},{default:(0,o.w5)((()=>[x,L])),_:1})])),_:1})):(0,o.kq)("",!0),e.ttbLoading||0!=e.timetable.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(be,{key:2,class:"nextCours",button:"",detail:!1,mode:"md",style:{"margin-top":"12px"},onClick:t[1]||(t[1]=t=>e.goto("timetable"))},{default:(0,o.w5)((()=>[(0,o._)("div",P,(0,i.zw)(e.noCoursesEmoji),1),(0,o.Wm)(ye,{class:"ion-text-wrap"},{default:(0,o.w5)((()=>[T,(0,o._)("p",null,(0,i.zw)(e.noCoursesMsg),1)])),_:1})])),_:1})),e.ttbLoading&&0==e.timetable.length?((0,o.wg)(),(0,o.j4)(be,{key:3,class:"nextCours",button:"",detail:!1,mode:"md",lines:"none"},{default:(0,o.w5)((()=>[(0,o._)("div",A,[(0,o.Wm)(Ce)]),(0,o.Wm)(ye,null,{default:(0,o.w5)((()=>[(0,o._)("h2",U,[(0,o.Wm)(Ie,{class:"courseColor",animated:!0,style:{width:"10px"}}),(0,o.Uk)(),(0,o.Wm)(Ie,{animated:!0,style:{width:"40%"}})]),(0,o._)("h3",null,[(0,o.Wm)(Ie,{animated:!0,style:{width:"35%"}})]),(0,o._)("p",null,[(0,o.Wm)(Ie,{animated:!0,style:{width:"80%"}})])])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1},512)])),_:1})])),_:1}),(0,o.Wm)(Ne,{slot:"fixed",onIonRefresh:t[2]||(t[2]=t=>e.handleRefresh(t))},{default:(0,o.w5)((()=>[(0,o.Wm)(De)])),_:1}),(0,o.Wm)(l.uT,{name:"NoCoursAnim"},{default:(0,o.w5)((()=>[e.internetConnection?!e.allLoaded&&e.showLoading?((0,o.wg)(),(0,o.iD)("div",q,[(0,o.Wm)(je),G,F])):e.serverError?((0,o.wg)(),(0,o.iD)("div",B,V)):(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",E,R))])),_:1}),(0,o._)("div",Y,[(0,o.Wm)(l.uT,{name:"ElemAnim"},{default:(0,o.w5)((()=>[e.displayHomeworks&&e.allLoaded&&!e.hwloading?((0,o.wg)(),(0,o.j4)(We,{key:0,lines:"none",id:"comp-hw",ref:"comp-hw",inset:"true"},{default:(0,o.w5)((()=>[e.allLoaded&&!e.hwloading?((0,o.wg)(),(0,o.j4)(Le,{key:0,class:"listHeader"},{default:(0,o.w5)((()=>[(0,o.Wm)(ye,null,{default:(0,o.w5)((()=>[J])),_:1}),(0,o.Wm)(xe,{onClick:t[3]||(t[3]=t=>e.goto("homework"))},{default:(0,o.w5)((()=>[(0,o.Uk)("Voir tout "),K])),_:1})])),_:1})):(0,o.kq)("",!0),e.hwloading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Q,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.homeworks,((t,n)=>((0,o.wg)(),(0,o.j4)(Ae,{class:"hw_group",key:n},{default:(0,o.w5)((()=>[(0,o._)("div",X,[(0,o._)("p",null,[(0,o.Uk)("pour "),(0,o._)("span",null,(0,i.zw)(new Date(t.date).toLocaleString("fr-FR",{weekday:"long",day:"numeric",month:"short"})),1)]),ee]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.homeworks,(t=>((0,o.wg)(),(0,o.j4)(be,{detail:"false",key:t.id,button:""},{default:(0,o.w5)((()=>[(0,o._)("div",te,[(0,o.Wm)(Pe,{checked:t.data.done,onIonChange:n=>e.changeDone(t,n)},null,8,["checked","onIonChange"])]),(0,o.Wm)(Te,{class:"navlink","router-direction":"forward",component:e.HomeworkItemView,componentProps:{urlHw:encodeURIComponent(JSON.stringify(t))}},{default:(0,o.w5)((()=>[(0,o.Wm)(ye,{class:"ion-text-wrap",style:(0,i.j5)(`--courseColor: ${t.data.color};`)},{default:(0,o.w5)((()=>[(0,o._)("p",null,[ne,(0,o.Uk)(" "+(0,i.zw)(t.homework.subject),1)]),(0,o._)("h2",null,(0,i.zw)(t.homework.shortContent),1)])),_:2},1032,["style"])])),_:2},1032,["component","componentProps"])])),_:2},1024)))),128))])),_:2},1024)))),128))])),0!=e.homeworks.length||e.hwLoading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(be,{key:2,lines:"none"},{default:(0,o.w5)((()=>[oe,(0,o.Wm)(ye,{class:"ion-text-wrap"},{default:(0,o.w5)((()=>[ae,se])),_:1})])),_:1}))])),_:1},512)):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(l.uT,{name:"ElemAnim"},{default:(0,o.w5)((()=>[e.displayLastGrades&&0!==e.grades.length&&e.allLoaded&&!e.gradesLoading?((0,o.wg)(),(0,o.j4)(We,{key:0,id:"comp-grades",ref:"comp-grades",lines:"none",inset:"true",class:"hw_group"},{default:(0,o.w5)((()=>[(0,o.Wm)(Le,{class:"listHeader"},{default:(0,o.w5)((()=>[(0,o.Wm)(ye,null,{default:(0,o.w5)((()=>[ie])),_:1}),(0,o.Wm)(xe,{onClick:t[4]||(t[4]=t=>e.goto("grades"))},{default:(0,o.w5)((()=>[(0,o.Uk)("Voir tout "),le])),_:1})])),_:1}),e.gradesLoading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",re,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.grades,(t=>((0,o.wg)(),(0,o.j4)(Te,{key:t.id,"router-direction":"forward",component:e.MarkView,componentProps:{markID:t.id}},{default:(0,o.w5)((()=>[(0,o.Wm)(be,{button:""},{default:(0,o.w5)((()=>[(0,o.Wm)(ye,{style:(0,i.j5)(`--courseColor: ${t.subject.color};`)},{default:(0,o.w5)((()=>[(0,o._)("p",null,[ue,(0,o.Uk)(" "+(0,i.zw)(t.subject.name),1)]),(0,o._)("h2",null,(0,i.zw)(t.info.description),1)])),_:2},1032,["style"]),(0,o._)("div",de,[t.info.significant?((0,o.wg)(),(0,o.j4)(ye,{key:0,class:"gradeLabel"},{default:(0,o.w5)((()=>[(0,o._)("h2",null,[(0,o.Uk)((0,i.zw)(t.grade.value),1),(0,o._)("small",null,"/"+(0,i.zw)(t.grade.out_of),1)])])),_:2},1024)):((0,o.wg)(),(0,o.j4)(ye,{key:1,class:"gradeLabel"},{default:(0,o.w5)((()=>[(0,o._)("h2",null,(0,i.zw)(t.info.significantReason),1)])),_:2},1024))])])),_:2},1024)])),_:2},1032,["component","componentProps"])))),128))]))])),_:1},512)):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(l.uT,{name:"ElemAnim"},{default:(0,o.w5)((()=>[e.displayNews&&0!==e.news.length&&e.allLoaded&&!e.newsLoading?((0,o.wg)(),(0,o.j4)(We,{key:0,id:"comp-news",ref:"comp-news",lines:"none",inset:"true"},{default:(0,o.w5)((()=>[(0,o.Wm)(Le,{class:"listHeader"},{default:(0,o.w5)((()=>[(0,o.Wm)(ye,null,{default:(0,o.w5)((()=>[ce])),_:1}),(0,o.Wm)(xe,{onClick:t[5]||(t[5]=t=>e.goto("news"))},{default:(0,o.w5)((()=>[(0,o.Uk)("Voir tout "),me])),_:1})])),_:1}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.news.slice(0,5),((t,n)=>((0,o.wg)(),(0,o.j4)(Te,{key:n,"router-direction":"forward",component:e.InfoView,componentProps:{urlNews:encodeURIComponent(JSON.stringify(t))}},{default:(0,o.w5)((()=>[(0,o.Wm)(be,{button:""},{default:(0,o.w5)((()=>[t.title.toLowerCase().includes("menu")?((0,o.wg)(),(0,o.iD)("span",pe,"restaurant")):((0,o.wg)(),(0,o.iD)("span",he,"feed")),(0,o.Wm)(ye,null,{default:(0,o.w5)((()=>[(0,o._)("h2",null,(0,i.zw)(t.title),1),(0,o._)("p",null,(0,i.zw)(t.content),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["component","componentProps"])))),128)),e.displayNews&&0==e.news.length&&!e.newsLoading?((0,o.wg)(),(0,o.j4)(be,{key:0,lines:"none"},{default:(0,o.w5)((()=>[fe,(0,o.Wm)(ye,null,{default:(0,o.w5)((()=>[we,ge])),_:1})])),_:1})):(0,o.kq)("",!0)])),_:1},512)):(0,o.kq)("",!0)])),_:1})],512)])),_:1})])),_:1},512)}n(7658),n(4916),n(5306),n(2707),n(541);var _e=n(5287);const ke=(0,_e.fo)("NotificationBadge",{web:()=>n.e(357).then(n.bind(n,8357)).then((e=>new e.NotificationBadgeWeb))});var ye=n(6726),be=n(4892),Ce=n(2605),Ie=n(4302),We=n(4334),Se=n(392),De=n(8121),Ne=n(6520),je=n(6251),xe=n(8874),Le=n(3162),Pe=n(8903);function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ue(e,t,n){return t&&Ae(e.prototype,t),n&&Ae(e,n),e}function Ee(e){return+e.replace(/px/,"")}function ze(e){var t=window.devicePixelRatio,n=getComputedStyle(e),o=Ee(n.getPropertyValue("width")),a=Ee(n.getPropertyValue("height"));e.setAttribute("width",(o*t).toString()),e.setAttribute("height",(a*t).toString())}function He(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Math.random()*(t-e)+e;return Math.floor(o*Math.pow(10,n))/Math.pow(10,n)}function Me(e){return e[He(0,e.length)]}var Re=.00125,qe=5e-4,Ge=9e-4,Fe=1e-5,Be=6,Oe=80,$e=.9,Ze=1.7,Ve=.2,Ye=.6,Je=.03,Ke=.07,Qe=15,Xe=82,et=150,tt=100,nt=250,ot=40,at=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function st(e){var t=1920;return Math.log(e)/Math.log(t)}var it=function(){function e(t){Te(this,e);var n=t.initialPosition,o=t.direction,a=t.confettiRadius,s=t.confettiColors,i=t.emojis,l=t.emojiSize,r=t.canvasWidth,u=He($e,Ze,3),d=u*st(r);this.confettiSpeed={x:d,y:d},this.finalConfettiSpeedX=He(Ve,Ye,3),this.rotationSpeed=i.length?.01:He(Je,Ke,3)*st(r),this.dragForceCoefficient=He(qe,Ge,6),this.radius={x:a,y:a},this.initialRadius=a,this.rotationAngle="left"===o?He(0,.2,3):He(-.2,0,3),this.emojiSize=l,this.emojiRotationAngle=He(0,2*Math.PI),this.radiusYUpdateDirection="down";var c="left"===o?He(Xe,Qe)*Math.PI/180:He(-Qe,-Xe)*Math.PI/180;this.absCos=Math.abs(Math.cos(c)),this.absSin=Math.abs(Math.sin(c));var m=He(-et,0),p={x:n.x+("left"===o?-m:m)*this.absCos,y:n.y-m*this.absSin};this.currentPosition=Object.assign({},p),this.initialPosition=Object.assign({},p),this.color=i.length?null:Me(s),this.emoji=i.length?Me(i):null,this.createdAt=(new Date).getTime(),this.direction=o}return Ue(e,[{key:"draw",value:function(e){var t=this.currentPosition,n=this.radius,o=this.color,a=this.emoji,s=this.rotationAngle,i=this.emojiRotationAngle,l=this.emojiSize,r=window.devicePixelRatio;o?(e.fillStyle=o,e.beginPath(),e.ellipse(t.x*r,t.y*r,n.x*r,n.y*r,s,0,2*Math.PI),e.fill()):a&&(e.font="".concat(l,"px serif"),e.save(),e.translate(r*t.x,r*t.y),e.rotate(i),e.textAlign="center",e.fillText(a,0,0),e.restore())}},{key:"updatePosition",value:function(e,t){var n=this.confettiSpeed,o=this.dragForceCoefficient,a=this.finalConfettiSpeedX,s=this.radiusYUpdateDirection,i=this.rotationSpeed,l=this.createdAt,r=this.direction,u=t-l;n.x>a&&(this.confettiSpeed.x-=o*e),this.currentPosition.x+=n.x*("left"===r?-this.absCos:this.absCos)*e,this.currentPosition.y=this.initialPosition.y-n.y*this.absSin*u+Re*Math.pow(u,2)/2,this.rotationSpeed-=this.emoji?1e-4:Fe*e,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji?this.emojiRotationAngle+=this.rotationSpeed*e%(2*Math.PI):"down"===s?(this.radius.y-=e*i,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=e*i,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}},{key:"getIsVisibleOnCanvas",value:function(e){return this.currentPosition.y<e+tt}}]),e}();function lt(){var e=document.createElement("canvas");return e.style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.zIndex="1000",e.style.pointerEvents="none",document.body.appendChild(e),e}function rt(e){var t=e.confettiRadius,n=void 0===t?Be:t,o=e.confettiNumber,a=void 0===o?e.confettiesNumber||(e.emojis?ot:nt):o,s=e.confettiColors,i=void 0===s?at:s,l=e.emojis,r=void 0===l?e.emojies||[]:l,u=e.emojiSize,d=void 0===u?Oe:u;return e.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),e.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:n,confettiNumber:a,confettiColors:i,emojis:r,emojiSize:d}}var ut=function(){function e(t){var n=this;Te(this,e),this.canvasContext=t,this.shapes=[],this.promise=new Promise((function(e){return n.resolvePromise=e}))}return Ue(e,[{key:"getBatchCompletePromise",value:function(){return this.promise}},{key:"addShapes",value:function(){var e;(e=this.shapes).push.apply(e,arguments)}},{key:"complete",value:function(){var e;return!this.shapes.length&&(null===(e=this.resolvePromise)||void 0===e||e.call(this),!0)}},{key:"processShapes",value:function(e,t,n){var o=this,a=e.timeDelta,s=e.currentTime;this.shapes=this.shapes.filter((function(e){return e.updatePosition(a,s),e.draw(o.canvasContext),!n||e.getIsVisibleOnCanvas(t)}))}}]),e}(),dt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Te(this,e),this.activeConfettiBatches=[],this.canvas=t.canvas||lt(),this.canvasContext=this.canvas.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=(new Date).getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}return Ue(e,[{key:"loop",value:function(){this.requestAnimationFrameRequested=!1,ze(this.canvas);var e=(new Date).getTime(),t=e-this.lastUpdated,n=this.canvas.offsetHeight,o=this.iterationIndex%10===0;this.activeConfettiBatches=this.activeConfettiBatches.filter((function(a){return a.processShapes({timeDelta:t,currentTime:e},n,o),!o||!a.complete()})),this.iterationIndex++,this.queueAnimationFrameIfNeeded(e)}},{key:"queueAnimationFrameIfNeeded",value:function(e){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=e||(new Date).getTime(),requestAnimationFrame(this.loop))}},{key:"addConfetti",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=rt(e),n=t.confettiRadius,o=t.confettiNumber,a=t.confettiColors,s=t.emojis,i=t.emojiSize,l=this.canvas.getBoundingClientRect(),r=l.width,u=l.height,d=5*u/7,c={x:0,y:d},m={x:r,y:d},p=new ut(this.canvasContext),h=0;h<o/2;h++){var f=new it({initialPosition:c,direction:"right",confettiRadius:n,confettiColors:a,confettiNumber:o,emojis:s,emojiSize:i,canvasWidth:r}),w=new it({initialPosition:m,direction:"left",confettiRadius:n,confettiColors:a,confettiNumber:o,emojis:s,emojiSize:i,canvasWidth:r});p.addShapes(f,w)}return this.activeConfettiBatches.push(p),this.queueAnimationFrameIfNeeded(),p.getBatchCompletePromise()}},{key:"clearCanvas",value:function(){this.activeConfettiBatches=[]}}]),e}();const ct=dt,mt=new ct,pt=(0,o.aZ)({name:"FolderPage",components:{IonHeader:s.Gu,IonContent:s.W2,IonToolbar:s.sr,IonMenuButton:s.fG,IonButtons:s.Sm,IonPage:s._i,IonList:s.q_,IonListHeader:s.yh,IonButton:s.YG,IonItem:s.Ie,IonLabel:s.Q$,IonSpinner:s.PQ,IonRefresher:s.nJ,IonChip:s.hM,IonItemGroup:s.Ub,IonRefresherContent:s.Wo,IonSkeletonText:s.CK,IonNavLink:s.Qx,IonCheckbox:s.nz},data(){return{connected:!1,fakeTime:200,timetable:[],ttbLoading:!1,nextCoursTime:"",nextCoursStarted:!1,nextCoursCompletion:0,percentage:0,updateTime:null,firstName:"",homeworks:[],hwLoading:!0,blockChangeDone:!1,editMode:!1,noCoursesEmoji:this.randomEmoji(),noCoursesMsg:this.randomMsg(),userData:[],userName:"",userFullName:"",avatar:"",grades:[],gradesLoading:!0,UserView:Ie.Z,news:[],newsLoading:!0,internetConnection:!0,allLoaded:!1,showLoading:!0,toolbarColor:"",InfoView:We["default"],MarkView:Se["default"],HomeworkItemView:De["default"],serverError:!1,nextCoursStartTime:"00:00",nextCoursEndTime:"00:00"}},methods:{goto(e){document.dispatchEvent(new CustomEvent("navTransitionEnable")),this.$router.push(e)},randomEmoji(){const e=["😊","😎","😴","👌","🌞","📚","💪","💤","😉","🥱"];return e[Math.floor(Math.random()*e.length)]},randomMsg(){const e=["Temps calme","Pas de cours, on révise ?","C'est la sieste (ou pas)","Je suis sûr qu'il te reste des devoirs...","Il n'y a jamais vraiment rien à faire !","Il est temps de commencer ce joli DM !","Il fait beau dehors ?","Ça tombe bien, ce livre ne se finira pas tout seul !","Flûte, le cours de maths est fini","Après l'effort, le réconfort ;)","Alors, ça se la coule douce ?","Prenons de l'avance sur la semaine prochaine !","Il est temps de reprendre la lecture !"];return e[Math.floor(Math.random()*e.length)]},editTimetable(e){const t=new Date;let n=[];e=(0,Ne.Z)(e);const o=JSON.parse(localStorage.getItem("customCourses"))||[];if(o.forEach((t=>{const n=new Date(t.day),o=new Date(this.$rn),a=new Date(t.course.time.start),s=new Date(t.course.time.end);a.setDate(o.getDate()),a.setMonth(o.getMonth()),a.setFullYear(o.getFullYear()),s.setDate(o.getDate()),s.setMonth(o.getMonth()),s.setFullYear(o.getFullYear()),n.getDate()==o.getDate()&&n.getMonth()==o.getMonth()&&n.getFullYear()==o.getFullYear()&&(t.course.time.start=a,t.course.time.end=s,t.course.course.color=je.Z.getSubjectColor(t.course.data.subject,je.Z.getRandomColor()),e.push(t.course))})),e=e.filter((e=>!e.course.sameTime)),n=e.filter((e=>{const o=new Date(e.time.start),a=new Date(e.time.end);let s=Math.floor((o-t)/1e3/60);const i=-Math.floor((a-o)/1e3/60)/2;if(0!=n.length)return!1;if(this.nextCoursStartTime=o.toLocaleString("fr-FR",{hour:"2-digit",minute:"2-digit"}),this.nextCoursEndTime=a.toLocaleString("fr-FR",{hour:"2-digit",minute:"2-digit"}),s<60&&s>=0)this.nextCoursTime=s>1?`dans ${s+1} minutes`:0==s?"dans moins d'une minute":`dans ${s+1} minute(s)`,this.nextCoursStarted=!1;else if(s<0){if(a<=t)return!1;this.nextCoursStarted=!0;const e=a-o,n=t-o,s=Math.floor(n/e*100);this.nextCoursCompletion=s;const i=Math.floor((a-t)/1e3/60);this.nextCoursTime=`${i} min rest.`}else{let e=Math.floor(s/60);s%=60,s=s>1?`${s} minutes`:`${s} minute`,e=e>1?`${e} heures`:`${e} heure`,this.nextCoursTime=`dans ${e} et ${s}`,this.nextCoursStarted=!1}return!(s<i)&&(e.hasStatus=void 0!=e.status.status,n.push(e),!0)})),0==n.length&&e.length>0)for(let a=e.length-1;a>=0;a--){const o=e[a],s=new Date(o.time.end),i=new Date(o.time.start),l=Math.floor((s-t)/1e3/60),r=Math.floor((i-t)/1e3/60),u=-Math.floor((s-i)/1e3/60);if(!(l<-120)){if(r>u){this.nextCoursStarted=!0;const e=s-i,a=t-i,r=Math.floor(a/e*100);this.nextCoursCompletion=r,this.nextCoursTime=`${l} min rest.`,o.hasStatus=void 0!=o.status.status,n.push(o);break}this.nextCoursTime="Cours terminé",this.nextCoursStarted=!1,o.hasStatus=void 0!=o.status.status,n.push(o);break}}return n},getRecap(e){(0,xe["default"])(e).then((e=>{this.timetable=[],this.homeworks=[],this.grades=[],this.news=[],this.useRecap(e),localStorage.setItem("recap",JSON.stringify(e))})).catch((e=>{console.error("[HOMEPAGE] : "+e),"ERR_NETWORK"==e[0]&&(this.showLoading=!1,this.allLoaded=!1,this.serverError=!0)}))},useRecap(e){setTimeout((()=>{this.allLoaded=!0,this.showLoading=!1}),this.fakeTime),this.fakeTime=0;const t=e.timetable;this.timetable=this.editTimetable(t),this.ttbloading=!1,clearInterval(this.updateTime),this.updateTime=setInterval((()=>{this.timetable=this.editTimetable(t)}),600);const n=e.homeworks;this.homeworks=this.formatHomeworks(n),this.hwLoading=!1,this.grades=e.grades.last,this.gradesLoading=!1,this.news=e.news,this.newsLoading=!1},formatHomeworks(e){const t=[],n=new Date;for(let o=0;o<e.length;o++){const a=e[o],s=new Date(a.data.date);e[o].homework.content=e[o].homework.content.replace("<br/>"," "),e[o].data.timeLeft=Math.floor((s-n)/1e3/60/60/24);let i=t.find((e=>e.date==s.toDateString()));i||(i={date:s.toDateString(),homeworks:[]},t.push(i)),i.homeworks.push(a)}return t.sort(((e,t)=>new Date(e.date)-new Date(t.date))),t},reorder(){const e=["comp-hw","comp-tt"],t=document.getElementById("components");if(t)for(let n=0;n<e.length;n++){const o=document.getElementById(e[n]);o&&t.appendChild(o)}},changeDone(e,t){const n=e.data.id,o=new Date(e.data.date);o.setDate(o.getDate()+1);const a=localStorage.getItem("disableConfetti");t.target.checked&&"true"!=a?(mt.addConfetti({emojis:["✅","🍾","🎊"],confettiNumber:20}),ye.Z.confetti()):ye.Z.notification("success"),this.dontRetryCheck||(0,be.m)([n,o]).then((()=>{this.dontRetryCheck=!0,setTimeout((()=>{this.dontRetryCheck=!1}),100)})).catch((e=>{this.getRecap(!0),Le.Z.presentToastFull("Impossible de marquer ce devoir comme fait","Une erreur est survenue lors de la requête.","danger",Pe.no6,!0,e)}))},checkUndone(){const e=this.homeworks,t=new Date(this.$rn);t.setDate(t.getDate()+1);const n=e.find((e=>e.date==t.toDateString()));let o=0;n&&n.homeworks.forEach((e=>{e.data.done||(o++,ke.setBadgeCount({count:o}))}))},async handleRefresh(e){this.getRecap(!0),this.noCoursesMsg=this.randomMsg(),this.noCoursesEmoji=this.randomEmoji(),this.connected=await Ce.Z.getStatus(),this.connected=this.connected.connected,setTimeout((()=>{e.detail.complete()}),1e3)},async displayBetaMsg(){const e=await s.Cl.create({header:"Page d'accueil",message:"Cette page est en cours de développement. Elle ne contient pas tout le contenu prévu et subira de multiples changements à l'avenir.",mode:"md",buttons:["Je comprends"]});await e.present()},async getAvatar(){localStorage.getItem("customAvatar")?this.avatar=localStorage.getItem("customAvatar"):localStorage.getItem("avatarCache")?this.avatar=localStorage.getItem("avatarCache"):localStorage.getItem("userData")&&(this.avatar=JSON.parse(localStorage.getItem("userData")).student.avatar),document.addEventListener("userDataUpdated",(()=>{localStorage.getItem("customAvatar")?this.avatar=localStorage.getItem("customAvatar"):localStorage.getItem("avatarCache")&&(this.avatar=localStorage.getItem("avatarCache"))}))},getUserData(){this.getAvatar(),this.userData=JSON.parse(localStorage.userData),this.userName=JSON.parse(localStorage.userData).student.name.split(" ")[JSON.parse(localStorage.userData).student.name.split(" ").length-1],this.userFullName=JSON.parse(localStorage.userData).student.name;const e=this.userFullName.split(" "),t=e[e.length-1];e.pop(),e.unshift(t),this.userFullName=e.join(" ")},getBoolOpt(e,t=!0){localStorage.getItem(e)?this[e]="true"==localStorage.getItem(e):"undefined"!=typeof t&&null!=t&&(this[e]=t,localStorage.setItem(e,t))},getBoolOpts(e){e.forEach((e=>this.getBoolOpt(e)))}},ionViewDidEnter(){return!1},async mounted(){const e=["displayNextCourse","displayNews","displayLastGrades","displayAvatar","displayFirstName","displayHomeworks"];if(localStorage.getItem("userData")){const e=JSON.parse(localStorage.getItem("userData")).student.name;this.firstName=e.split(" ").pop()}if(this.getBoolOpts(e),this.connected=await Ce.Z.getStatus(),this.connected=this.connected.connected,localStorage.getItem("recap")){const e=JSON.parse(localStorage.getItem("recap"));this.useRecap(e)}this.getRecap(),document.addEventListener("tokenUpdated",(()=>{this.getRecap()})),this.getUserData(),document.addEventListener("userDataLoaded",(()=>{this.getUserData()})),document.addEventListener("userDataUpdated",(()=>{this.getUserData()})),Ce.Z.addListener("networkStatusChange",(e=>{this.internetConnection=e.connected})),navigator.onLine||(this.internetConnection=!1),document.addEventListener("settingsUpdated",(()=>{this.getBoolOpts(e)}))}});var ht=n(3744);const ft=(0,ht.Z)(pt,[["render",ve],["__scopeId","data-v-59cb67c0"]]),wt=ft,gt={components:{IonNav:s.O1,IonPage:s._i},data:function(){return{component:wt,changeTimeout:null}},methods:{navWillChange:function(){return!1},navDidChange:function(){return!1}},mounted:function(){return!1}},vt=(0,ht.Z)(gt,[["render",a]]),_t=vt},8121:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var o=n(6252),a=n(3577);const s=e=>((0,o.dD)("data-v-457e3472"),e=e(),(0,o.Cn)(),e),i={key:0},l=s((()=>(0,o._)("span",{slot:"start",class:"material-symbols-outlined mdls"},"delete",-1))),r=s((()=>(0,o._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"delete",-1))),u=s((()=>(0,o._)("h2",null,"Ce devoir à été supprimé",-1))),d=s((()=>(0,o._)("p",null,"Vous consultez une archive de ce devoir.",-1))),c={key:1},m=["innerHTML"],p=s((()=>(0,o._)("p",null,"Documents attachés",-1))),h={key:0,class:"material-symbols-outlined mdls",slot:"start"},f={key:1,class:"material-symbols-outlined mdls",slot:"start"};function w(e,t,n,s,w,g){const v=(0,o.up)("IonBackButton"),_=(0,o.up)("ion-buttons"),k=(0,o.up)("ion-title"),y=(0,o.up)("ion-button"),b=(0,o.up)("IonToolbar"),C=(0,o.up)("IonHeader"),I=(0,o.up)("IonLabel"),W=(0,o.up)("IonItem"),S=(0,o.up)("IonList"),D=(0,o.up)("ion-content");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(C,{class:"AppHeader",translucent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_,{slot:"start"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{class:"only-ios",text:e.backTitle,onClick:e.pop},null,8,["text","onClick"]),(0,o.Wm)(v,{class:"only-md",onClick:e.pop},null,8,["onClick"])])),_:1}),e.openedHomework&&e.custom?((0,o.wg)(),(0,o.j4)(k,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)("Devoir personnalisé")])),_:1})):((0,o.wg)(),(0,o.j4)(k,{key:1},{default:(0,o.w5)((()=>[(0,o.Uk)("Travail à faire "),e.openedHomework?((0,o.wg)(),(0,o.iD)("span",i,"en "+(0,a.zw)(e.openedHomework.subject),1)):(0,o.kq)("",!0)])),_:1})),(0,o.Wm)(_,{slot:"end"},{default:(0,o.w5)((()=>[e.custom?((0,o.wg)(),(0,o.j4)(y,{key:0,color:"danger",onClick:t[0]||(t[0]=t=>e.deleteHW(t))},{default:(0,o.w5)((()=>[l,(0,o.Uk)(" Suppr. ")])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(D,{fullscreen:!0},{default:(0,o.w5)((()=>[e.deleted?((0,o.wg)(),(0,o.j4)(S,{key:0,inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{color:"danger"},{default:(0,o.w5)((()=>[r,(0,o.Wm)(I,null,{default:(0,o.w5)((()=>[u,d])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),e.openedHw?((0,o.wg)(),(0,o.iD)("div",c,[(0,o._)("div",{class:"content",innerHTML:e.openedHomework.content},null,8,m)])):(0,o.kq)("",!0),0!==e.openedFiles.length?((0,o.wg)(),(0,o.j4)(I,{key:2,class:"listGroupTitle"},{default:(0,o.w5)((()=>[p])),_:1})):(0,o.kq)("",!0),0!==e.openedFiles.length?((0,o.wg)(),(0,o.j4)(S,{key:3,class:"listGroup"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.openedFiles,(t=>((0,o.wg)(),(0,o.j4)(W,{key:t.id,onClick:n=>e.openLink(t.url)},{default:(0,o.w5)((()=>[1==t.type?((0,o.wg)(),(0,o.iD)("span",h,"description")):0==t.type?((0,o.wg)(),(0,o.iD)("span",f,"link")):(0,o.kq)("",!0),(0,o.Wm)(I,null,{default:(0,o.w5)((()=>[(0,o._)("h2",null,(0,a.zw)(t.name),1),(0,o._)("p",null,(0,a.zw)(t.url),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(0,o.kq)("",!0)])),_:1})],64)}n(8862);var g=n(5274),v=n(7806);const _=(0,o.aZ)({name:"FolderPage",components:{IonHeader:g.Gu,IonToolbar:g.sr,IonButtons:g.Sm,IonButton:g.YG,IonBackButton:g.oU,IonTitle:g.wd,IonContent:g.W2,IonList:g.q_,IonItem:g.Ie,IonLabel:g.Q$},props:{urlHw:{type:String,required:!0}},data(){let e="Retour";const t=this.$router.currentRoute.value;return"Homework"==t.name&&(e="Devoirs"),{backTitle:e,openedHw:[],openedData:[],openedHomework:[],openedFiles:[],custom:!1,deleted:!1}},methods:{async openLink(e){await v.A.open({url:e,presentationStyle:"popover"})},async deleteHW(){const e=JSON.parse(localStorage.customHomeworks),t=e.find((e=>e.homework.data.id==this.openedData.id));e.splice(e.indexOf(t),1),localStorage.customHomeworks=JSON.stringify(e),this.deleted=!0}},mounted(){if(this.urlHw){const e=this.urlHw,t=decodeURIComponent(e),n=JSON.parse(t);this.openedHw=n,this.openedData=n.data,this.openedHomework=n.homework,this.openedFiles=n.files,"number"!==typeof n.data.id&&n.data.id.startsWith("custom")&&(this.custom=!0)}return!1}});var k=n(3744);const y=(0,k.Z)(_,[["render",w],["__scopeId","data-v-457e3472"]]),b=y},4334:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var o=n(6252),a=n(3577);const s=e=>((0,o.dD)("data-v-532a17eb"),e=e(),(0,o.Cn)(),e),i={key:0},l={class:"mainTitle"},r={class:"avatar",slot:"start"},u={class:"avatar",slot:"start"},d=s((()=>(0,o._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"contact_support",-1))),c=s((()=>(0,o._)("h2",null,"Cette news contient un sondage",-1))),m=s((()=>(0,o._)("p",null,"Papillon ne permet pas de répondre aux sondages.",-1))),p=["innerHTML"],h={key:1},f=s((()=>(0,o._)("p",null,"Documents attachés",-1))),w={key:0,class:"material-symbols-outlined mdls",slot:"start"},g={key:1,class:"material-symbols-outlined mdls",slot:"start"};function v(e,t,n,s,v,_){const k=(0,o.up)("IonBackButton"),y=(0,o.up)("ion-buttons"),b=(0,o.up)("ion-title"),C=(0,o.up)("ion-skeleton-text"),I=(0,o.up)("IonToolbar"),W=(0,o.up)("IonHeader"),S=(0,o.up)("ion-toolbar"),D=(0,o.up)("IonLabel"),N=(0,o.up)("IonItem"),j=(0,o.up)("ion-header"),x=(0,o.up)("IonList"),L=(0,o.up)("ion-content");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(W,{class:"AppHeader",translucent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(I,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y,{slot:"start"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{class:"only-ios",text:e.backTitle,onClick:e.pop},null,8,["text","onClick"]),(0,o.Wm)(k,{class:"only-md",onClick:e.pop},null,8,["onClick"])])),_:1}),e.openedNews?((0,o.wg)(),(0,o.j4)(b,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,a.zw)(e.openedNews.title),1)])),_:1})):((0,o.wg)(),(0,o.j4)(b,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{style:{width:"200px"}})])),_:1}))])),_:1})])),_:1}),(0,o.Wm)(L,{fullscreen:!0},{default:(0,o.w5)((()=>[e.openedNews?((0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(j,{collapse:"condense"},{default:(0,o.w5)((()=>[(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[(0,o._)("h1",l,(0,a.zw)(e.openedNews.title),1)])),_:1}),(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[(0,o.Wm)(N,null,{default:(0,o.w5)((()=>[(0,o._)("div",r,(0,a.zw)(e.shortName),1),(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o._)("h2",null,(0,a.zw)(e.openedNews.author),1),(0,o._)("p",null,(0,a.zw)(e.openedNews.dateString),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(x,{class:"only-md"},{default:(0,o.w5)((()=>[(0,o.Wm)(N,null,{default:(0,o.w5)((()=>[(0,o._)("div",u,(0,a.zw)(e.shortName),1),(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o._)("h2",null,(0,a.zw)(e.openedNews.author),1),(0,o._)("p",null,(0,a.zw)(e.openedNews.dateString),1)])),_:1})])),_:1})])),_:1}),e.openedNews.isSurvey?((0,o.wg)(),(0,o.j4)(x,{key:0,inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{color:"danger"},{default:(0,o.w5)((()=>[d,(0,o.Wm)(D,{class:"ion-text-wrap"},{default:(0,o.w5)((()=>[c,m])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o._)("div",{class:"content",innerHTML:e.openedNews.htmlContent},null,8,p),e.openedNews.attachments?((0,o.wg)(),(0,o.iD)("div",h,[0!==e.openedNews.attachments.length?((0,o.wg)(),(0,o.j4)(D,{key:0,class:"listGroupTitle"},{default:(0,o.w5)((()=>[f])),_:1})):(0,o.kq)("",!0),0!==e.openedNews.attachments.length?((0,o.wg)(),(0,o.j4)(x,{key:1,class:"listGroup"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.openedNews.attachments,(t=>((0,o.wg)(),(0,o.j4)(N,{key:t.id,onClick:n=>e.openLink(t.url)},{default:(0,o.w5)((()=>[1==t.type?((0,o.wg)(),(0,o.iD)("span",w,"description")):0==t.type?((0,o.wg)(),(0,o.iD)("span",g,"link")):(0,o.kq)("",!0),(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o._)("h2",null,(0,a.zw)(t.name),1),(0,o._)("p",null,(0,a.zw)(t.url),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])),_:1})],64)}n(4916);var _=n(5274),k=n(7806);const y=(0,o.aZ)({name:"FolderPage",components:{IonHeader:_.Gu,IonToolbar:_.sr,IonButtons:_.Sm,IonBackButton:_.oU,IonTitle:_.wd,IonContent:_.W2,IonSkeletonText:_.CK,IonList:_.q_,IonItem:_.Ie,IonLabel:_.Q$},props:{urlNews:{type:String,required:!0}},data(){let e="Retour";const t=this.$router.currentRoute.value;return"News"==t.name&&(e="Actualités"),{backTitle:e,openedNews:[],shortName:""}},methods:{async openLink(e){await k.A.open({url:e,presentationStyle:"popover"})},getLettersFromName(e){"M"==e[0]&&(e=e.split(" ").slice(1).join(" "));const t=e.match(/\b(\w)/g).join("");return t.length>2?t.slice(0,2):t}},mounted(){if(this.urlNews){const e=this.urlNews,t=decodeURIComponent(e),n=JSON.parse(t);this.openedNews=n,this.shortName=this.getLettersFromName(this.openedNews.author)}return!1}});var b=n(3744);const C=(0,b.Z)(y,[["render",v],["__scopeId","data-v-532a17eb"]]),I=C},4302:(e,t,n)=>{n.d(t,{Z:()=>x});var o=n(6252);const a=e=>((0,o.dD)("data-v-ac506ad4"),e=e(),(0,o.Cn)(),e),s=a((()=>(0,o._)("p",null,"Photo de profil",-1))),i=a((()=>(0,o._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"person_pin",-1))),l=a((()=>(0,o._)("h2",null,"Changer de photo de profil",-1))),r=a((()=>(0,o._)("p",null,"Utiliser une photo différente dans l'application",-1))),u=a((()=>(0,o._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"delete",-1))),d=a((()=>(0,o._)("h2",null,"Supprimer la photo de profil personnalisée",-1))),c=a((()=>(0,o._)("p",null,"Utiliser la photo de profil par défaut",-1))),m=a((()=>(0,o._)("p",null,"Nom utilisé",-1))),p=a((()=>(0,o._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"drive_file_rename_outline",-1))),h=a((()=>(0,o._)("h2",null,"Changer de nom",-1))),f=a((()=>(0,o._)("p",null,"Utiliser un nom différent dans l'application",-1))),w=a((()=>(0,o._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"delete",-1))),g=a((()=>(0,o._)("h2",null,"Réinitialiser le nom utilisé",-1)));function v(e,t,n,a,v,_){const k=(0,o.up)("IonBackButton"),y=(0,o.up)("ion-buttons"),b=(0,o.up)("ion-title"),C=(0,o.up)("IonToolbar"),I=(0,o.up)("IonHeader"),W=(0,o.up)("ion-toolbar"),S=(0,o.up)("ion-header"),D=(0,o.up)("IonLabel"),N=(0,o.up)("IonItem"),j=(0,o.up)("IonList"),x=(0,o.up)("ion-content");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(I,{class:"AppHeader",translucent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(C,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y,{slot:"start"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{class:"only-ios",text:e.backTitle,onClick:e.pop},null,8,["text","onClick"]),(0,o.Wm)(k,{class:"only-md",onClick:e.pop},null,8,["onClick"])])),_:1}),(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Profil")])),_:1})])),_:1})])),_:1}),(0,o.Wm)(x,{fullscreen:!0},{default:(0,o.w5)((()=>[(0,o.Wm)(S,{collapse:"condense"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)("Profil")])),_:1})])),_:1})])),_:1}),(0,o.Wm)(D,{class:"listGroupTitle"},{default:(0,o.w5)((()=>[s])),_:1}),(0,o.Wm)(j,{class:"listGroup",lines:"inset"},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{button:"",onClick:t[0]||(t[0]=t=>e.tweakChangeAvatar())},{default:(0,o.w5)((()=>[i,(0,o.Wm)(D,{class:"ion-text-wrap"},{default:(0,o.w5)((()=>[l,r])),_:1})])),_:1}),(0,o.Wm)(N,{button:"",onClick:t[1]||(t[1]=t=>e.tweakDeleteAvatar())},{default:(0,o.w5)((()=>[u,(0,o.Wm)(D,{class:"ion-text-wrap"},{default:(0,o.w5)((()=>[d,c])),_:1})])),_:1})])),_:1}),(0,o.Wm)(D,{class:"listGroupTitle"},{default:(0,o.w5)((()=>[m])),_:1}),(0,o.Wm)(j,{class:"listGroup",lines:"inset"},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{button:"",onClick:t[2]||(t[2]=t=>e.tweakChangeName())},{default:(0,o.w5)((()=>[p,(0,o.Wm)(D,{class:"ion-text-wrap"},{default:(0,o.w5)((()=>[h,f])),_:1})])),_:1}),(0,o.Wm)(N,{button:"",onClick:t[3]||(t[3]=t=>e.tweakDeleteName())},{default:(0,o.w5)((()=>[w,(0,o.Wm)(D,{class:"ion-text-wrap"},{default:(0,o.w5)((()=>[g])),_:1})])),_:1})])),_:1})])),_:1})],64)}n(8862);var _=n(5274),k=n(3162),y=n(8903),b=n(9895);const C=(0,b.fo)("FilePicker",{web:()=>n.e(593).then(n.bind(n,593)).then((e=>new e.FilePickerWeb))});var I=n(2068);const W=n(8664).Z,S=new W,D=(0,o.aZ)({name:"FolderPage",components:{IonHeader:_.Gu,IonToolbar:_.sr,IonButtons:_.Sm,IonBackButton:_.oU,IonList:_.q_,IonItem:_.Ie,IonLabel:_.Q$,IonTitle:_.wd,IonContent:_.W2},data(){let e="Retour";const t=this.$router.currentRoute.value;return"Settings"==t.name?e="Paramètres":"Home"==t.name&&(e="Vue d'ensemble"),{backTitle:e}},methods:{pop(){return!1},async tweakChangeAvatar(){try{const e=await C.pickImages({multiple:!1,readData:!0}),t=e.files[0].data,n="data:image/jpeg;base64,"+t,o=document.createElement("canvas"),a=o.getContext("2d"),s=new Image;s.src=n,s.onload=function(){o.width=128,o.height=128*s.height/s.width,a.drawImage(s,0,0,o.width,o.height);const e=o.toDataURL("image/jpeg");localStorage.setItem("customAvatar",e),document.dispatchEvent(new CustomEvent("userDataUpdated")),S.getColorAsync(e).then((e=>{localStorage.setItem("averageColorCustom",JSON.stringify(e)),document.dispatchEvent(new CustomEvent("averageColorUpdated"))})).catch((e=>{console.log(e)})),k.Z.presentToastSmall("Photo de profil modifiée","success",y.TjA)}}catch(e){console.error("[Change Avatar]: "+e),k.Z.presentToastFull("Erreur lors du changement de photo de profil.","Veuillez réessayer.","danger",y.fID,!0,String(e))}},tweakDeleteAvatar(){if(!localStorage.getItem("customAvatar"))return k.Z.presentToastSmall("Photo de profil non définie","tertiary",y.cQG);localStorage.removeItem("customAvatar"),localStorage.removeItem("averageColorCustom"),document.dispatchEvent(new CustomEvent("userDataUpdated")),k.Z.presentToastSmall("Photo de profil supprimée","success",y.TjA)},tweakChangeName(){let e=JSON.parse(localStorage.getItem("userData")).student.name;localStorage.getItem("customName")&&(e=localStorage.getItem("customName")),I.V.prompt({title:"Changer de nom",message:"Entrez votre nouveau nom",inputPlaceholder:e,okButtonTitle:"Valider",cancelButtonTitle:"Annuler"}).then((e=>{e.value?(localStorage.setItem("customName",e.value),document.dispatchEvent(new CustomEvent("userDataUpdated")),k.Z.presentToastSmall("Nom modifié","success",y.TjA)):k.Z.presentToastSmall("Annulé","tertiary",y.cQG)}))},tweakDeleteName(){if(!localStorage.getItem("customName"))return k.Z.presentToastSmall("Aucun nom défini","tertiary",y.cQG);localStorage.removeItem("customName"),document.dispatchEvent(new CustomEvent("userDataUpdated")),k.Z.presentToastSmall("Nom supprimé","success",y.TjA)}},mounted(){return!1}});var N=n(3744);const j=(0,N.Z)(D,[["render",v],["__scopeId","data-v-ac506ad4"]]),x=j}}]);
//# sourceMappingURL=142-legacy.7b053dbf.js.map