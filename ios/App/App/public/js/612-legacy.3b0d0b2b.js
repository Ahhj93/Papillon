"use strict";(self["webpackChunkpapillon"]=self["webpackChunkpapillon"]||[]).push([[612],{7612:(e,t,n)=>{n.r(t),n.d(t,{default:()=>He});var s=n(6252);function a(e,t,n,a,l,o){var r=(0,s.up)("ion-nav"),i=(0,s.up)("ion-page");return(0,s.wg)(),(0,s.j4)(i,null,{default:(0,s.w5)((function(){return[(0,s.Wm)(r,{root:l.component,ref:"page"},null,8,["root"])]})),_:1})}var l=n(5274),o=(n(8862),n(3577));const r=e=>((0,s.dD)("data-v-67dc6dd3"),e=e(),(0,s.Cn)(),e),i=r((()=>(0,s._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"gavel",-1))),u=r((()=>(0,s._)("h2",null,"L'onglet vie scolaire est en développement",-1))),d=r((()=>(0,s._)("p",null,"Il est possible que certaines fonctionnalités ne soient pas disponibles.",-1))),c=r((()=>(0,s._)("p",null,"Absences",-1))),m=r((()=>(0,s._)("p",null,"Impossible de récupérer les absences pour le moment.",-1))),p=r((()=>(0,s._)("p",null,"Aucune absence.",-1))),f=r((()=>(0,s._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"door_open",-1))),h={key:0},w={key:1},g=r((()=>(0,s._)("span",{class:"material-symbols-outlined mdls"},"error",-1))),_=r((()=>(0,s._)("span",{class:"material-symbols-outlined mdls"},"check",-1))),b=r((()=>(0,s._)("p",null,"Punitions",-1))),y=r((()=>(0,s._)("p",null,"Impossible de récupérer les punitions pour le moment.",-1))),v=r((()=>(0,s._)("p",null,"Aucune punition.",-1))),k=r((()=>(0,s._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"gavel",-1))),D=r((()=>(0,s._)("p",null,"Retards",-1))),W=r((()=>(0,s._)("p",null,"Impossible de récupérer les retards pour le moment.",-1))),I=r((()=>(0,s._)("p",null,"Aucun retard.",-1))),S=r((()=>(0,s._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"schedule",-1))),E={key:0},j={key:1},$=r((()=>(0,s._)("span",{class:"material-symbols-outlined mdls"},"error",-1))),q=r((()=>(0,s._)("span",{class:"material-symbols-outlined mdls"},"check",-1))),z=r((()=>(0,s._)("br",null,null,-1))),M=r((()=>(0,s._)("br",null,null,-1))),L=r((()=>(0,s._)("br",null,null,-1))),U=r((()=>(0,s._)("br",null,null,-1))),C=r((()=>(0,s._)("br",null,null,-1)));function J(e,t,n,a,l,r){const J=(0,s.up)("ion-menu-button"),T=(0,s.up)("ion-buttons"),P=(0,s.up)("ion-title"),R=(0,s.up)("IonToolbar"),x=(0,s.up)("IonHeader"),O=(0,s.up)("ion-toolbar"),Y=(0,s.up)("ion-header"),F=(0,s.up)("ion-refresher-content"),A=(0,s.up)("ion-refresher"),G=(0,s.up)("ion-label"),H=(0,s.up)("ion-item"),N=(0,s.up)("ion-list"),V=(0,s.up)("IonLabel"),Z=(0,s.up)("ion-chip"),B=(0,s.up)("IonItem"),K=(0,s.up)("ion-nav-link"),Q=(0,s.up)("IonList"),X=(0,s.up)("ion-content"),ee=(0,s.up)("ion-page");return(0,s.wg)(),(0,s.j4)(ee,{ref:"page"},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{class:"AppHeader",translucent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(R,null,{default:(0,s.w5)((()=>[(0,s.Wm)(T,{slot:"start"},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{color:"dark"})])),_:1}),(0,s.Wm)(P,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Vie scolaire")])),_:1})])),_:1})])),_:1}),(0,s.Wm)(X,null,{default:(0,s.w5)((()=>[(0,s.Wm)(Y,{collapse:"condense"},{default:(0,s.w5)((()=>[(0,s.Wm)(O,null,{default:(0,s.w5)((()=>[(0,s.Wm)(P,{size:"large"},{default:(0,s.w5)((()=>[(0,s.Uk)("Vie scolaire")])),_:1})])),_:1})])),_:1}),(0,s.Wm)(A,{slot:"fixed",onIonRefresh:t[0]||(t[0]=t=>e.handleRefresh(t))},{default:(0,s.w5)((()=>[(0,s.Wm)(F)])),_:1}),(0,s.Wm)(N,{inset:""},{default:(0,s.w5)((()=>[(0,s.Wm)(H,{color:"primary"},{default:(0,s.w5)((()=>[i,(0,s.Wm)(G,{class:"ion-text-wrap"},{default:(0,s.w5)((()=>[u,d])),_:1})])),_:1})])),_:1}),(0,s.Wm)(V,{class:"listGroupTitle"},{default:(0,s.w5)((()=>[c])),_:1}),(0,s.Wm)(N,{class:"listGroup"},{default:(0,s.w5)((()=>[e.absError?((0,s.wg)(),(0,s.j4)(H,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(G,null,{default:(0,s.w5)((()=>[m])),_:1})])),_:1})):(0,s.kq)("",!0),0!=e.absences.length||e.absError?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(H,{key:1},{default:(0,s.w5)((()=>[(0,s.Wm)(G,null,{default:(0,s.w5)((()=>[p])),_:1})])),_:1})),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.absences,((t,n)=>((0,s.wg)(),(0,s.j4)(Q,{key:n},{default:(0,s.w5)((()=>[(0,s.Wm)(K,{"router-direction":"forward",component:e.SchoollifeAbsItemView,componentProps:{evenement1:encodeURIComponent(JSON.stringify(t))}},{default:(0,s.w5)((()=>[(0,s.Wm)(B,{button:""},{default:(0,s.w5)((()=>[f,(0,s.Wm)(G,null,{default:(0,s.w5)((()=>[0!==t.data.reasons.length?((0,s.wg)(),(0,s.iD)("h2",h,(0,o.zw)(t.data.reasons[0]),1)):((0,s.wg)(),(0,s.iD)("h2",w,"Absence non justifiée")),(0,s._)("p",null,(0,o.zw)(t.data.hours)+" "+(0,o.zw)("ecoledirecte"===this.loginService?"":"heures")+" manquées",1),(0,s._)("h3",null,"le "+(0,o.zw)(new Date(t.date.from).toLocaleDateString("fr-FR",{weekday:"long",month:"long",day:"numeric"}))+" à "+(0,o.zw)(new Date(t.date.from).toLocaleDateString("fr-FR",{hour:"2-digit",minute:"2-digit"}).split(" ")[1]),1)])),_:2},1024),t.data.isJustified?((0,s.wg)(),(0,s.j4)(Z,{key:1,slot:"end",color:"success"},{default:(0,s.w5)((()=>[_,(0,s.Uk)(" Justifié ")])),_:1})):((0,s.wg)(),(0,s.j4)(Z,{key:0,slot:"end",color:"warning"},{default:(0,s.w5)((()=>[g,(0,s.Uk)(" Injustifié ")])),_:1}))])),_:2},1024)])),_:2},1032,["component","componentProps"])])),_:2},1024)))),128))])),_:1}),(0,s.Wm)(V,{class:"listGroupTitle"},{default:(0,s.w5)((()=>[b])),_:1}),(0,s.Wm)(N,{class:"listGroup"},{default:(0,s.w5)((()=>[e.punishmentsError?((0,s.wg)(),(0,s.j4)(H,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(G,null,{default:(0,s.w5)((()=>[y])),_:1})])),_:1})):(0,s.kq)("",!0),0!=e.punishments.length||e.punishmentsError?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(H,{key:1},{default:(0,s.w5)((()=>[(0,s.Wm)(G,null,{default:(0,s.w5)((()=>[v])),_:1})])),_:1})),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.punishments,((e,t)=>((0,s.wg)(),(0,s.j4)(H,{key:t},{default:(0,s.w5)((()=>[k,(0,s.Wm)(G,null,{default:(0,s.w5)((()=>[(0,s._)("h2",null,(0,o.zw)(e.homeworks.text),1),(0,s._)("p",null,(0,o.zw)(e.data.reasons.text[0])+" - "+(0,o.zw)(e.data.reasons.circumstances),1),(0,s._)("h3",null,"le "+(0,o.zw)(new Date(e.date.givenDate).toLocaleDateString("fr-FR",{weekday:"long",month:"long",day:"numeric"}))+" à "+(0,o.zw)(new Date(e.date.givenDate).toLocaleDateString("fr-FR",{hour:"2-digit",minute:"2-digit"}).split(" ")[1]),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,s.Wm)(V,{class:"listGroupTitle"},{default:(0,s.w5)((()=>[D])),_:1}),(0,s.Wm)(N,{class:"listGroup"},{default:(0,s.w5)((()=>[e.delaysError?((0,s.wg)(),(0,s.j4)(H,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(G,null,{default:(0,s.w5)((()=>[W])),_:1})])),_:1})):(0,s.kq)("",!0),0!=e.delays.length||e.delaysError?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(H,{key:1},{default:(0,s.w5)((()=>[(0,s.Wm)(G,null,{default:(0,s.w5)((()=>[I])),_:1})])),_:1})),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.delays,((e,t)=>((0,s.wg)(),(0,s.j4)(H,{key:t},{default:(0,s.w5)((()=>[S,(0,s.Wm)(G,null,{default:(0,s.w5)((()=>[0!==e.data.reasons.length?((0,s.wg)(),(0,s.iD)("h2",E,(0,o.zw)(e.data.reasons[0]),1)):((0,s.wg)(),(0,s.iD)("h2",j,"Absence non justifiée")),(0,s._)("p",null,(0,o.zw)(e.date.duration)+" minutes manquées",1),(0,s._)("h3",null,"le "+(0,o.zw)(new Date(e.date.date).toLocaleDateString("fr-FR",{weekday:"long",month:"long",day:"numeric"}))+" à "+(0,o.zw)(new Date(e.date.date).toLocaleDateString("fr-FR",{hour:"2-digit",minute:"2-digit"}).split(" ")[1]),1)])),_:2},1024),e.data.isJustified?((0,s.wg)(),(0,s.j4)(Z,{key:1,slot:"end",color:"success"},{default:(0,s.w5)((()=>[q,(0,s.Uk)(" Justifié ")])),_:1})):((0,s.wg)(),(0,s.j4)(Z,{key:0,slot:"end",color:"warning"},{default:(0,s.w5)((()=>[$,(0,s.Uk)(" Injustifié ")])),_:1}))])),_:2},1024)))),128))])),_:1}),z,M,L,U,C])),_:1})])),_:1},512)}n(7658),n(2707);var T=n(6154),P=n(4490),R=n(2560);function x(e){switch(localStorage.loginService){case"pronote":return O(e);case"ecoledirecte":return}}async function O(e){const t=P.l.config.globalProperties.$api,n=localStorage.getItem("token"),s=`${t}/absences?token=${n}`;let a={};const l=localStorage.getItem("AbsencesCache");return null==l||e?T.Z.get(s).then((e=>{a=e.data,a=Y(a);const t=new Date,n={date:t,absences:e.data};return localStorage.setItem("AbsencesCache",JSON.stringify(n)),a})).catch((e=>{if(e.response&&("notfound"==e.response.data||"expired"==e.response.data)&&(0,R["default"])(),e.code)return new Promise((t=>{t({error:e.code})}))})):(a=JSON.parse(l).absences,new Promise((e=>{e(Y(a))})))}function Y(e){const t=[];return e.forEach((e=>{const n={data:{id:e.id,isJustified:e.justified,reasons:e.reasons,hours:e.hours,type:"Absence"},date:{from:new Date(e.from),to:new Date(e.to)}};t.push(n)})),t.sort(((e,t)=>t.date.from-e.date.from)),t}const F=x;function A(e){switch(localStorage.loginService){case"pronote":return G(e);case"ecoledirecte":return}}async function G(e){const t=P.l.config.globalProperties.$api,n=localStorage.getItem("token"),s=`${t}/punishments?token=${n}`,a=localStorage.getItem("PunishmentsCache");if(null==a||e)return T.Z.get(s).then((e=>{let t=e.data;t=H(t);const n=new Date,s={date:n,punishments:e.data};return localStorage.setItem("PunishmentsCache",JSON.stringify(s)),t})).catch((e=>{if(e.response&&("notfound"==e.response.data||"expired"==e.response.data)&&(0,R["default"])(),e.code)return new Promise((t=>{t({error:e.code})}))}));{const e=JSON.parse(a).punishments;return new Promise((t=>{t(H(e))}))}}function H(e){const t=[];return e.forEach((e=>{const n={data:{id:e.id,reasons:e.reason,nature:e.nature,givenBy:e.giver},date:{givenDate:new Date(e.date),schedules:e.schedule,duration:e.duration},homeworks:e.homework,status:{isSchedulable:e.schedulable,isExclusion:e.exclusion,isDuringLesson:e.durring_lesson}};t.push(n)})),t.sort(((e,t)=>t.date.givenDate-e.date.givenDate)),t}const N=A;function V(e){switch(localStorage.loginService){case"pronote":return Z(e);case"ecoledirecte":return}}async function Z(e){const t=P.l.config.globalProperties.$api,n=localStorage.getItem("token"),s=`${t}/delays?token=${n}`;let a={};const l=localStorage.getItem("DelaysCache");return null==l||e?T.Z.get(s).then((e=>{a=e.data,a=B(a);const t=new Date,n={date:t,delays:e.data};return localStorage.setItem("DelaysCache",JSON.stringify(n)),a})).catch((e=>{if(e.response&&("notfound"==e.response.data||"expired"==e.response.data)&&(0,R["default"])(),e.code)return new Promise((t=>{t({error:e.code})}))})):(a=JSON.parse(l).delays,new Promise((e=>{e(B(a))})))}function B(e){const t=[];return e.forEach((e=>{const n={data:{id:e.id,isJustified:e.justified,justification:e.justification,reasons:e.reasons,type:"Retard"},date:{date:new Date(e.date),duration:e.duration}};t.push(n)})),t.sort(((e,t)=>t.date.from-e.date.from)),t}const K=V;n(6699);var Q=n(381);async function X(e){const t="https://api.ecoledirecte.com/v3",n=localStorage.getItem("token"),s=JSON.parse(localStorage.UserCache).id,a=`${t}/eleves/${s}/viescolaire.awp?verbe=get`;let l={};const o=localStorage.getItem("EDSchoollifeCache");if(null==o||e){const e={headers:{"Content-Type":"application/x-www-form-urlencoded","X-Token":n}},t="data={}";return T.Z.post(a,t,e).then((e=>{if(200!=e.data.code)if(525===e.data.code)(0,R["default"])();else{if(520!==e.data.code)return new Promise((t=>{t({error:e.data.code})}));(0,R["default"])()}l=e.data.data,l=ee(l);const t=new Date,n={date:t,edschoollife:e.data.data};return localStorage.setItem("EDSchoollifeCache",JSON.stringify(n)),l})).catch((e=>{if(e.response&&525==e.response.data.code&&(0,R["default"])(),e.code)return new Promise((t=>{t({error:e.code})}))}))}return l=JSON.parse(o).edschoollife,new Promise((e=>{e(ee(l))}))}function ee(e){const t={absences:[],delays:[],punishments:[],encouragements:[]};let n={janvier:"01",février:"02",mars:"03",avril:"04",mai:"05",juin:"06",juillet:"07",août:"08",septembre:"09",octobre:10,novembre:11,décembre:12};return e.absencesRetards.forEach((e=>{if("Retard"==e.typeElement){let s,a,l,o,r=e.displayDate.split(" ");e.displayDate.includes("le")?(s=`${r[4]}-${n[r[3]]}-${r[2]}`,a=`${r[6]}`,l=s,o=`${r[8]}`):(s=`${n[r[3]]}/${r[2]}/${r[4]}`,a=`${r[6]}`,l=`${n[r[11]]}/${r[12]}/${r[13]}`,o=`${r[15]}`);let i={data:{id:e.id,isJustified:e.justifie,justification:e.commentaire||"Aucun commentaire",reasons:[e.motif],type:"Retard"},date:{date:s+" "+a,duration:e.libelle,to:l+" "+o}};t.delays.push(i)}if("Absence"==e.typeElement){let s,a,l,o,r=e.displayDate.split(" ");e.displayDate.includes("le")?(s=`${r[4]}-${n[r[3]]}-${r[2]}`,a=`${r[6]}`,l=s,o=`${r[8]}`):(s=`${n[r[3]]}/${r[2]}/${r[4]}`,a=`${r[6]}`,l=`${n[r[11]]}/${r[12]}/${r[13]}`,o=`${r[15]}`);let i={data:{id:e.id,isJustified:e.justifie,reasons:[e.motif],hours:e.libelle,type:"Absence"},date:{from:s+" "+a,to:l+" "+o}};t.absences.push(i)}})),e.sanctionsEncouragements.forEach((e=>{if("Punition"==e.typeElement){const n={data:{id:e.id,reasons:{text:[e.libelle||"Aucun motif fournit"],circumstances:e.commentaire||e.motif||"Aucune circonstance"},nature:e.libelle,givenBy:e.par},date:{givenDate:new Date(e.date),schedules:e.schedule,duration:e.duration},homeworks:{text:e.motif},status:{isSchedulable:e.schedulable||!1,isExclusion:e.exclusion||!1,isDuringLesson:e.durring_lesson||!1}};t.punishments.push(n)}if("Encouragement"==e.typeElement){const n={data:{id:e.id,isJustified:e.justifie,justification:e.motif,reasons:e.commentaire},date:{date:new Date(e.date),duration:null}};t.encouragements.push(n)}})),t.absences.sort(((e,t)=>t.date.from-e.date.from)),t.delays.sort(((e,t)=>t.date.from-e.date.from)),t.punishments.sort(((e,t)=>t.date.from-e.date.from)),t.encouragements.sort(((e,t)=>t.date.from-e.date.from)),t}Q.locale("fr");const te=X,ne=e=>((0,s.dD)("data-v-30ad33fc"),e=e(),(0,s.Cn)(),e),se={key:0},ae=ne((()=>(0,s._)("p",null,"Début de l'absence",-1))),le=ne((()=>(0,s._)("p",null,"Heure de début",-1))),oe=ne((()=>(0,s._)("p",null,"Fin de l'absence",-1))),re=ne((()=>(0,s._)("p",null,"Heure de fin",-1))),ie=ne((()=>(0,s._)("p",null,"Temps manqué",-1))),ue={key:1},de=ne((()=>(0,s._)("p",null,"Date de l'absence",-1))),ce=ne((()=>(0,s._)("p",null,"Heure de début - fin",-1))),me=ne((()=>(0,s._)("p",null,"Temps manqué",-1))),pe=ne((()=>(0,s._)("p",null,"Motif",-1))),fe=ne((()=>(0,s._)("p",null,"Justifié ?",-1))),he=ne((()=>(0,s._)("span",{class:"material-symbols-outlined mdls"},"check",-1))),we=ne((()=>(0,s._)("span",{class:"material-symbols-outlined mdls"},"error",-1))),ge=ne((()=>(0,s._)("h4",null,"Cours manqués",-1))),_e={key:0,class:"warnMessage globalMessage"},be=ne((()=>(0,s._)("span",{class:"material-symbols-outlined mdls icon"},"warning",-1))),ye=ne((()=>(0,s._)("div",{class:"messageText"},[(0,s._)("h2",null,"Impossible d'afficher les cours manqués pour le moment"),(0,s._)("p",{class:"description"},"Faute de méthode d'affichage de cours manqués sur plusieurs jours, les cours manqués pour les absences supérieures à 1 jour ne sont pas affichés.")],-1))),ve=[be,ye],ke={key:1,class:"globalMessage"},De=ne((()=>(0,s._)("div",{class:"messageText"},[(0,s._)("h2",null,"Chargement de l'emploi du temps..."),(0,s._)("p",{class:"description"},"Pour afficher les cours manqués, nous devons charger votre emploi du temps. Cela ne devrait pas prendre trop de temps.")],-1))),We={key:2,class:"errorMessage globalMessage"},Ie=ne((()=>(0,s._)("span",{class:"material-symbols-outlined mdls icon"},"error",-1))),Se=ne((()=>(0,s._)("div",{class:"messageText"},[(0,s._)("h2",null,"Impossible de charger l'emploi du temps"),(0,s._)("p",{class:"description"},"Une erreur s'est produite pendant la récupération de votre emploi du temps. Veuillez réessayer ultérieurement.")],-1))),Ee=[Ie,Se],je={key:3},$e=ne((()=>(0,s._)("h2",null,[(0,s._)("span",{class:"courseColor",style:{background:"#0000ff"}}),(0,s.Uk)("Français")],-1))),qe=ne((()=>(0,s._)("p",null,"Le cours entier a été manqué",-1))),ze={key:0},Me={key:1};function Le(e,t,n,a,l,r){const i=(0,s.up)("IonBackButton"),u=(0,s.up)("ion-buttons"),d=(0,s.up)("ion-title"),c=(0,s.up)("IonToolbar"),m=(0,s.up)("IonHeader"),p=(0,s.up)("IonLabel"),f=(0,s.up)("IonItem"),h=(0,s.up)("IonList"),w=(0,s.up)("ion-spinner"),g=(0,s.up)("ion-content");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(m,{class:"AppHeader",translucent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(u,{slot:"start"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{class:"only-ios",text:e.backTitle,onClick:e.pop},null,8,["text","onClick"]),(0,s.Wm)(i,{class:"only-md",onClick:e.pop},null,8,["onClick"])])),_:1}),this.evenement?((0,s.wg)(),(0,s.j4)(d,{key:0},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(this.evenement.data.type)+" du "+(0,o.zw)(e.moment(this.evenement.date.from).format("dddd D MMMM")),1)])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1}),this.evenement?((0,s.wg)(),(0,s.j4)(g,{key:0,fullscreen:!0},{default:(0,s.w5)((()=>[e.dureeSuperieurUnJour?((0,s.wg)(),(0,s.iD)("div",se,[(0,s.Wm)(h,{inset:""},{default:(0,s.w5)((()=>[(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[ae])),_:1}),(0,s.Wm)(p,{slot:"end"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.moment(this.evenement.date.from).format("dddd D MMMM YYYY")),1)])),_:1})])),_:1}),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[le])),_:1}),(0,s.Wm)(p,{slot:"end"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(new Date(this.evenement.date.from).toLocaleDateString("fr-FR",{hour:"2-digit",minute:"2-digit"}).split(" ")[1]),1)])),_:1})])),_:1}),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[oe])),_:1}),(0,s.Wm)(p,{slot:"end"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.moment(this.evenement.date.to).format("dddd D MMMM YYYY")),1)])),_:1})])),_:1}),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[re])),_:1}),(0,s.Wm)(p,{slot:"end"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(new Date(this.evenement.date.to).toLocaleDateString("fr-FR",{hour:"2-digit",minute:"2-digit"}).split(" ")[1]),1)])),_:1})])),_:1}),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[ie])),_:1}),(0,s.Wm)(p,{slot:"end"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(this.evenement.data.hours),1)])),_:1})])),_:1})])),_:1})])):((0,s.wg)(),(0,s.iD)("div",ue,[(0,s.Wm)(h,{inset:""},{default:(0,s.w5)((()=>[(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[de])),_:1}),(0,s.Wm)(p,{slot:"end"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.moment(this.evenement.date.from).format("dddd D MMMM YYYY")),1)])),_:1})])),_:1}),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[ce])),_:1}),(0,s.Wm)(p,{slot:"end"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(new Date(this.evenement.date.from).toLocaleDateString("fr-FR",{hour:"2-digit",minute:"2-digit"}).split(" ")[1])+" - "+(0,o.zw)(new Date(this.evenement.date.to).toLocaleDateString("fr-FR",{hour:"2-digit",minute:"2-digit"}).split(" ")[1]),1)])),_:1})])),_:1}),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[me])),_:1}),(0,s.Wm)(p,{slot:"end"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(this.evenement.data.hours),1)])),_:1})])),_:1})])),_:1})])),(0,s.Wm)(h,{inset:""},{default:(0,s.w5)((()=>[(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[pe])),_:1}),(0,s.Wm)(p,{slot:"end"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(this.evenement.data.reasons[0]),1)])),_:1})])),_:1}),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[fe])),_:1}),this.evenement.data.isJustified?((0,s.wg)(),(0,s.j4)(p,{key:0,slot:"end",color:"success",class:"aligne"},{default:(0,s.w5)((()=>[he,(0,s.Uk)(" Oui")])),_:1})):((0,s.wg)(),(0,s.j4)(p,{key:1,slot:"end",color:"danger",class:"aligne"},{default:(0,s.w5)((()=>[we,(0,s.Uk)(" Non")])),_:1}))])),_:1})])),_:1}),(0,s.Wm)(h,{inset:""},{default:(0,s.w5)((()=>[(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[ge])),_:1}),e.dureeSuperieurUnJour?((0,s.wg)(),(0,s.iD)("div",_e,ve)):(0,s.kq)("",!0),e.loadingEDT&&!e.dureeSuperieurUnJour?((0,s.wg)(),(0,s.iD)("div",ke,[(0,s.Wm)(w,{class:"icon"}),De])):(0,s.kq)("",!0),e.errorGetEDT?((0,s.wg)(),(0,s.iD)("div",We,Ee)):(0,s.kq)("",!0),this.loadingEDT||this.errorGetEDT?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",je,[(0,s.Wm)(f,{button:""},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{class:"ion-text-wrap"},{default:(0,s.w5)((()=>[$e,qe])),_:1})])),_:1}),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.coursManques,((e,t)=>((0,s.wg)(),(0,s.j4)(f,{button:"",key:t,virtualIndex:t},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{class:"ion-text-wrap"},{default:(0,s.w5)((()=>[(0,s._)("h2",null,[(0,s._)("span",{class:"courseColor",style:(0,o.j5)(`background: ${e.course.color};`)},null,4),(0,s.Uk)(" "+(0,o.zw)(e.data.subject)+" - de "+(0,o.zw)(new Date(e.time.start).toLocaleDateString("fr-FR",{hour:"2-digit",minute:"2-digit"}).split(" ")[1])+" à "+(0,o.zw)(new Date(e.time.end).toLocaleDateString("fr-FR",{hour:"2-digit",minute:"2-digit"}).split(" ")[1]),1)]),e.absInfo.courManque?((0,s.wg)(),(0,s.iD)("p",ze,"Le cours entier a été manqué.")):((0,s.wg)(),(0,s.iD)("p",Me,(0,o.zw)(new Date(e.absInfo.manque).toLocaleDateString("fr-FR",{hour:"2-digit",minute:"2-digit"}).split(" ")[1])+" - "+(0,o.zw)(e.absInfo.manque),1))])),_:2},1024)])),_:2},1032,["virtualIndex"])))),128))]))])),_:1})])),_:1})):(0,s.kq)("",!0)],64)}var Ue=n(8903),Ce=n(3162),Je=n(1586);const Te=(0,s.aZ)({name:"FolderPage",components:{IonHeader:l.Gu,IonToolbar:l.sr,IonButtons:l.Sm,IonBackButton:l.oU,IonTitle:l.wd,IonContent:l.W2,IonList:l.q_,IonItem:l.Ie,IonLabel:l.Q$,IonSpinner:l.PQ},props:{evenement1:{type:String,required:!0}},data(){let e="Retour",t=this.$router.currentRoute.value;return"Schoollife"==t.name&&(e="Vie scolaire"),{backTitle:e,evenement:null,moment:Q,dureeSuperieurUnJour:null,errorGetEDT:!1,loadingEDT:!0,alertCircle:Ue.no6,coursManques:[]}},methods:{between(e,t,n){return e>=t&&e<=n}},async mounted(){let e=this.evenement1,t=decodeURIComponent(e),n=JSON.parse(t);this.evenement=n;let s=await(0,Je.Z)(Q(this.evenement.date.from).format("YYYY-MM-DD")).catch((e=>{this.errorGetEDT=!0,this.loadingEDT=!1,Ce.Z.presentToastFull("Impossible de récupérer l'emploi du temps","Une erreur est survenue lors de la requête. Veuillez réessayer ultérieurement.","danger",Ue.no6,!0,e)}));"object"===typeof s&&(console.log(s),s.forEach((e=>{let t=Q(e.time.start).valueOf(),n=Q(e.time.end).valueOf();if(this.between(t,Q(this.evenement.date.from).valueOf(),Q(this.evenement.date.to).valueOf())){if(t===Q(this.evenement.date.to).valueOf())return;this.between(n,Q(this.evenement.date.from).valueOf(),Q(this.evenement.date.to).valueOf()-1)?this.coursManques.push({absInfo:{coursManque:!1,manque:Q(this.evenement.date.to).valueOf()-t},...e}):this.coursManques.push({absInfo:{coursManque:!0},...e})}})),console.log(this.coursManques),this.loadingEDT=!1,Q(this.evenement.date.to).format("D")>Q(this.evenement.date.from).format("D")?this.dureeSuperieurUnJour=!0:this.dureeSuperieurUnJour=!1)}});var Pe=n(3744);const Re=(0,Pe.Z)(Te,[["render",Le],["__scopeId","data-v-30ad33fc"]]),xe=Re,Oe=(0,s.aZ)({name:"FolderPage",components:{IonHeader:l.Gu,IonToolbar:l.sr,IonList:l.q_,IonItem:l.Ie,IonChip:l.hM,IonPage:l._i,IonLabel:l.Q$},setup(){return{}},methods:{getDatas(e){try{switch(localStorage.loginService){case"pronote":F(e).then((e=>{this.absences=e,this.absError=!1})).catch((e=>{console.error("[School Life View]: Get absences - "+e),this.absError=!0})),N(e).then((e=>{this.punishments=e})).catch((e=>{console.error("[School Life View]: Get punishments - "+e),this.punishmentsError=!0})),K(e).then((e=>{this.delays=e})).catch((e=>{console.error("[School Life View]: Get delays - "+e),this.delaysError=!0}));break;case"ecoledirecte":te(e).then((e=>{this.delays=e.delays||[],this.punishments=e.punishments||[],this.absences=e.absences||[]})).catch((e=>{console.error("[School Life View]: Get ed schoollife - "+e),this.delaysError=!0}));break}}catch(t){console.error("[School Life View]: "+t),this.punishmentsError=!0,this.absError=!0,this.delaysError=!0,this.punishments=[]}},handleRefresh(e){this.getDatas(!0),setTimeout((()=>{e.detail.complete()}),2e3)},async displayBetaMsg(){const e=await l.Cl.create({header:"Page vie scolaire",message:"Cette page est en cours de développement. Elle ne contient pas tout le contenu prévu et subira de multiples changements à l'avenir.",mode:"md",buttons:["Je comprends"]});await e.present()}},data(){return{SchoollifeAbsItemView:xe,absences:[],absError:!1,punishments:[],punishmentsError:!1,delays:[],delaysError:!1,loginService:localStorage.getItem("loginService")}},mounted(){try{this.getDatas(!1)}catch(e){console.error("[School Life View]: "+e),this.punishmentsError=!0,this.absError=!0,this.delaysError=!0,this.punishments=[]}}}),Ye=(0,Pe.Z)(Oe,[["render",J],["__scopeId","data-v-67dc6dd3"]]),Fe=Ye,Ae={components:{IonNav:l.O1,IonPage:l._i},data:function(){return{component:Fe}}},Ge=(0,Pe.Z)(Ae,[["render",a]]),He=Ge}}]);
//# sourceMappingURL=612-legacy.3b0d0b2b.js.map