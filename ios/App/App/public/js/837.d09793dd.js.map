{"version":3,"file":"js/837.d09793dd.js","mappings":"wIAAWA,E,WACX,SAAWA,GAMPA,EAAuB,WAAa,UAMpCA,EAAuB,eAAiB,cAOxCA,EAAuB,UAAY,QACtC,EApBD,CAoBGA,IAA2BA,EAAyB,CAAC,IAKjD,MCzBDC,GAAc,QAAe,cAAe,CAC9CC,IAAK,IAAM,8BAAgBC,MAAKC,GAAK,IAAIA,EAAEC,kB,4ECM/C,SAASC,EAAiBC,GACzB,OAAOC,aAAaC,cACb,IAAK,UAEV,OAAOC,EAAwBH,GAChC,IAAK,eACK,OAEZ,CAEAI,eAAeD,EAAwBH,GAEtC,MAAMK,EAAMC,EAAAA,EAAAA,OAAAA,iBAAAA,KAGNC,EAAQN,aAAaO,QAAQ,SAG7BC,EAAO,GAAEJ,uBAAyBE,IAGrC,IAAIG,EAAYT,aAAaO,QAAQ,sBAErC,GAAgB,MAAbE,IAAsBV,EAAa,CAElCU,EAAYC,KAAKC,MAAMF,GAEvB,MAAMG,EAAQ,IAAIC,KACZC,EAAY,IAAID,KAAKJ,EAAUM,MAErC,GAAGH,EAAMI,gBAAkBF,EAAUE,eAEjC,OAAO,IAAIC,SAASC,IAChBA,EAAQC,EAA8BV,EAAUW,eAAe,GAG3E,CAEH,IAAIC,EAAgB,CAAC,EACrB,OAAOC,EAAAA,EAAAA,IAAUd,GACfb,MAAM4B,IACNF,EAAgBE,EAASC,KAGhB,MAAMZ,EAAQ,IAAIC,KACZJ,EAAY,CACdM,KAAMH,EACNQ,cAAeG,EAASC,MAOrC,OAJSxB,aAAayB,QAAQ,qBAAsBf,KAAKgB,UAAUjB,IAEnEY,EAAgBF,EAA8BE,GAEvCA,CAAa,IAEpBM,OAAOC,IAaP,GAZIA,EAAML,WAEkB,YAAvBK,EAAML,SAASC,MAIa,WAAvBI,EAAML,SAASC,QAFvBK,EAAAA,EAAAA,cAQCD,EAAME,KACR,OAAO,IAAIb,SAASc,IACnBA,EAAO,CACNH,MAAOA,EAAME,MACZ,GAEJ,GAEH,CAGA,SAASX,EAA8BE,GACtC,OAAOA,CACR,CAEA,S,sKC0IKW,EAAAA,EAAAA,GAAwE,QAAlEC,MAAM,iCAAiCC,KAAK,aAAY,OAAG,K,SAK7DD,MAAM,W,UACVD,EAAAA,EAAAA,GAAyD,QAAnDC,MAAM,kCAAiC,SAAK,K,UAClDD,EAAAA,EAAAA,GAA6C,UAAzC,wCAAoC,K,UACxCA,EAAAA,EAAAA,GAAyE,SAAtE,sEAAkE,K,GAFrEG,EACAC,EACAC,G,SAEIJ,MAAM,W,UAEVD,EAAAA,EAAAA,GAAK,qB,UACLA,EAAAA,EAAAA,GAA4C,UAAxC,uCAAmC,K,UACvCA,EAAAA,EAAAA,GAAyF,SAAtF,sFAAkF,K,UAOnFA,EAAAA,EAAAA,GAAsE,QAAhEC,MAAM,iCAAiCC,KAAK,SAAQ,SAAK,K,UAUnEF,EAAAA,EAAAA,GAAM,qB,UAAAA,EAAAA,EAAAA,GAAM,qB,UAAAA,EAAAA,EAAAA,GAAM,qB,UAAAA,EAAAA,EAAAA,GAAM,qB,UAAAA,EAAAA,EAAAA,GAAM,qB,SA2BnBC,MAAM,iCAAiCC,KAAK,S,SAC5CD,MAAM,iCAAiCC,KAAK,S,ksBArFzDI,EAAAA,EAAAA,IAoGWC,EAAA,CApGDC,IAAI,QAAM,C,kBACnB,IAUY,EAVZC,EAAAA,EAAAA,IAUYC,EAAA,CAVDT,MAAM,YAAYU,YAAA,I,mBAC5B,IAQa,EARbF,EAAAA,EAAAA,IAQaG,EAAA,M,kBANZ,IAEc,EAFdH,EAAAA,EAAAA,IAEcI,EAAA,CAFDX,KAAK,SAAO,C,kBACxB,IAAgD,EAAhDO,EAAAA,EAAAA,IAAgDK,EAAA,CAA/BC,MAAM,Y,OAGxBN,EAAAA,EAAAA,IAAoCO,EAAA,M,kBAAzB,IAAa,UAAb,oB,yBAKbP,EAAAA,EAAAA,IAsFcQ,EAAA,CAtFAC,YAAY,GAAI,C,kBAC7B,IAIa,EAJbT,EAAAA,EAAAA,IAIaU,EAAA,CAJDC,SAAS,YAAU,C,kBAC9B,IAEc,EAFdX,EAAAA,EAAAA,IAEcY,EAAA,M,kBADb,IAAiD,EAAjDZ,EAAAA,EAAAA,IAAiDO,EAAA,CAAtCM,KAAK,SAAO,C,kBAAC,IAAa,UAAb,oB,yBAI1Bb,EAAAA,EAAAA,IAEgBc,EAAA,CAFDrB,KAAK,QAASsB,aAAUC,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAC,cAAcF,K,mBACtD,IAA+C,EAA/CjB,EAAAA,EAAAA,IAA+CoB,M,OAGhDpB,EAAAA,EAAAA,IAISqB,EAAA,CAJD5B,KAAK,QAAQ6B,SAAS,SAASC,WAAW,MAAM/B,MAAM,kB,mBAC7D,IAEa,EAFbQ,EAAAA,EAAAA,IAEawB,EAAA,CAFAC,QAAKT,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAQ,gBAAgBb,KAAK,QAAQc,MAAM,QAAQnC,MAAM,cAAcoC,KAAK,M,mBACvF,IAAwE,CAAxEC,K,gBAIF7B,EAAAA,EAAAA,IAYa8B,EAAAA,GAAA,CAZDC,KAAK,eAAa,C,kBAC7B,IAIM,CAJkD,GAIlD,KAJ0BpD,cAAcqD,QAAgBd,EAAAe,UAKD,GADvD,KAC+BtD,cAAcqD,QAAed,EAAAe,YAAS,WAA3EC,EAAAA,EAAAA,IAKM,MALNC,EAKM,EAJLnC,EAAAA,EAAAA,IAAyBoC,GACzBC,EACAC,EACAC,MAAyF,iBATnB,WAAvEL,EAAAA,EAAAA,IAIM,MAJNM,EAIMC,O,OASPzC,EAAAA,EAAAA,IAWU0C,EAAA,M,kBAVG,IAAkC,gBAA9CR,EAAAA,EAAAA,IASaS,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IATmB1B,EAAAvC,eAAa,CAAzBkE,EAAMC,M,WAA1BjD,EAAAA,EAAAA,IASakD,EAAA,CATmCC,IAAKF,EAAG,mBAAiB,UAAWG,UAAW/B,EAAAgC,iBAAmBC,eAAc,CAAAC,aAAiBP,I,mBAC/I,IAOU,EAPV7C,EAAAA,EAAAA,IAOUqD,EAAA,CAPDC,OAAA,IAAM,C,kBACd,IAAsE,CAAtEC,GACAvD,EAAAA,EAAAA,IAIYwD,EAAA,M,kBAHX,IAA2B,EAA3BjE,EAAAA,EAAAA,GAA2B,WAAAkE,EAAAA,EAAAA,IAApBZ,EAAKa,SAAO,IACnBnE,EAAAA,EAAAA,GAAkF,UAAAkE,EAAAA,EAAAA,IAA5EZ,EAAKc,SAASd,EAAKc,SAAS3B,OAAS,GAAG4B,QAAQC,QAAQ,QAAS,MAAV,IAC7DtE,EAAAA,EAAAA,GAAiC,cAAAkE,EAAAA,EAAAA,IAAvBZ,EAAKiB,SAAO,M,wFAM3BC,EAAMC,EAAMC,EAAMC,EAAMC,GAExBnE,EAAAA,EAAAA,IAsCWoE,EAAA,CAtCA,qBAAoBlD,EAAAmD,kBAAmB7E,MAAM,eAAgB,UAAS0B,EAAAoD,kB,mBAChF,IAUY,EAVZtE,EAAAA,EAAAA,IAUYC,EAAA,CAVDC,YAAA,IAAW,C,kBACrB,IAQa,EARbF,EAAAA,EAAAA,IAQaG,EAAA,M,kBAPZ,IAEa,EAFbH,EAAAA,EAAAA,IAEauE,EAAA,CAFD9E,KAAK,SAAO,C,kBACvB,IAAkE,EAAlEO,EAAAA,EAAAA,IAAkEwE,EAAA,CAAtD/C,QAAKT,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAuD,qBAAoB,K,mBAAQ,IAAO,UAAP,c,gBAEhDzE,EAAAA,EAAAA,IAA0C0E,EAAA,M,kBAAhC,IAAqB,UAArB,4B,OACV1E,EAAAA,EAAAA,IAEauE,EAAA,CAFD9E,KAAK,OAAK,C,kBACrB,IAAyE,EAAzEO,EAAAA,EAAAA,IAAyEwE,EAAA,CAA9DlE,MAAM,UAAWmB,QAAKT,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAyD,sB,mBAAqB,IAAK,UAAL,Y,kCAI3D3E,EAAAA,EAAAA,IAyBcQ,EAAA,M,kBAxBb,IAOU,EAPVR,EAAAA,EAAAA,IAOU0C,EAAA,CAPDkC,MAAA,IAAK,C,kBACb,IAEU,EAFV5E,EAAAA,EAAAA,IAEUqD,EAAA,M,kBADT,IAA8D,EAA9DrD,EAAAA,EAAAA,IAA8D6E,EAAA,CAApD9E,IAAI,iBAAiB+E,YAAY,S,oBAE5C9E,EAAAA,EAAAA,IAEUqD,EAAA,M,kBADT,IAAoG,EAApGrD,EAAAA,EAAAA,IAAoG+E,EAAA,CAAvFvF,MAAM,aAAaO,IAAI,aAAa+E,YAAY,0B,6BAI/D9E,EAAAA,EAAAA,IAcU0C,EAAA,CAdDsC,MAAA,4BAA8B,C,kBACtC,IAYkB,EAZlBhF,EAAAA,EAAAA,IAYkBiF,EAAA,M,kBAXR,IAAiC,gBAA1C/C,EAAAA,EAAAA,IAUUS,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAVqB1B,EAAAgE,YAAU,CAAxBC,EAAQrC,M,WAAzBjD,EAAAA,EAAAA,IAUUwD,EAAA,CAVkCL,IAAKF,GAAC,C,kBACjD,IAAqG,CAAtB,WAAfqC,EAAOC,OAAI,WAA3ElD,EAAAA,EAAAA,IAAqG,OAArGmD,EAA0F,WAAI,WAC9FnD,EAAAA,EAAAA,IAA8E,OAA9EoD,EAAiE,YAEjEtF,EAAAA,EAAAA,IAGYwD,EAAA,M,kBAFX,IAA0B,EAA1BjE,EAAAA,EAAAA,GAA0B,WAAAkE,EAAAA,EAAAA,IAAnB0B,EAAOpD,MAAI,IAClBxC,EAAAA,EAAAA,GAAwC,UAAAkE,EAAAA,EAAAA,IAAlC0B,EAAOI,UAAUC,KAAK,OAAD,M,YAG5BxF,EAAAA,EAAAA,IAA4EyF,EAAA,CAA9DhG,KAAK,MAAOgC,QAAKR,GAAEC,EAAAwE,gBAAgBP,EAAOQ,K,wPChShE,SAASC,EAActI,GACtB,OAAOC,aAAaC,cACb,IAAK,UAEV,OAAOqI,EAAqBvI,GAC7B,IAAK,eACK,OAGZ,CAEAI,eAAemI,EAAqBvI,GAEnC,MAAMK,EAAMC,EAAAA,EAAAA,OAAAA,iBAAAA,KAGNC,EAAQN,aAAaO,QAAQ,SAG7BC,EAAO,GAAEJ,sBAAwBE,IAGpC,IAAIiI,EAAkBvI,aAAaO,QAAQ,mBAE3C,GAAsB,MAAnBgI,IAA4BxI,EAAa,CAExCwI,EAAkB7H,KAAKC,MAAM4H,GAE7B,MAAM3H,EAAQ,IAAIC,KACZC,EAAY,IAAID,KAAK0H,EAAgBxH,MAE3C,GAAGH,EAAMI,gBAAkBF,EAAUE,eAEjC,OAAO,IAAIC,SAASC,IAChBA,EAAQsH,EAA2BD,EAAgBE,YAAY,GAG3E,CAEH,IAAIA,EAAa,CAAC,EAClB,OAAOnH,EAAAA,EAAAA,IAAUd,GACfb,MAAM4B,IACNkH,EAAalH,EAASC,KAGb,MAAMZ,EAAQ,IAAIC,KACZ0H,EAAkB,CACpBxH,KAAMH,EACN6H,WAAYlH,EAASC,MAOlC,OAJSxB,aAAayB,QAAQ,kBAAmBf,KAAKgB,UAAU6G,IAEhEE,EAAaD,EAA2BC,GAEjCA,CAAU,IAEjB9G,OAAOC,IAaP,GAZIA,EAAML,WAEkB,YAAvBK,EAAML,SAASC,MAIa,WAAvBI,EAAML,SAASC,QAFvBK,EAAAA,EAAAA,cAQCD,EAAME,KACR,OAAO,IAAIb,SAASc,IACnBA,EAAO,CACNH,MAAOA,EAAME,MACZ,GAEJ,GAEH,CAGA,SAAS0G,EAA2BC,GACnC,OAAOA,CACR,CAEA,U,wBD3DC,SAAeC,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,aACNmE,WAAY,CACXC,UAAS,KACTC,WAAU,KACVC,QAAO,KACPC,QAAO,KACPC,WAAU,KACVC,OAAM,KACNC,UAAS,KACTC,WAAU,KACVC,SAAQ,KACRC,SAAQ,KACRC,YAAW,KACXC,cAAa,KACbC,SAAQ,KACRC,YAAW,KACXC,aAAY,KACZC,oBAAmB,KACnBC,QAAO,KACPC,WAAUA,EAAAA,IAEXC,QACC,MAAO,CAEP,CACD,EACAC,QAAS,CACRnG,cAAcoG,IACbC,EAAAA,EAAAA,IAAiB,GAAMtK,MAAMuK,IAC5BC,KAAK/I,cAAgB8I,CAAG,IAGtBF,GACFG,KAAKC,OAAO,iBAAiB,KAC5BC,YAAW,KACVL,EAAMM,OAAOC,UAAU,GACrB,IAAI,GAGV,EACAC,oBACCC,GAAc,GAAM9K,MAAMuK,IACzBC,KAAKxC,WAAauC,CAAG,GAEvB,EACAhD,oBAAoBwD,GACnBP,KAAKpD,iBAAmB2D,CACzB,EACAvG,eACCgG,KAAKQ,kBAAoB,GACzBR,KAAKK,oBACLL,KAAKpD,kBAAmB,CACzB,EACAoB,gBAAgBC,GACZ+B,KAAKQ,kBAAkBC,SAASxC,GAClC+B,KAAKQ,kBAAkBE,OAAOV,KAAKQ,kBAAkBG,QAAQ1C,GAAK,GAElE+B,KAAKQ,kBAAkBI,KAAK3C,EAE9B,EACAhB,oBACC,MAAMjB,EAAUgE,KAAKa,MAAMC,eAAeC,IAAIC,MACxC9E,EAAU8D,KAAKa,MAAMI,WAAWF,IAAIC,MACpCE,EAAelB,KAAKQ,kBAEpBvK,EAAM+J,KAAKmB,KACXhL,EAAQN,aAAaO,QAAQ,SAE7BgL,EAAY,IAAIC,QACtBD,EAAUE,OAAO,eAAgB,qCAEjC,MAAMC,EAAa,IAAIC,gBACvBD,EAAWD,OAAO,QAASnL,GAC3BoL,EAAWD,OAAO,UAAWpF,GAC7BqF,EAAWD,OAAO,eAAgB/K,KAAKgB,UAAU2J,IACjDK,EAAWD,OAAO,UAAWtF,GAE7B,MAAMyF,EAAiB,CACtBC,OAAQ,OACRC,QAASP,EACTQ,KAAML,EACNM,SAAU,UAGXC,MAAM7L,EAAM,qBAAsBwL,GAChCjM,MAAK4B,GAAYA,EAAS2K,SAC1BvM,MAAKwM,IACL,GAAoB,MAAjBA,EAAOzB,OAUT,YAAoB0B,GAAhBD,EAAOvK,WACVyK,EAAAA,EAAAA,iBACC,sCACA,kEACA,SACAC,EAAAA,KACA,EACAH,EAAOvK,YAGmBwK,GAAjBD,EAAOI,YACjBF,EAAAA,EAAAA,iBACC,sCACA,+DACA,SACAC,EAAAA,UAIDD,EAAAA,EAAAA,iBACC,sCACA,kEACA,SACAC,EAAAA,KACA,EACAH,GAlCFE,EAAAA,EAAAA,iBACC,qBACA,oCACA,UACAG,EAAAA,KAEDrC,KAAKpD,kBAAmB,EACxBoD,KAAKvG,eA+BN,GAEH,GAEDpC,OACC,MAAO,CACNJ,cAAe,GACfuG,WAAY,GACZhC,iBAAkBA,EAAAA,WAClBoB,kBAAkB,EAClB0F,iBAAkB,GAClB/H,WAAW,EACXoC,kBAAmB,KAErB,EACA4F,UACCvC,KAAKrD,kBAAoBqD,KAAKa,MAAM2B,KAAKzB,IACzCf,KAAKzF,WAAY,GAEjBuF,EAAAA,EAAAA,KAAmBtK,MAAMuK,IACxBC,KAAK/I,cAAgB8I,EAErBC,KAAKzF,WAAY,CAAK,IAGvB+F,IAAgB9K,MAAMuK,IACrBC,KAAKxC,WAAauC,CAAG,IAGtB0C,SAASC,iBAAiB,gBAAgB,MACzC5C,EAAAA,EAAAA,KAAmBtK,MAAMuK,IACxBC,KAAK/I,cAAgB8I,CAAG,IAGzBO,IAAgB9K,MAAMuK,IACrBC,KAAKxC,WAAauC,CAAG,GACpB,GAEJ,I,cEhMF,MAAM4C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,G,wFCqLa9K,MAAM,U,GAIIA,MAAM,U,mBAINA,MAAM,U,mBAMhBA,MAAM,W,6TAnClBQ,EAAAA,EAAAA,IAcYC,EAAA,CAdDT,MAAM,YAAYU,YAAA,I,mBAC5B,IAYa,EAZbF,EAAAA,EAAAA,IAYaG,EAAA,M,kBAVZ,IAGc,EAHdH,EAAAA,EAAAA,IAGcI,EAAA,CAHDX,KAAK,SAAO,C,kBACxB,IAA2E,EAA3EO,EAAAA,EAAAA,IAA2EuK,EAAA,CAA5D/K,MAAM,WAAWgL,KAAK,SAAU/I,QAAOP,EAAAuJ,K,qBACtDzK,EAAAA,EAAAA,IAA4DuK,EAAA,CAA7C/K,MAAM,UAAWiC,QAAOP,EAAAuJ,K,6BAGbvJ,EAAAkC,aAAaM,U,WAGxC7D,EAAAA,EAAAA,IAAwDU,EAAA,CAAAyC,IAAA,I,kBAAtC,IAA0B,mBAAvB9B,EAAAkC,aAAaM,SAAO,M,SAHM,WAAtC7D,EAAAA,EAAAA,IAEYU,EAAA,CAAAyC,IAAA,I,kBADR,IAA4E,EAA5EhD,EAAAA,EAAAA,IAA4E0K,EAAA,CAAxDC,UAAU,EAAM3F,MAAA,mB,0BAOhDhF,EAAAA,EAAAA,IAsBWQ,EAAA,CAtBEhB,MAAM,qBAAsBiB,YAAY,G,mBACjD,IAEU,EAFVT,EAAAA,EAAAA,IAEUc,EAAA,CAFKrB,KAAK,QAASsB,aAAUC,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAAC,cAAcF,K,mBAC5D,IAA+C,EAA/CjB,EAAAA,EAAAA,IAA+CoB,M,OAG1C7B,EAAAA,EAAAA,GAaM,MAbNsC,EAaM,gBAXFK,EAAAA,EAAAA,IASMS,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IATmB1B,EAAAyC,UAAQ,CAApBiH,EAAM9H,M,WAAnBZ,EAAAA,EAAAA,IASM,OAT8Bc,IAAKF,GAAC,CACyC,QAAhB8H,EAAKC,SAAM,WAA1E3I,EAAAA,EAAAA,IAGM,O,MAHAT,QAAKT,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAA4J,YAAY7J,IAASzB,MAAM,kB,EACpCD,EAAAA,EAAAA,GAAqC,IAArCiD,GAAqCiB,EAAAA,EAAAA,IAAjBmH,EAAKC,QAAM,IAC/BtL,EAAAA,EAAAA,GAAgD,OAA3CC,MAAM,SAASuL,UAAQH,EAAKhH,S,0BAErC1B,EAAAA,EAAAA,IAGM,O,MAHAT,QAAKT,EAAA,KAAAA,EAAA,GAAAC,GAAEC,EAAA4J,YAAY7J,IAASzB,MAAM,c,EACpCD,EAAAA,EAAAA,GAAqC,IAArCI,GAAqC8D,EAAAA,EAAAA,IAAjBmH,EAAKC,QAAM,IAC/BtL,EAAAA,EAAAA,GAAgD,OAA3CC,MAAM,SAASuL,UAAQH,EAAKhH,S,2BAK7CrE,EAAAA,EAAAA,GAEM,MAFNkD,EAEM,EADFlD,EAAAA,EAAAA,GAAyH,SAAjHyL,UAAOhK,EAAA,KAAAA,EAAA,OAAAiK,IAAE/J,EAAAgK,eAAAhK,EAAAgK,iBAAAD,IAAe7F,KAAK,OAAO5F,MAAM,gBAAgBsF,YAAY,gCAAgCqG,SAAA,I,mGC5MnH,MAAMC,UAAqB,KAC9B1N,YAAY2N,GACR,GAAyB,qBAAdC,YAA8BA,UAAUC,UAC/C,MAAM7D,KAAK8D,YAAY,+CAE3B,QAAuB7B,IAAnB0B,EAAQI,aACF/D,KAAKgE,UAAUL,EAAQI,aAE5B,GAAIJ,EAAQM,UACPjE,KAAKgE,UAAUL,EAAQM,SAE5B,KAAIN,EAAQO,MAgBb,MAAM,IAAIC,MAAM,oBAfhB,GAA6B,qBAAlBC,cAWP,MAAMpE,KAAK8D,YAAY,oEAVvB,IACI,MAAMO,cAAoBvC,MAAM6B,EAAQO,QAAQG,OAC1CC,EAAqB,IAAIF,cAAc,CAAE,CAACC,EAAK3G,MAAO2G,UACtDT,UAAUC,UAAUU,MAAM,CAACD,GACrC,CACA,MAAOE,GACH,MAAM,IAAIL,MAAM,wBACpB,CAQR,CACJ,CACAnO,aACI,GAAyB,qBAAd4N,YAA8BA,UAAUC,UAC/C,MAAM7D,KAAK8D,YAAY,+CAE3B,GAA6B,qBAAlBM,cAaP,OAAOpE,KAAKyE,WAZZ,IACI,MAAMC,QAAuBd,UAAUC,UAAUc,OAC3CjH,EAAOgH,EAAe,GAAGE,MAAM,GAC/BC,QAAsBH,EAAe,GAAGI,QAAQpH,GAChDrG,QAAa2I,KAAK+E,aAAaF,EAAenH,GACpD,MAAO,CAAEsD,MAAO3J,EAAMqG,OAC1B,CACA,MAAO8G,GACH,OAAOxE,KAAKyE,UAChB,CAKR,CACAzO,iBACI,GAAyB,qBAAd4N,YACNA,UAAUC,YACVD,UAAUC,UAAUY,SACrB,MAAMzE,KAAK8D,YAAY,wDAE3B,MAAMhB,QAAac,UAAUC,UAAUY,WACvC,MAAO,CAAEzD,MAAO8B,EAAMpF,KAAM,aAChC,CACA1H,gBAAgB8M,GACZ,GAAyB,qBAAdc,YACNA,UAAUC,YACVD,UAAUC,UAAUG,UACrB,MAAMhE,KAAK8D,YAAY,6DAErBF,UAAUC,UAAUG,UAAUlB,EACxC,CACAiC,aAAaF,EAAenH,GACxB,OAAO,IAAI5G,SAAQ,CAACC,EAASa,KACzB,MAAMoN,EAAS,IAAIC,WACfvH,EAAK+C,SAAS,SACduE,EAAOE,cAAcL,GAGrBG,EAAOG,WAAWN,GAEtBG,EAAOI,UAAY,KACf,MAAMC,EAAIL,EAAOhD,OACjBjL,EAAQsO,EAAE,EAEdL,EAAOM,QAAUC,IACb3N,EAAO2N,EAAE,CACZ,GAET,ECnFJ,MAAMC,GAAY,QAAe,YAAa,CAC1CjQ,IAAK,IAAM,IAAImO,I,uBFiBlB,SAAenF,EAAAA,EAAAA,IAAgB,CAC9BlE,KAAM,aACNmE,WAAY,CACXC,UAAS,KACTC,WAAU,KACDa,aAAY,KACZC,oBAAmB,KACnBiG,gBAAe,KACfC,cAAaA,EAAAA,IAEjBC,MAAO,CACHjK,aAAc,CACVgC,KAAMkI,OACNC,UAAU,IAGxBxO,OACC,MAAO,CACM4E,SAAU,GACV6J,gBAAiB,KACjBC,eAAgB/F,KAAKtE,aAAauC,GAClC+H,SAAUA,EAAAA,WAExB,EACApG,QAAS,CACC5J,oBACI,IAAIiQ,EAAMpG,MAAMM,OAAO+F,UAGvB,GAAID,EAAIE,MAAM,yBACV,OAAO,EAIXF,EAAMA,EAAI9J,QAAQ,SAAU,KAG5B,IAAIiK,EAAWH,EAAII,UAAU,EAAG,KAC5BJ,EAAI3L,OAAS,MACb8L,GAAY,OAIhBA,EAAWA,EAASjK,QAAQ,MAAO,KAEnC,MAAM6F,QAAe1M,EAAAA,GAAAA,YAAwB,CACzCgR,MAAO,qBACPC,QAASH,EACTzC,QAAS,CACL,CACI2C,MAAO,mBAEX,CACIA,MAAO,UACPhJ,MAAOjI,EAAAA,GAAAA,WAKE,IAAjB2M,EAAOwE,OACPhB,EAAUjB,MAAM,CACZR,OAAQkC,GAGpB,EACAxM,cAAcoG,IACVC,EAAAA,EAAAA,IAAiB,GAAMtK,MAAMuK,IACtBF,GACCA,EAAM4G,OAAOrG,WAIjB,MAAM1E,EAAeqE,EAAI2G,QAAQC,GACtBA,EAAK1I,KAAO+B,KAAK+F,iBAG5B/F,KAAK/D,SAAWP,EAAa,GAAGO,SAChC+D,KAAK/D,SAAS2K,MAAK,CAACC,EAAGC,IACZ,IAAIpQ,KAAKmQ,EAAEjQ,MAAQ,IAAIF,KAAKoQ,EAAElQ,OACvC,GAEV,EACA4M,cAAc3D,GACQ,UAAdA,EAAMvE,MACN0E,KAAK+G,YAAYlH,EAAMM,OAAOa,OAC9BnB,EAAMM,OAAOa,MAAQ,GAE7B,EACA+F,YAAYR,GACR,MAAMtQ,EAAM+J,KAAKmB,KACvBhL,EAAQN,aAAaO,QAAQ,SAE7BgL,EAAY,IAAIC,QACtBD,EAAUE,OAAO,eAAgB,qCAEjC,MAAMC,EAAa,IAAIC,gBACvBD,EAAWD,OAAO,QAASnL,GAC3BoL,EAAWD,OAAO,UAAWiF,GAC7BhF,EAAWD,OAAO,eAAgBtB,KAAK+F,gBAEvC,MAAMtE,EAAiB,CACtBC,OAAQ,OACRC,QAASP,EACTQ,KAAML,EACNM,SAAU,UAGXC,MAAM7L,EAAM,oBAAqBwL,GAC/BjM,MAAK4B,GAAYA,EAAS2K,SAC1BvM,MAAKwM,IACa,GAAe,OAAXA,EAGA,OAAO,EAFPhC,KAAKvG,eAGT,GAEZ,GAEV8I,UACUvC,KAAK+F,eAAiB/F,KAAKtE,aAAauC,GAExC+B,KAAK/D,SAAW+D,KAAKtE,aAAaO,SAClC+D,KAAK/D,SAAS2K,MAAK,CAACC,EAAGC,IACZ,IAAIpQ,KAAKmQ,EAAEjQ,MAAQ,IAAIF,KAAKoQ,EAAElQ,QAIzCoJ,KAAK/D,SAAS+K,SAAS9D,IAEnB,MAAM+D,EAAW,uBAEd/D,EAAKhH,QAAQiK,MAAM,OAClBjD,EAAKhH,QAAUgH,EAAKhH,QAAQC,QAAQ,MAAO,sBAE3C+G,EAAKhH,QAAUgH,EAAKhH,QAAQC,QAAQ8K,EAAU,mEAIlD/D,EAAKhH,QAAUgH,EAAKhH,QAAQC,QAAQ,MAAO,QAAQ,IAGvDsG,SAASC,iBAAiB,gBAAgB,KACtC1C,KAAKvG,eAAe,GAElC,I,cG7JF,MAAMkJ,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,G","sources":["webpack://papillon/./node_modules/@capacitor/action-sheet/dist/esm/definitions.js","webpack://papillon/./node_modules/@capacitor/action-sheet/dist/esm/index.js","webpack://papillon/./src/functions/fetch/GetConversations.js","webpack://papillon/./src/views/chat/ChatView.vue","webpack://papillon/./src/functions/fetch/GetRecipients.js","webpack://papillon/./src/views/chat/ChatView.vue?5fff","webpack://papillon/./src/views/chat/ConversationView.vue","webpack://papillon/./node_modules/@capacitor/clipboard/dist/esm/web.js","webpack://papillon/./node_modules/@capacitor/clipboard/dist/esm/index.js","webpack://papillon/./src/views/chat/ConversationView.vue?d7f4"],"sourcesContent":["export var ActionSheetButtonStyle;\n(function (ActionSheetButtonStyle) {\n    /**\n     * Default style of the option.\n     *\n     * @since 1.0.0\n     */\n    ActionSheetButtonStyle[\"Default\"] = \"DEFAULT\";\n    /**\n     * Style to use on destructive options.\n     *\n     * @since 1.0.0\n     */\n    ActionSheetButtonStyle[\"Destructive\"] = \"DESTRUCTIVE\";\n    /**\n     * Style to use on the option that cancels the Action Sheet.\n     * If used, should be on the latest availabe option.\n     *\n     * @since 1.0.0\n     */\n    ActionSheetButtonStyle[\"Cancel\"] = \"CANCEL\";\n})(ActionSheetButtonStyle || (ActionSheetButtonStyle = {}));\n/**\n * @deprecated Use `ActionSheetButtonStyle`.\n * @since 1.0.0\n */\nexport const ActionSheetOptionStyle = ActionSheetButtonStyle;\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst ActionSheet = registerPlugin('ActionSheet', {\n    web: () => import('./web').then(m => new m.ActionSheetWeb()),\n});\nexport * from './definitions';\nexport { ActionSheet };\n//# sourceMappingURL=index.js.map","// modules\nimport axios from 'axios';\n\n// vars\nimport { app } from '@/main.ts'\nimport GetToken from '@/functions/login/GetToken.js';\n\n// main function\nfunction getConversations(forceReload) {\n\tswitch(localStorage.loginService) {\n        case \"pronote\":    \n            // return pronote conversations\n\t\t\treturn getPronoteConversations(forceReload);\n\t\tcase \"ecoledirecte\":\n            return;\n    }\n}\n\nasync function getPronoteConversations(forceReload) {\n\t// gather vars\n\tconst API = app.config.globalProperties.$api;\n\n\t// get token\n\tconst token = localStorage.getItem('token');\n\n\t// construct url\n\tconst URL = `${API}/discussions?token=${token}`;\n\n\t// check if cached\n    let convCache = localStorage.getItem('ConversationsCache');\n\n    if(convCache != null && !forceReload) {\n        // grade is cached, check if it's up to date\n        convCache = JSON.parse(convCache);\n\n        const today = new Date();\n        const cacheDate = new Date(convCache.date);\n\n        if(today.toDateString() == cacheDate.toDateString()) {\n            // grade is up to date, return it\n            return new Promise((resolve) => {\n                resolve(constructPronoteConversations(convCache.conversations));\n            });\n        }\n    }\n\n\tlet Conversations = {};\n\treturn axios.get(URL)\n\t\t.then((response) => {\n\t\t\tConversations = response.data;\n\n\t\t\t// save conversations to localstorage cache with today's date\n            const today = new Date();\n            const convCache = {\n                date: today,\n                conversations: response.data\n            }\n\n            localStorage.setItem('ConversationsCache', JSON.stringify(convCache));\n\n\t\t\tConversations = constructPronoteConversations(Conversations);\n\t\t\t\n\t\t\treturn Conversations;\n\t\t})\n\t\t.catch((error) => {\n\t\t\tif (error.response) {\n\t\t\t\t// check if \"notfound\" or \"expired\"\n\t\t\t\tif (error.response.data == \"notfound\") {\n\t\t\t\t\t// get new token\n\t\t\t\t\tGetToken();\n\t\t\t\t}\n\t\t\t\telse if (error.response.data == \"expired\") {\n\t\t\t\t\t// get new token\n\t\t\t\t\tGetToken();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(error.code) {\n\t\t\t\treturn new Promise((reject) => {\n\t\t\t\t\treject({\n\t\t\t\t\t\terror: error.code\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n}\n\n// pronote : construct Conversations\nfunction constructPronoteConversations(Conversations) {\n\treturn Conversations\n}\n\nexport default getConversations;","<script>\n\timport {\n\t\tdefineComponent\n\t} from 'vue';\n\timport {\n\t\tIonHeader,\n\t\tIonToolbar,\n\t\tIonList,\n\t\tIonItem,\n\t\tIonNavLink,\n\t\tIonFab,\n\t\tIonButton,\n\t\tIonModal,\n\t\tIonButtons,\n\t\tIonTitle,    \n\t\tIonCheckbox,\n\t\tIonRadioGroup,\n\t\tIonInput,\n\t\tIonTextarea,\n\t\tIonRefresher,\n\t\tIonRefresherContent,\n\t\tIonPage,\n\t\tIonSpinner\n\t} from '@ionic/vue';\n\n\timport displayToast from '@/functions/utils/displayToast.js';\n\n\timport GetConversations from '@/functions/fetch/GetConversations.js';\n\timport GetRecipients from '@/functions/fetch/GetRecipients.js';\n\n\timport ConversationView from './ConversationView.vue';\n\n\timport { checkmark, alertCircle } from 'ionicons/icons';\n\n\texport default defineComponent({\n\t\tname: 'FolderPage',\n\t\tcomponents: {\n\t\t\tIonHeader,\n\t\t\tIonToolbar,\n\t\t\tIonList,\n\t\t\tIonItem,\n\t\t\tIonNavLink,\n\t\t\tIonFab,\n\t\t\tIonButton,\n\t\t\tIonButtons,\n\t\t\tIonTitle,\n\t\t\tIonModal,    \n\t\t\tIonCheckbox,\n\t\t\tIonRadioGroup,\n\t\t\tIonInput,\n\t\t\tIonTextarea,\n\t\t\tIonRefresher,\n\t\t\tIonRefresherContent,\n\t\t\tIonPage,\n\t\t\tIonSpinner\n\t\t},\n\t\tsetup() {\n\t\t\treturn {\n\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\thandleRefresh(event) {\n\t\t\t\tGetConversations(true).then((res) => {\n\t\t\t\t\tthis.conversations = res;\n\t\t\t\t})\n\n\t\t\t\tif(event) {\n\t\t\t\t\tthis.$watch('conversations', () => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tevent.target.complete();\n\t\t\t\t\t\t}, 200);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\trefreshRecipients() {\n\t\t\t\tGetRecipients(true).then((res) => {\n\t\t\t\t\tthis.recipients = res;\n\t\t\t\t})\n\t\t\t},\n\t\t\tsetnewConvModalOpen(status) {\n\t\t\t\tthis.newConvModalOpen = status;\n\t\t\t},\n\t\t\tstartNewChat() {\n\t\t\t\tthis.checkedRecipients = [];\n\t\t\t\tthis.refreshRecipients();\n\t\t\t\tthis.newConvModalOpen = true;\n\t\t\t},\n\t\t\tselectRecipient(id) {\n\t\t\t\tif(this.checkedRecipients.includes(id)) {\n\t\t\t\t\tthis.checkedRecipients.splice(this.checkedRecipients.indexOf(id), 1);\n\t\t\t\t} else {\n\t\t\t\t\tthis.checkedRecipients.push(id);\n\t\t\t\t}\n\t\t\t},\n\t\t\tstartConversation() {\n\t\t\t\tconst subject = this.$refs.newChatSubject.$el.value;\n\t\t\t\tconst content = this.$refs.newChatMsg.$el.value;\n\t\t\t\tconst recipientsId = this.checkedRecipients;\n\n\t\t\t\tconst API = this.$api;\n\t\t\t\tconst token = localStorage.getItem('token');\n\n\t\t\t\tconst myHeaders = new Headers();\n\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\t\t\t\t\t\t\t\t\n\t\t\t\tconst urlencoded = new URLSearchParams();\n\t\t\t\turlencoded.append(\"token\", token);\n\t\t\t\turlencoded.append(\"content\", content);\n\t\t\t\turlencoded.append(\"recipientsId\", JSON.stringify(recipientsId));\n\t\t\t\turlencoded.append(\"subject\", subject);\n\n\t\t\t\tconst requestOptions = {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: myHeaders,\n\t\t\t\t\tbody: urlencoded,\n\t\t\t\t\tredirect: 'follow'\n\t\t\t\t};\n\n\t\t\t\tfetch(API + \"/discussion/create\", requestOptions)\n\t\t\t\t\t.then(response => response.json())\n\t\t\t\t\t.then(result => {\n\t\t\t\t\t\tif(result.status == \"ok\") {\n\t\t\t\t\t\t\tdisplayToast.presentToastFull(\n\t\t\t\t\t\t\t\t\"Conversation créée\",\n\t\t\t\t\t\t\t\t\"La conversation a bien été créée.\",\n\t\t\t\t\t\t\t\t\"success\",\n\t\t\t\t\t\t\t\tcheckmark\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.newConvModalOpen = false;\n\t\t\t\t\t\t\tthis.handleRefresh();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (result.error != undefined) {\n\t\t\t\t\t\t\t\tdisplayToast.presentToastFull(\n\t\t\t\t\t\t\t\t\t\"Impossible de créer la conversation\",\n\t\t\t\t\t\t\t\t\t\"Une erreur est survenue lors de la création de la conversation.\",\n\t\t\t\t\t\t\t\t\t\"danger\",\n\t\t\t\t\t\t\t\t\talertCircle,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\tresult.error\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t} else if (result.errors != undefined) {\n\t\t\t\t\t\t\t\tdisplayToast.presentToastFull(\n\t\t\t\t\t\t\t\t\t\"Impossible de créer la conversation\",\n\t\t\t\t\t\t\t\t\t\"Veuillez remplir tous les champs pour créer la conversation.\",\n\t\t\t\t\t\t\t\t\t\"danger\",\n\t\t\t\t\t\t\t\t\talertCircle\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdisplayToast.presentToastFull(\n\t\t\t\t\t\t\t\t\t\"Impossible de créer la conversation\",\n\t\t\t\t\t\t\t\t\t\"Une erreur est survenue lors de la création de la conversation.\",\n\t\t\t\t\t\t\t\t\t\"danger\",\n\t\t\t\t\t\t\t\t\talertCircle,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\tresult\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tconversations: [],\n\t\t\t\trecipients: [],\n\t\t\t\tConversationView: ConversationView,\n\t\t\t\tnewConvModalOpen: false,\n\t\t\t\tcheckedRecipient: [],\n\t\t\t\tisLoading: false,\n\t\t\t\tpresentingElement: null,\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tthis.presentingElement = this.$refs.page.$el;\n\t\t\tthis.isLoading = true;\n\n\t\t\tGetConversations().then((res) => {\n\t\t\t\tthis.conversations = res;\n\n\t\t\t\tthis.isLoading = false;\n\t\t\t})\n\n\t\t\tGetRecipients().then((res) => {\n\t\t\t\tthis.recipients = res;\n\t\t\t})\n\n\t\t\tdocument.addEventListener('tokenUpdated', () => {\n\t\t\t\tGetConversations().then((res) => {\n\t\t\t\t\tthis.conversations = res;\n\t\t\t\t})\n\n\t\t\t\tGetRecipients().then((res) => {\n\t\t\t\t\tthis.recipients = res;\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\t});\n</script>\n\n<template>\n\t<ion-page ref=\"page\">\n\t\t<IonHeader class=\"AppHeader\" translucent>\n\t\t\t<IonToolbar>\n\n\t\t\t\t<ion-buttons slot=\"start\">\n\t\t\t\t\t<ion-menu-button color=\"dark\"></ion-menu-button>\n\t\t\t\t</ion-buttons>\n\n\t\t\t\t<ion-title>Conversations</ion-title>\n\n\t\t\t</IonToolbar>\n\t\t</IonHeader>\n\n\t\t<ion-content :fullscreen=\"true\">\n\t\t\t<ion-header collapse=\"condense\">\n\t\t\t\t<ion-toolbar>\n\t\t\t\t\t<ion-title size=\"large\">Conversations</ion-title>\n\t\t\t\t</ion-toolbar>\n\t\t\t</ion-header>\n\n\t\t\t<ion-refresher slot=\"fixed\" @ionRefresh=\"handleRefresh($event)\">\n\t\t\t\t<ion-refresher-content></ion-refresher-content>\n\t\t\t</ion-refresher>\n\n\t\t\t<IonFab slot=\"fixed\" vertical=\"bottom\" horizontal=\"end\" class=\"newCoursBtnFab\">\n\t\t\t\t<ion-button @click=\"startNewChat()\" size=\"large\" shape=\"round\" class=\"newCoursBtn\" mode=\"md\">\n\t\t\t\t\t<span class=\"material-symbols-outlined mdls\" slot=\"icon-only\">add</span>\n\t\t\t\t</ion-button>\n\t\t\t</IonFab>\n\n\t\t\t<Transition name=\"NoCoursAnim\">\n\t\t\t\t<div class=\"NoCours\" v-if=\"this.conversations.length == 0 && !isLoading\">\n\t\t\t\t\t<span class=\"material-symbols-outlined mdls\">forum</span>\n\t\t\t\t\t<h2>Aucune conversation n'a été trouvée.</h2>\n\t\t\t\t\t<p>Essayez d'envoyer un message à quelqu'un dans votre établissement.</p>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"NoCours\" v-else-if=\"this.conversations.length == 0 && isLoading\">\n\t\t\t\t\t<IonSpinner></IonSpinner>\n\t\t\t\t\t<br/>\n\t\t\t\t\t<h2>Téléchargement des conversations...</h2>\n\t\t\t\t\t<p>Veuillez patienter pendant qu'on récupère les conversations depuis nos serveurs...</p>\n\t\t\t\t</div>\n\t\t\t</Transition>\n\n\t\t\t<IonList>\n\t\t\t\t<IonNavLink v-for=\"(chat, i) in conversations\" :key=\"i\" router-direction=\"forward\" :component=\"ConversationView\" :componentProps=\"{conversation: chat}\">\t\t\n\t\t\t\t\t\t<IonItem button>\n\t\t\t\t\t\t\t<span class=\"material-symbols-outlined mdls\" slot=\"start\">forum</span>\n\t\t\t\t\t\t\t<ion-label>\n\t\t\t\t\t\t\t\t<h2>{{ chat.subject }}</h2>\n\t\t\t\t\t\t\t\t<p>{{ chat.messages[chat.messages.length - 1].content.replace(\"<br/>\", \" \") }}</p>\n\t\t\t\t\t\t\t\t<small>{{ chat.creator }}</small>\n\t\t\t\t\t\t\t</ion-label>\n\t\t\t\t\t\t</IonItem>\n\t\t\t\t</IonNavLink>\n\t\t\t</IonList>\n\n\t\t\t<br /><br /><br /><br /><br />\n\n\t\t\t<IonModal :presenting-element=\"presentingElement\" class=\"newChatModal\" :is-open=\"newConvModalOpen\">\n\t\t\t\t<IonHeader translucent>\n\t\t\t\t\t<IonToolbar>\n\t\t\t\t\t\t<IonButtons slot=\"start\">\n\t\t\t\t\t\t\t<IonButton @click=\"setnewConvModalOpen(false)\">Annuler</IonButton>\n\t\t\t\t\t\t</IonButtons>\n\t\t\t\t\t\t<IonTitle>Nouvelle conversation</IonTitle>\n\t\t\t\t\t\t<IonButtons slot=\"end\">\n\t\t\t\t\t\t\t<IonButton color=\"primary\" @click=\"startConversation()\">Créer</IonButton>\n\t\t\t\t\t\t</IonButtons>\n\t\t\t\t\t</IonToolbar>\n\t\t\t\t</IonHeader>\n\t\t\t\t<ion-content>\n\t\t\t\t\t<IonList inset>\n\t\t\t\t\t\t<IonItem>\n\t\t\t\t\t\t\t<IonInput ref=\"newChatSubject\" placeholder=\"Sujet\"></IonInput>\n\t\t\t\t\t\t</IonItem>\n\t\t\t\t\t\t<IonItem>\n\t\t\t\t\t\t\t<IonTextarea class=\"newChatMsg\" ref=\"newChatMsg\" placeholder=\"Contenu du 1er message\"></IonTextarea>\n\t\t\t\t\t\t</IonItem>\n\t\t\t\t\t</IonList>\n\n\t\t\t\t\t<IonList style=\"padding-bottom: 100px;\">\n\t\t\t\t\t\t<ion-radio-group>\n\t\t\t\t\t\t\t<IonItem v-for=\"(person, i) in recipients\" :key=\"i\">\n\t\t\t\t\t\t\t\t<span class=\"material-symbols-outlined mdls\" slot=\"start\" v-if=\"person.type == 'teacher'\">face</span>\n\t\t\t\t\t\t\t\t<span class=\"material-symbols-outlined mdls\" slot=\"start\" v-else>person</span>\n\n\t\t\t\t\t\t\t\t<ion-label>\n\t\t\t\t\t\t\t\t\t<h2>{{ person.name }}</h2>\n\t\t\t\t\t\t\t\t\t<p>{{ person.functions.join(\", \") }}</p>\n\t\t\t\t\t\t\t\t</ion-label>\n\n\t\t\t\t\t\t\t\t<ion-checkbox slot=\"end\" @click=\"selectRecipient(person.id)\"></ion-checkbox>\n\t\t\t\t\t\t\t</IonItem>\n\t\t\t\t\t\t</ion-radio-group>\n\t\t\t\t\t</IonList>\n\t\t\t\t</ion-content>\n\t\t\t</IonModal>\n\n\t\t</ion-content>\n\t</ion-page>\n</template>\n\n<style scoped>\n\tion-chip span {\n\t\tmargin-right: 5px;\n\t}\n\n\t.newCoursBtn {\n\t\twidth: 56px;\n\t\theight: 56px;\n\t}\n\n\t.newChatMsg {\n\t\tpadding-top: 10px;\n\t\theight: 100px;\n\t}\n</style>","// modules\nimport axios from 'axios';\n\n// vars\nimport { app } from '@/main.ts'\nimport GetToken from '@/functions/login/GetToken.js';\n\n// main function\nfunction getRecipients(forceReload) {\n\tswitch(localStorage.loginService) {\n        case \"pronote\":\n            // return pronote recipients\n\t\t\treturn getPronoteRecipients(forceReload);\n\t\tcase \"ecoledirecte\":\n            return;\n    }\n\n}\n\nasync function getPronoteRecipients(forceReload) {\n\t// gather vars\n\tconst API = app.config.globalProperties.$api;\n\n\t// get token\n\tconst token = localStorage.getItem('token');\n\n\t// construct url\n\tconst URL = `${API}/recipients?token=${token}`;\n\n\t// check if cached\n    let recipientsCache = localStorage.getItem('RecipientsCache');\n\n    if(recipientsCache != null && !forceReload) {\n        // grade is cached, check if it's up to date\n        recipientsCache = JSON.parse(recipientsCache);\n\n        const today = new Date();\n        const cacheDate = new Date(recipientsCache.date);\n\n        if(today.toDateString() == cacheDate.toDateString()) {\n            // grade is up to date, return it\n            return new Promise((resolve) => {\n                resolve(constructPronoteRecipients(recipientsCache.Recipients));\n            });\n        }\n    }\n\n\tlet Recipients = {};\n\treturn axios.get(URL)\n\t\t.then((response) => {\n\t\t\tRecipients = response.data;\n\n\t\t\t// save Recipients to localstorage cache with today's date\n            const today = new Date();\n            const recipientsCache = {\n                date: today,\n                Recipients: response.data\n            }\n\n            localStorage.setItem('RecipientsCache', JSON.stringify(recipientsCache));\n\n\t\t\tRecipients = constructPronoteRecipients(Recipients);\n\t\t\t\n\t\t\treturn Recipients;\n\t\t})\n\t\t.catch((error) => {\n\t\t\tif (error.response) {\n\t\t\t\t// check if \"notfound\" or \"expired\"\n\t\t\t\tif (error.response.data == \"notfound\") {\n\t\t\t\t\t// get new token\n\t\t\t\t\tGetToken();\n\t\t\t\t}\n\t\t\t\telse if (error.response.data == \"expired\") {\n\t\t\t\t\t// get new token\n\t\t\t\t\tGetToken();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(error.code) {\n\t\t\t\treturn new Promise((reject) => {\n\t\t\t\t\treject({\n\t\t\t\t\t\terror: error.code\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n}\n\n// pronote : construct Recipients\nfunction constructPronoteRecipients(Recipients) {\n\treturn Recipients\n}\n\nexport default getRecipients;","import { render } from \"./ChatView.vue?vue&type=template&id=39aa9186&scoped=true\"\nimport script from \"./ChatView.vue?vue&type=script&lang=js\"\nexport * from \"./ChatView.vue?vue&type=script&lang=js\"\n\nimport \"./ChatView.vue?vue&type=style&index=0&id=39aa9186&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/vincelinise/Documents/GitHub/Papillon/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-39aa9186\"]])\n\nexport default __exports__","<script>\n\timport {\n\t\tdefineComponent\n\t} from 'vue';\n\timport {\n\t\tIonHeader,\n\t\tIonToolbar,\n        IonRefresher,\n\t\tIonRefresherContent,\n        IonSkeletonText,\n        IonBackButton\n\t} from '@ionic/vue';\n\n    import { ActionSheet, ActionSheetButtonStyle } from '@capacitor/action-sheet';\n    import { Clipboard } from '@capacitor/clipboard';\n\n    import GetConversations from '@/functions/fetch/GetConversations.js';\n\n    import ChatView from './ChatView.vue';\n\n\texport default defineComponent({\n\t\tname: 'FolderPage',\n\t\tcomponents: {\n\t\t\tIonHeader,\n\t\t\tIonToolbar,\n            IonRefresher,\n            IonRefresherContent,\n            IonSkeletonText,\n            IonBackButton\n\t\t},\n        props: {\n            conversation: {\n                type: Object,\n                required: true,\n            }\n        },\n\t\tdata() {\n\t\t\treturn {\n                messages: [],\n                refreshInterval: null,\n                conversationID: this.conversation.id,\n                ChatView: ChatView,\n\t\t\t}\n\t\t},\n\t\tmethods: {\n            async openMessage() {\n                let msg = event.target.innerText;\n\n                // if msg is an url, stop here\n                if (msg.match(/^(https?:\\/\\/[^\\s]+)/g)) {\n                    return false;\n                }\n\n                // remove multiple spaces\n                msg = msg.replace(/\\s\\s+/g, ' ');\n\n                // shorten msg\n                let shortMsg = msg.substring(0, 150);\n                if (msg.length > 150) {\n                    shortMsg += '...';\n                }\n\n                // remove line breaks\n                shortMsg = shortMsg.replace(/\\n/g, ' ');\n\n                const result = await ActionSheet.showActions({\n                    title: 'Actions du message',\n                    message: shortMsg,\n                    options: [\n                        {\n                            title: 'Copier le texte',\n                        },\n                        {\n                            title: 'Annuler',\n                            style: ActionSheetButtonStyle.Cancel,\n                        },\n                    ],\n                });\n\n                if (result.index === 0) {\n                    Clipboard.write({\n                        string: msg,\n                    });\n                }\n            },\n            handleRefresh(event) {\n                GetConversations(true).then((res) => {\n                    if(event) {\n                        event.detail.complete();\n                    }\n\n\t\t\t\t\t// filter conversation res with this.conversationID\n                    const conversation = res.filter((conv) => {\n                        return conv.id === this.conversationID;\n                    });\n\n                    this.messages = conversation[0].messages;\n                    this.messages.sort((a, b) => {\n                        return new Date(a.date) - new Date(b.date);\n                    });\n\t\t\t\t})\n            },\n            inputKeyPress(event) {\n                if (event.key === 'Enter') {\n                    this.sendMessage(event.target.value);\n                    event.target.value = '';\n                }\n            },\n            sendMessage(message) {\n                const API = this.$api;\n\t\t\t\tconst token = localStorage.getItem('token');\n\n\t\t\t\tconst myHeaders = new Headers();\n\t\t\t\tmyHeaders.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n\t\t\t\t\t\t\t\t\n\t\t\t\tconst urlencoded = new URLSearchParams();\n\t\t\t\turlencoded.append(\"token\", token);\n\t\t\t\turlencoded.append(\"content\", message);\n\t\t\t\turlencoded.append(\"discussionId\", this.conversationID);\n\n\t\t\t\tconst requestOptions = {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: myHeaders,\n\t\t\t\t\tbody: urlencoded,\n\t\t\t\t\tredirect: 'follow'\n\t\t\t\t};\n\n\t\t\t\tfetch(API + \"/discussion/reply\", requestOptions)\n\t\t\t\t\t.then(response => response.json())\n\t\t\t\t\t.then(result => {\n                        if (result === 'ok') {\n                            this.handleRefresh();\n                        } else {\n                            return false;\n                        }\n                    })\n            },\n\t\t},\n\t\tmounted() {\n            this.conversationID = this.conversation.id;\n\n            this.messages = this.conversation.messages;\n            this.messages.sort((a, b) => {\n                return new Date(a.date) - new Date(b.date);\n            });\n\n            // for each message\n            this.messages.forEach((mess) => {\n                // parse urls\n                const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n                // check if there's already a <a> tag\n                if(mess.content.match(/<a/g)) {\n                    mess.content = mess.content.replace(/<a/g, '<a target=\"_blank\"');\n                } else {\n                    mess.content = mess.content.replace(urlRegex, '<a target=\"_blank\" @click.stop class=\"inherit\" href=\"$1\">$1</a>');\n                }\n\n                // parse line breaks\n                mess.content = mess.content.replace(/\\n/g, '<br/>');\n            });\n\n            document.addEventListener('tokenUpdated', () => {\n                this.handleRefresh();\n            });\n\t\t}\n\t});\n</script>\n\n<template>\n\t<IonHeader class=\"AppHeader\" translucent>\n\t\t<IonToolbar>\n\n\t\t\t<ion-buttons slot=\"start\">\n\t\t\t\t<IonBackButton class=\"only-ios\" text=\"Retour\" @click=\"pop\"></IonBackButton>\n\t\t\t\t<IonBackButton class=\"only-md\" @click=\"pop\"></IonBackButton>\n\t\t\t</ion-buttons>\n\n            <ion-title v-if=\"!conversation.subject\">\n                <ion-skeleton-text :animated=\"true\" style=\"width: 80%;\"></ion-skeleton-text>\n            </ion-title>\n\t\t\t<ion-title v-else>{{ conversation.subject }}</ion-title>\n\n\t\t</IonToolbar>\n\t</IonHeader>\n\n    <ion-content class=\"content showScroll\" :fullscreen=\"true\">\n        <ion-refresher slot=\"fixed\" @ionRefresh=\"handleRefresh($event)\">\n\t\t\t<ion-refresher-content></ion-refresher-content>\n\t\t</ion-refresher>\n\n        <div class=\"chatUI\">\n\n            <div v-for=\"(mess, i) in messages\" :key=\"i\">\n                <div @click=\"openMessage($event)\" class=\"message theirs\" v-if=\"mess.author !== 'Moi'\">\n                    <p class=\"author\">{{mess.author}}</p>\n                    <div class=\"bubble\" v-html=\"mess.content\"></div>\n                </div>\n                <div @click=\"openMessage($event)\" class=\"message me\" v-else>\n                    <p class=\"author\">{{mess.author}}</p>\n                    <div class=\"bubble\" v-html=\"mess.content\"></div>\n                </div>\n            </div>\n\n        </div>\n        <div class=\"chatbox\">\n            <input @keydown=\"inputKeyPress\" type=\"text\" class=\"chatbox_input\" placeholder=\"Non disponible pour le moment\" disabled />\n        </div>\n\t</ion-content>\n</template>\n\n<style scoped>\n    .content::part(scroll) {\n        margin-bottom: calc(0px - env(safe-area-inset-bottom));\n        overflow: hidden;\n    }\n\n    /* chatbox */\n    .chatbox {\n        position: sticky;\n        bottom: 0px;\n\n        height: calc(70px + var(--ion-safe-area-bottom));\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        \n        background-color: var(--ion-background-color);\n        border-top: 1px solid var(--ion-color-step-100);\n\n        padding-bottom: var(--ion-safe-area-bottom);\n    }\n\n    .md .chatbox {\n        border-top: 1px solid #e0e0e0;\n    }\n\n    .dark .md .chatbox {\n        border-top: 1px solid #363636;\n    }\n\n    .chatbox_input {\n        width: calc(100% - 12px * 2);\n\n        border: none;\n        background-color: var(--ion-color-step-100);\n\n        border-radius: 50px;\n        padding: 12px 20px;\n    }\n\n    .md .chatbox_input {\n        border: none;\n        background-color: var(--ion-color-step-50);\n    }\n\n    .chatbox_input:focus {\n        outline: none;\n    }\n\n    /* chatUI */\n    .chatUI {\n        height: calc(100% - 60px - var(--ion-safe-area-bottom));\n        width: 100%;\n        padding: 0px 16px;\n        overflow-y: scroll;\n        padding-bottom: 20px;\n    }\n\n    .message {\n        display: flex;\n        flex-direction: column;\n        margin: 5px 0;\n    }\n\n    .message .author {\n        font-size: 12px;\n        color: var(--ion-color-step-400);\n        margin-bottom: 5px;\n    }\n\n    .message.me {\n        align-items: flex-end;\n    }\n\n    .message .bubble {\n        --gradient: \n            linear-gradient(to bottom, rgba(var(--ion-color-primary-rgb), 0.8) 0%, rgba(var(--ion-color-primary-rgb), 1) 90%), #fff;\n        \n        background: var(--ion-color-step-100);\n\n        border-radius: 15px;\n\n        padding: 8px 12px;\n        max-width: 80%;\n        width: fit-content;\n\n        position: relative;\n    }\n    \n\n    .message.me .bubble {\n        color: #fff;\n        background: var(--gradient);\n        background-attachment: fixed;\n    }\n\n    .message.me .bubble:before {\n        content: \"\";\n        position: absolute;\n        z-index: 0;\n        bottom: 0;\n        right: -8px;\n        height: 20px;\n        width: 20px;\n        background: rgba(var(--ion-color-primary-rgb), 1);\n        background-attachment: fixed;\n        border-bottom-left-radius: 15px;\n    }\n\n    .message.me .bubble:after {\n        content: \"\";\n        position: absolute;\n        z-index: 1;\n        bottom: 0;\n        right: -10px;\n        width: 10px;\n        height: 20px;\n        background: var(--ion-background-color);\n        border-bottom-left-radius: 10px;\n    }\n\n    .message.theirs .bubble:before {\n        content: \"\";\n        position: absolute;\n        z-index: 0;\n        bottom: 0;\n        left: -7px;\n        height: 20px;\n        width: 20px;\n        background: var(--ion-color-step-100);\n        border-bottom-right-radius: 15px;\n    }   \n\n    .message.theirs .bubble:after {\n        content: \"\";\n        position: absolute;\n        z-index: 1;\n        bottom: 0;\n        left: -10px;\n        width: 10px;\n        height: 20px;\n        background: var(--ion-background-color);\n        border-bottom-right-radius: 10px;\n    }\n\n    .message.me .bubble a {\n        color: #fff !important;\n    }\n</style>","import { WebPlugin } from '@capacitor/core';\nexport class ClipboardWeb extends WebPlugin {\n    async write(options) {\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\n            throw this.unavailable('Clipboard API not available in this browser');\n        }\n        if (options.string !== undefined) {\n            await this.writeText(options.string);\n        }\n        else if (options.url) {\n            await this.writeText(options.url);\n        }\n        else if (options.image) {\n            if (typeof ClipboardItem !== 'undefined') {\n                try {\n                    const blob = await (await fetch(options.image)).blob();\n                    const clipboardItemInput = new ClipboardItem({ [blob.type]: blob });\n                    await navigator.clipboard.write([clipboardItemInput]);\n                }\n                catch (err) {\n                    throw new Error('Failed to write image');\n                }\n            }\n            else {\n                throw this.unavailable('Writing images to the clipboard is not supported in this browser');\n            }\n        }\n        else {\n            throw new Error('Nothing to write');\n        }\n    }\n    async read() {\n        if (typeof navigator === 'undefined' || !navigator.clipboard) {\n            throw this.unavailable('Clipboard API not available in this browser');\n        }\n        if (typeof ClipboardItem !== 'undefined') {\n            try {\n                const clipboardItems = await navigator.clipboard.read();\n                const type = clipboardItems[0].types[0];\n                const clipboardBlob = await clipboardItems[0].getType(type);\n                const data = await this._getBlobData(clipboardBlob, type);\n                return { value: data, type };\n            }\n            catch (err) {\n                return this.readText();\n            }\n        }\n        else {\n            return this.readText();\n        }\n    }\n    async readText() {\n        if (typeof navigator === 'undefined' ||\n            !navigator.clipboard ||\n            !navigator.clipboard.readText) {\n            throw this.unavailable('Reading from clipboard not supported in this browser');\n        }\n        const text = await navigator.clipboard.readText();\n        return { value: text, type: 'text/plain' };\n    }\n    async writeText(text) {\n        if (typeof navigator === 'undefined' ||\n            !navigator.clipboard ||\n            !navigator.clipboard.writeText) {\n            throw this.unavailable('Writting to clipboard not supported in this browser');\n        }\n        await navigator.clipboard.writeText(text);\n    }\n    _getBlobData(clipboardBlob, type) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            if (type.includes('image')) {\n                reader.readAsDataURL(clipboardBlob);\n            }\n            else {\n                reader.readAsText(clipboardBlob);\n            }\n            reader.onloadend = () => {\n                const r = reader.result;\n                resolve(r);\n            };\n            reader.onerror = e => {\n                reject(e);\n            };\n        });\n    }\n}\n//# sourceMappingURL=web.js.map","import { registerPlugin } from '@capacitor/core';\nimport { ClipboardWeb } from './web';\nconst Clipboard = registerPlugin('Clipboard', {\n    web: () => new ClipboardWeb(),\n});\nexport * from './definitions';\nexport { Clipboard };\n//# sourceMappingURL=index.js.map","import { render } from \"./ConversationView.vue?vue&type=template&id=5bb317f2&scoped=true\"\nimport script from \"./ConversationView.vue?vue&type=script&lang=js\"\nexport * from \"./ConversationView.vue?vue&type=script&lang=js\"\n\nimport \"./ConversationView.vue?vue&type=style&index=0&id=5bb317f2&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/vincelinise/Documents/GitHub/Papillon/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5bb317f2\"]])\n\nexport default __exports__"],"names":["ActionSheetButtonStyle","ActionSheet","web","then","m","ActionSheetWeb","getConversations","forceReload","localStorage","loginService","getPronoteConversations","async","API","app","token","getItem","URL","convCache","JSON","parse","today","Date","cacheDate","date","toDateString","Promise","resolve","constructPronoteConversations","conversations","Conversations","axios","response","data","setItem","stringify","catch","error","GetToken","code","reject","_createElementVNode","class","slot","_hoisted_3","_hoisted_4","_hoisted_5","_createBlock","_component_ion_page","ref","_createVNode","_component_IonHeader","translucent","_component_IonToolbar","_component_ion_buttons","_component_ion_menu_button","color","_component_ion_title","_component_ion_content","fullscreen","_component_ion_header","collapse","_component_ion_toolbar","size","_component_ion_refresher","onIonRefresh","_cache","$event","_ctx","handleRefresh","_component_ion_refresher_content","_component_IonFab","vertical","horizontal","_component_ion_button","onClick","startNewChat","shape","mode","_hoisted_1","_Transition","name","length","isLoading","_createElementBlock","_hoisted_7","_component_IonSpinner","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_2","_hoisted_6","_component_IonList","_Fragment","_renderList","chat","i","_component_IonNavLink","key","component","ConversationView","componentProps","conversation","_component_IonItem","button","_hoisted_11","_component_ion_label","_toDisplayString","subject","messages","content","replace","creator","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_component_IonModal","presentingElement","newConvModalOpen","_component_IonButtons","_component_IonButton","setnewConvModalOpen","_component_IonTitle","startConversation","inset","_component_IonInput","placeholder","_component_IonTextarea","style","_component_ion_radio_group","recipients","person","type","_hoisted_17","_hoisted_18","functions","join","_component_ion_checkbox","selectRecipient","id","getRecipients","getPronoteRecipients","recipientsCache","constructPronoteRecipients","Recipients","defineComponent","components","IonHeader","IonToolbar","IonList","IonItem","IonNavLink","IonFab","IonButton","IonButtons","IonTitle","IonModal","IonCheckbox","IonRadioGroup","IonInput","IonTextarea","IonRefresher","IonRefresherContent","IonPage","IonSpinner","setup","methods","event","GetConversations","res","this","$watch","setTimeout","target","complete","refreshRecipients","GetRecipients","status","checkedRecipients","includes","splice","indexOf","push","$refs","newChatSubject","$el","value","newChatMsg","recipientsId","$api","myHeaders","Headers","append","urlencoded","URLSearchParams","requestOptions","method","headers","body","redirect","fetch","json","result","undefined","displayToast","alertCircle","errors","checkmark","checkedRecipient","mounted","page","document","addEventListener","__exports__","render","_component_IonBackButton","text","pop","_component_ion_skeleton_text","animated","mess","author","openMessage","innerHTML","onKeydown","args","inputKeyPress","disabled","ClipboardWeb","options","navigator","clipboard","unavailable","string","writeText","url","image","Error","ClipboardItem","blob","clipboardItemInput","write","err","readText","clipboardItems","read","types","clipboardBlob","getType","_getBlobData","reader","FileReader","readAsDataURL","readAsText","onloadend","r","onerror","e","Clipboard","IonSkeletonText","IonBackButton","props","Object","required","refreshInterval","conversationID","ChatView","msg","innerText","match","shortMsg","substring","title","message","index","detail","filter","conv","sort","a","b","sendMessage","forEach","urlRegex"],"sourceRoot":""}