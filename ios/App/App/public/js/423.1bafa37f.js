"use strict";(self["webpackChunkpapillon"]=self["webpackChunkpapillon"]||[]).push([[423],{8527:(e,t,s)=>{s.d(t,{Vb:()=>o,LE:()=>n});var n,a=s(9895);(function(e){e["Default"]="DEFAULT",e["Destructive"]="DESTRUCTIVE",e["Cancel"]="CANCEL"})(n||(n={}));const o=(0,a.fo)("ActionSheet",{web:()=>s.e(185).then(s.bind(s,8185)).then((e=>new e.ActionSheetWeb))})},2068:(e,t,s)=>{s.d(t,{V:()=>a});var n=s(9895);const a=(0,n.fo)("Dialog",{web:()=>s.e(674).then(s.bind(s,5674)).then((e=>new e.DialogWeb))})},2605:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(9895);const a=(0,n.fo)("Network",{web:()=>s.e(466).then(s.bind(s,2466)).then((e=>new e.NetworkWeb))})},4161:(e,t,s)=>{s.d(t,{m:()=>a});var n=s(9895);const a=(0,n.fo)("Share",{web:()=>s.e(811).then(s.bind(s,5462)).then((e=>new e.ShareWeb))})},7686:(e,t,s)=>{var n=s(2109),a=s(7908),o=s(6244),l=s(9303),r=s(1223);n({target:"Array",proto:!0},{at:function(e){var t=a(this),s=o(t),n=l(e),r=n>=0?n:s+n;return r<0||r>=s?void 0:t[r]}}),r("at")},4506:(e,t,s)=>{var n=s(2109),a=s(1702),o=s(4488),l=s(9303),r=s(1340),i=s(7293),u=a("".charAt),d=i((function(){return"\ud842"!=="𠮷".at(-2)}));n({target:"String",proto:!0,forced:d},{at:function(e){var t=r(o(this)),s=t.length,n=l(e),a=n>=0?n:s+n;return a<0||a>=s?void 0:u(t,a)}})},6520:(e,t,s)=>{function n(e){for(let t=0;t<e.length;t++){const s=e[t],n=new Date(s.time.start),a=new Date(s.time.end);for(let o=0;o<e.length;o++){const l=e[o],r=new Date(l.time.start),i=new Date(l.time.end);n<=r&&a>=i&&s.course.num!=l.course.num&&(s.course.num>l.course.num?e[o].course.sameTime=!0:e[t].course.sameTime=!0)}}return e}function a(e){const t=new Date;for(let s=0;s<e.length;s++){const n=e[s],a=new Date(n.time.start),o=new Date(n.time.end);a<=t&&o>=t&&0==n.course.sameTime?e[s].course.actual=!0:e[s].course.actual=!1}return e}function o(e){for(let t=0;t<e.length;t++){const s=e[t],n=new Date(s.time.start);if(t>0){const s=e[t-1],a=new Date(s.time.end);n-a>=9e5&&(e[t].course.distance=!0)}}return e}function l(e){for(let t=0;t<e.length;t++){const s=e[t],n=new Date(s.time.start),a=new Date(s.time.end);let o=a-n;o=o/1e3/60/60,e[t].course.lengthCours=o}return e}function r(e){return e=n(e),e=l(e),e=o(e),e=a(e),e}s.d(t,{Z:()=>i});const i=r},423:(e,t,s)=>{s.r(t),s.d(t,{default:()=>os});var n=s(6252);function a(e,t,s,a,o,l){var r=(0,n.up)("ion-nav"),i=(0,n.up)("ion-page");return(0,n.wg)(),(0,n.j4)(i,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(r,{root:o.component,ref:"page"},null,8,["root"])]})),_:1})}var o=s(5274),l=(s(8862),s(3577));const r=e=>((0,n.dD)("data-v-43f69674"),e=e(),(0,n.Cn)(),e),i=r((()=>(0,n._)("span",{class:"expand_title material-symbols-outlined mdls"},"expand_more",-1))),u=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"calendar_month",-1))),d=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"icon-only"},"add",-1))),c=r((()=>(0,n._)("div",{id:"noTouchZone"},null,-1))),m={key:0},p={key:0,class:"NoCours"},g=r((()=>(0,n._)("h1",null,"😌",-1))),h=r((()=>(0,n._)("h2",null,"Aucun cours aujourd'hui",-1))),f=r((()=>(0,n._)("p",null,"Sélectionnez un autre jour dans le calendrier ou balayez l’écran pour changer de journée.",-1))),w={key:1,class:"NoCours"},_=r((()=>(0,n._)("h1",null,"🌏",-1))),C=r((()=>(0,n._)("h2",null,"Pas de connexion à Internet",-1))),v=r((()=>(0,n._)("p",null,"Vous pouvez uniquement consulter les journées déjà chargées préalablement lorsque vous êtes hors-ligne.",-1))),b=[_,C,v],y={key:2,class:"NoCours"},D=r((()=>(0,n._)("h1",null,"🛠️",-1))),k=r((()=>(0,n._)("h2",null,"Serveurs indisponibles",-1))),S=r((()=>(0,n._)("p",null,"Vous pouvez uniquement consulter les journées déjà chargées préalablement. Nos serveurs seront bientôt de nouveaux disponibles.",-1))),I=[D,k,S],W={key:1},P={class:"loadingSpin"},T=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start",style:{"margin-right":"15px"}},"school",-1))),$=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start",style:{"margin-right":"15px"}},"location_on",-1))),E=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start",style:{"margin-right":"15px"}},"face",-1))),N=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start",style:{"margin-right":"15px"}},"groups",-1))),M=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start",style:{"margin-right":"15px"}},"schedule",-1))),j={class:"timeInput",slot:"end"},x=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start",style:{"margin-right":"15px"}},"schedule",-1))),R={class:"timeInput",slot:"end"},L=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start",style:{"margin-right":"15px"}},"palette",-1))),U={slot:"end"},A={type:"color",ref:"newCoursColorRef"},q=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"history_edu",-1))),O=r((()=>(0,n._)("p",null,"Nom de la matière",-1))),z=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"share",-1))),B=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"face",-1))),V=r((()=>(0,n._)("p",null,"Professeur",-1))),H=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"meeting_room",-1))),G=r((()=>(0,n._)("p",null,"Salle",-1))),F=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"description",-1))),Z=r((()=>(0,n._)("p",null,"Mémo",-1))),J={class:"display-all"},Y=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"schedule",-1))),K=r((()=>(0,n._)("p",null,"Horaires",-1))),Q=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"notifications",-1))),X=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"notifications_off",-1))),ee=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"pending_actions",-1))),te=r((()=>(0,n._)("p",null,"Durée du cours",-1))),se=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"error",-1))),ne=r((()=>(0,n._)("p",null,"Statut",-1))),ae=r((()=>(0,n._)("br",null,null,-1))),oe=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"info",-1))),le=r((()=>(0,n._)("p",null,"Statut",-1))),re=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"info",-1))),ie=r((()=>(0,n._)("p",null,"Statut",-1))),ue=r((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"delete",-1)));function de(e,t,s,a,o,r){const _=(0,n.up)("ion-menu-button"),C=(0,n.up)("ion-buttons"),v=(0,n.up)("ion-title"),D=(0,n.up)("ion-item"),k=(0,n.up)("ion-list"),S=(0,n.up)("ion-popover"),de=(0,n.up)("ion-button"),ce=(0,n.up)("ion-progress-bar"),me=(0,n.up)("IonToolbar"),pe=(0,n.up)("IonHeader"),ge=(0,n.up)("ion-refresher-content"),he=(0,n.up)("ion-refresher"),fe=(0,n.up)("IonFab"),we=(0,n.up)("CoursElement"),_e=(0,n.up)("IonNavLink"),Ce=(0,n.up)("IonSpinner"),ve=(0,n.up)("IonList"),be=(0,n.up)("swiper-slide"),ye=(0,n.up)("swiper"),De=(0,n.up)("ion-input"),ke=(0,n.up)("ion-label"),Se=(0,n.up)("ion-content"),Ie=(0,n.up)("IonModal"),We=(0,n.up)("IonDatetime"),Pe=(0,n.up)("ion-page");return(0,n.wg)(),(0,n.j4)(Pe,{ref:"pageHere"},{default:(0,n.w5)((()=>[(0,n.Wm)(pe,{class:"AppHeader"},{default:(0,n.w5)((()=>[(0,n.Wm)(me,null,{default:(0,n.w5)((()=>[(0,n.Wm)(C,{slot:"start"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{color:"dark"})])),_:1}),(0,n.Wm)(v,{id:"title"},{default:(0,n.w5)((()=>[(0,n.Uk)(" Ma journée "),i])),_:1}),(0,n.Wm)(S,{trigger:"title","trigger-action":"click"},{default:(0,n.w5)((()=>[(0,n.Wm)(k,{lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(D,{onClick:t[0]||(t[0]=t=>e.addDayToCalendar()),button:!0,detail:!1},{default:(0,n.w5)((()=>[(0,n.Uk)(" Ajouter au calendrier ")])),_:1})])),_:1})])),_:1}),(0,n.Wm)(C,{slot:"end"},{default:(0,n.w5)((()=>[(0,n.Wm)(de,{id:"rnPickerModalButton",color:"dark",onClick:t[1]||(t[1]=t=>e.changernPickerModalOpen(!0))},{default:(0,n.w5)((()=>[u,(0,n._)("p",null,(0,l.zw)(e.rnButtonString),1)])),_:1})])),_:1}),e.isLoading?((0,n.wg)(),(0,n.j4)(ce,{key:0,type:"indeterminate"})):(0,n.kq)("",!0)])),_:1})])),_:1}),(0,n.Wm)(Se,{fullscreen:!0,class:"content"},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{slot:"fixed",onIonRefresh:t[2]||(t[2]=t=>e.handleRefresh(t))},{default:(0,n.w5)((()=>[(0,n.Wm)(ge)])),_:1}),(0,n.Wm)(fe,{slot:"fixed",vertical:"bottom",horizontal:"end",class:"newCoursBtnFab"},{default:(0,n.w5)((()=>[(0,n.Wm)(de,{onClick:t[3]||(t[3]=t=>e.setNewCoursModalOpen(!0)),size:"large",shape:"round",class:"newCoursBtn",mode:"md"},{default:(0,n.w5)((()=>[d])),_:1})])),_:1}),c,(0,n.Wm)(ye,{class:"swiper",ref:"swiper",modules:[e.Virtual],virtual:"",initialSlide:e.baseIndex,speed:200,spaceBetween:10,preventClicks:!0},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.slides,((s,a)=>((0,n.wg)(),(0,n.j4)(be,{class:"slide",key:a,virtualIndex:a},{default:(0,n.w5)((()=>[(0,n.Wm)(ve,null,{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.days[`${a}`],(t=>((0,n.wg)(),(0,n.j4)(_e,{key:t.id,"router-direction":"forward",component:e.CoursView,componentProps:{urlCours:encodeURIComponent(JSON.stringify(t))}},{default:(0,n.w5)((()=>[(0,n.Wm)(we,{subject:t.data.subject,teachers:t.data.teachers.join(", ")||"Pas de professeur",rooms:t.data.rooms.join(", ")||"Pas de salle",groupNames:t.data.groupNames.join(", ")||null,memo:t.data.hasMemo,start:t.time.start,end:t.time.end,color:t.course.color,sameTime:t.course.sameTime,status:t.status.status,isCancelled:t.status.isCancelled,isDetention:t.status.isDetention,isExempted:t.status.isExempted,isOuting:t.status.isOuting,isTest:t.status.isTest,distance:t.course.distance,lengthCours:t.course.lengthCours},null,8,["subject","teachers","rooms","groupNames","memo","start","end","color","sameTime","status","isCancelled","isDetention","isExempted","isOuting","isTest","distance","lengthCours"])])),_:2},1032,["component","componentProps"])))),128)),e.days[`${a}`]?((0,n.wg)(),(0,n.iD)("div",m,[0!=e.days[`${a}`].length||e.days[`${a}`].error||e.days[`${a}`].loading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",p,[g,h,f,(0,n.Wm)(de,{mode:"md",fill:"clear",onClick:t[4]||(t[4]=t=>e.changernPickerModalOpen(!0)),class:"changeDayButton"},{default:(0,n.w5)((()=>[(0,n.Uk)("Ouvrir le calendrier")])),_:1})])),0!=e.days[`${a}`].length||"ERR_NETWORK"!=e.days[`${a}`].error||e.days[`${a}`].loading||e.connected?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",w,b)),0==e.days[`${a}`].length&&"ERR_NETWORK"==e.days[`${a}`].error&&!e.days[`${a}`].loading&&e.connected?((0,n.wg)(),(0,n.iD)("div",y,I)):(0,n.kq)("",!0)])):((0,n.wg)(),(0,n.iD)("div",W,[(0,n._)("div",P,[(0,n.Wm)(Ce)])]))])),_:2},1024)])),_:2},1032,["virtualIndex"])))),128))])),_:1},8,["modules","initialSlide"]),(0,n.Wm)(Ie,{canDismiss:!0,onDidDismiss:t[7]||(t[7]=t=>e.setNewCoursModalOpen(!1)),ref:"newCoursModal",class:"newCoursModal","is-open":e.newCoursModalOpen,"presenting-element":e.presentingElement},{default:(0,n.w5)((()=>[(0,n.Wm)(pe,null,{default:(0,n.w5)((()=>[(0,n.Wm)(me,null,{default:(0,n.w5)((()=>[(0,n.Wm)(C,{slot:"start"},{default:(0,n.w5)((()=>[(0,n.Wm)(de,{onClick:t[5]||(t[5]=t=>e.setNewCoursModalOpen(!1))},{default:(0,n.w5)((()=>[(0,n.Uk)("Annuler")])),_:1})])),_:1}),(0,n.Wm)(C,{slot:"end"},{default:(0,n.w5)((()=>[(0,n.Wm)(de,{onClick:t[6]||(t[6]=t=>e.addNewCours()),color:"primary"},{default:(0,n.w5)((()=>[(0,n.Uk)("Ajouter")])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(Se,null,{default:(0,n.w5)((()=>[(0,n.Wm)(k,{inset:""},{default:(0,n.w5)((()=>[(0,n.Wm)(D,{class:"textInput"},{default:(0,n.w5)((()=>[T,(0,n.Wm)(De,{type:"text",name:"CourseTitle",ref:"newCoursNameRef",placeholder:"Nom du cours"},null,512)])),_:1})])),_:1}),(0,n.Wm)(k,{inset:""},{default:(0,n.w5)((()=>[(0,n.Wm)(D,{class:"textInput"},{default:(0,n.w5)((()=>[$,(0,n.Wm)(De,{type:"text",name:"Place",ref:"newCoursRoomRef",placeholder:"Lieu"},null,512)])),_:1}),(0,n.Wm)(D,{class:"textInput"},{default:(0,n.w5)((()=>[E,(0,n.Wm)(De,{type:"text",name:"Person",ref:"newCoursTeacherRef",placeholder:"Professeur"},null,512)])),_:1}),(0,n.Wm)(D,{class:"textInput"},{default:(0,n.w5)((()=>[N,(0,n.Wm)(De,{type:"text",name:"Group",ref:"newCoursGroupRef",placeholder:"Groupe (optionnel)"},null,512)])),_:1})])),_:1}),(0,n.Wm)(k,{inset:""},{default:(0,n.w5)((()=>[(0,n.Wm)(D,{class:"input"},{default:(0,n.w5)((()=>[M,(0,n.Wm)(ke,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Heure de début")])),_:1}),(0,n._)("div",j,[(0,n.Wm)(De,{ref:"newCoursStartRef",class:"timeInInput",name:"Start",type:"time",value:"12:30"},null,512)])])),_:1}),(0,n.Wm)(D,{class:"input"},{default:(0,n.w5)((()=>[x,(0,n.Wm)(ke,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Heure de fin")])),_:1}),(0,n._)("div",R,[(0,n.Wm)(De,{class:"timeInInput",name:"End",ref:"newCoursEndRef",type:"time",value:"13:30"},null,512)])])),_:1})])),_:1}),(0,n.Wm)(k,{inset:"",class:"only-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(D,{class:"input"},{default:(0,n.w5)((()=>[L,(0,n.Wm)(ke,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Couleur")])),_:1}),(0,n._)("div",U,[(0,n._)("input",A,null,512)])])),_:1})])),_:1})])),_:1})])),_:1},8,["is-open","presenting-element"]),(0,n.Wm)(Ie,{"is-open":e.rnPickerModalOpen,ref:"rnPickerModal",class:"datetimeModal",onDidDismiss:t[10]||(t[10]=t=>e.changernPickerModalOpen(!1)),"keep-contents-mounted":!0,"initial-breakpoint":.55,breakpoints:[0,.55]},{default:(0,n.w5)((()=>[(0,n.Wm)(pe,null,{default:(0,n.w5)((()=>[(0,n.Wm)(me,null,{default:(0,n.w5)((()=>[(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Sélection de la date")])),_:1}),(0,n.Wm)(C,{slot:"end"},{default:(0,n.w5)((()=>[(0,n.Wm)(de,{onClick:t[8]||(t[8]=t=>e.confirmRnInput())},{default:(0,n.w5)((()=>[(0,n.Uk)("Terminé")])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(Se,null,{default:(0,n.w5)((()=>[(0,n.Wm)(We,{presentation:"date",ref:"rnInput",size:"cover",value:e.rnCalendarString,firstDayOfWeek:1,min:e.minDate,max:e.maxDate,"is-date-enabled":e.isDateAvailable,onIonChange:t[9]||(t[9]=t=>e.rnInputChanged())},null,8,["value","min","max","is-date-enabled"])])),_:1})])),_:1},8,["is-open"]),(0,n.Wm)(Ie,{ref:"coursModal",class:"coursModal","keep-contents-mounted":!0,"presenting-element":e.presentingElement,handle:!0,canDismiss:!0},{default:(0,n.w5)((()=>[(0,n.Wm)(pe,null,{default:(0,n.w5)((()=>[(0,n.Wm)(me,null,{default:(0,n.w5)((()=>[(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.selectedCourse.name),1)])),_:1})])),_:1})])),_:1}),(0,n.Wm)(Se,null,{default:(0,n.w5)((()=>[(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(D,{class:"info-item"},{default:(0,n.w5)((()=>[q,(0,n.Wm)(ke,null,{default:(0,n.w5)((()=>[O,(0,n._)("h2",null,(0,l.zw)(e.selectedCourse.name),1)])),_:1}),(0,n.Wm)(de,{class:"itemBtn",fill:"clear",slot:"end",onClick:t[11]||(t[11]=t=>e.shareCours(e.selectedCourse.originalCourse))},{default:(0,n.w5)((()=>[z,(0,n.Uk)(" Partager ")])),_:1})])),_:1}),(0,n.Wm)(D,{class:"info-item"},{default:(0,n.w5)((()=>[B,(0,n.Wm)(ke,null,{default:(0,n.w5)((()=>[V,(0,n._)("h2",null,(0,l.zw)(e.selectedCourse.teachers),1)])),_:1})])),_:1}),(0,n.Wm)(D,{class:"info-item"},{default:(0,n.w5)((()=>[H,(0,n.Wm)(ke,null,{default:(0,n.w5)((()=>[G,(0,n._)("h2",null,(0,l.zw)(e.selectedCourse.rooms),1)])),_:1})])),_:1}),e.selectedCourse.hasMemo?((0,n.wg)(),(0,n.j4)(D,{key:0,class:"info-item"},{default:(0,n.w5)((()=>[F,(0,n.Wm)(ke,null,{default:(0,n.w5)((()=>[Z,(0,n._)("h2",J,(0,l.zw)(e.selectedCourse.memo),1)])),_:1})])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(D,{class:"info-item"},{default:(0,n.w5)((()=>[Y,(0,n.Wm)(ke,null,{default:(0,n.w5)((()=>[K,(0,n._)("h2",null,"De "+(0,l.zw)(e.selectedCourse.start)+" à "+(0,l.zw)(e.selectedCourse.end),1)])),_:1}),e.selectedCourse.notificationEnabled?((0,n.wg)(),(0,n.j4)(de,{key:1,class:"itemBtn",color:"danger",fill:"clear",slot:"end",onClick:t[13]||(t[13]=t=>e.unsetNotif(e.selectedCourse.originalCourse))},{default:(0,n.w5)((()=>[X,(0,n.Uk)(" Ne pas me notifier ")])),_:1})):((0,n.wg)(),(0,n.j4)(de,{key:0,class:"itemBtn",fill:"clear",slot:"end",onClick:t[12]||(t[12]=t=>e.setNotif(e.selectedCourse.originalCourse))},{default:(0,n.w5)((()=>[Q,(0,n.Uk)(" Me notifier ")])),_:1}))])),_:1}),(0,n.Wm)(D,{class:"info-item"},{default:(0,n.w5)((()=>[ee,(0,n.Wm)(ke,null,{default:(0,n.w5)((()=>[te,(0,n._)("h2",null,(0,l.zw)(e.selectedCourse.length),1)])),_:1})])),_:1}),e.selectedCourse.isCancelled?((0,n.wg)(),(0,n.j4)(D,{key:1,class:"info-item",style:{color:"var(--ion-color-danger)"}},{default:(0,n.w5)((()=>[se,(0,n.Wm)(ke,null,{default:(0,n.w5)((()=>[ne,(0,n._)("h2",null,[(0,n.Uk)("Ce cours n'est pas maintenu"),ae,(0,n.Uk)("Motif : "+(0,l.zw)(e.selectedCourse.status),1)])])),_:1})])),_:1})):e.selectedCourse.hasStatus?((0,n.wg)(),(0,n.j4)(D,{key:2,class:"info-item",style:{color:"var(--ion-color-warning)"}},{default:(0,n.w5)((()=>[oe,(0,n.Wm)(ke,{class:"ion-text-wrap"},{default:(0,n.w5)((()=>[le,(0,n._)("h2",null,(0,l.zw)(e.selectedCourse.status),1)])),_:1})])),_:1})):((0,n.wg)(),(0,n.j4)(D,{key:3,class:"info-item"},{default:(0,n.w5)((()=>[re,(0,n.Wm)(ke,null,{default:(0,n.w5)((()=>[ie,(0,n._)("h2",null,(0,l.zw)(e.selectedCourse.status),1)])),_:1}),e.selectedCourse.custom?((0,n.wg)(),(0,n.j4)(de,{key:0,color:"danger",fill:"clear",class:"itemBtn",slot:"end",onClick:t[14]||(t[14]=t=>e.deleteCustomCourse(e.selectedCourse.id))},{default:(0,n.w5)((()=>[ue,(0,n.Uk)(" Supprimer ")])),_:1})):(0,n.kq)("",!0)])),_:1}))])),_:1})])),_:1})])),_:1},8,["presenting-element"])])),_:1})])),_:1},512)}s(7658),s(2707),s(7686),s(4506),s(3948);var ce=s(8527),me=s(2068);
/*! Capacitor: https://capacitorjs.com/ - MIT License */
const pe=e=>{const t=new Map;t.set("web",{name:"web"});const s=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},n=(e,t)=>{s.platforms.set(e,t)},a=e=>{s.platforms.has(e)&&(s.currentPlatform=s.platforms.get(e))};return s.addPlatform=n,s.setPlatform=a,s},ge=e=>e.CapacitorPlatforms=pe(e),he=ge("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof s.g?s.g:{});he.addPlatform,he.setPlatform;var fe;(function(e){e["Unimplemented"]="UNIMPLEMENTED",e["Unavailable"]="UNAVAILABLE"})(fe||(fe={}));class we extends Error{constructor(e,t){super(e),this.message=e,this.code=t}}const _e=e=>{var t,s;return(null===e||void 0===e?void 0:e.androidBridge)?"android":(null===(s=null===(t=null===e||void 0===e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===s?void 0:s.bridge)?"ios":"web"},Ce=e=>{var t,s,n,a,o;const l=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},i=r.Plugins=r.Plugins||{},u=e.CapacitorPlatforms,d=()=>null!==l?l.name:_e(e),c=(null===(t=null===u||void 0===u?void 0:u.currentPlatform)||void 0===t?void 0:t.getPlatform)||d,m=()=>"web"!==c(),p=(null===(s=null===u||void 0===u?void 0:u.currentPlatform)||void 0===s?void 0:s.isNativePlatform)||m,g=e=>{const t=v.get(e);return!!(null===t||void 0===t?void 0:t.platforms.has(c()))||!!w(e)},h=(null===(n=null===u||void 0===u?void 0:u.currentPlatform)||void 0===n?void 0:n.isPluginAvailable)||g,f=e=>{var t;return null===(t=r.PluginHeaders)||void 0===t?void 0:t.find((t=>t.name===e))},w=(null===(a=null===u||void 0===u?void 0:u.currentPlatform)||void 0===a?void 0:a.getPluginHeader)||f,_=t=>e.console.error(t),C=(e,t,s)=>Promise.reject(`${s} does not have an implementation of "${t}".`),v=new Map,b=(e,t={})=>{const s=v.get(e);if(s)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),s.proxy;const n=c(),a=w(e);let o;const u=async()=>(!o&&n in t?o=o="function"===typeof t[n]?await t[n]():t[n]:null!==l&&!o&&"web"in t&&(o=o="function"===typeof t["web"]?await t["web"]():t["web"]),o),d=(t,s)=>{var o,l;if(!a){if(t)return null===(l=t[s])||void 0===l?void 0:l.bind(t);throw new we(`"${e}" plugin is not implemented on ${n}`,fe.Unimplemented)}{const n=null===a||void 0===a?void 0:a.methods.find((e=>s===e.name));if(n)return"promise"===n.rtype?t=>r.nativePromise(e,s.toString(),t):(t,n)=>r.nativeCallback(e,s.toString(),t,n);if(t)return null===(o=t[s])||void 0===o?void 0:o.bind(t)}},m=t=>{let s;const a=(...a)=>{const o=u().then((o=>{const l=d(o,t);if(l){const e=l(...a);return s=null===e||void 0===e?void 0:e.remove,e}throw new we(`"${e}.${t}()" is not implemented on ${n}`,fe.Unimplemented)}));return"addListener"===t&&(o.remove=async()=>s()),o};return a.toString=()=>`${t.toString()}() { [capacitor code] }`,Object.defineProperty(a,"name",{value:t,writable:!1,configurable:!1}),a},p=m("addListener"),g=m("removeListener"),h=(e,t)=>{const s=p({eventName:e},t),n=async()=>{const n=await s;g({eventName:e,callbackId:n},t)},a=new Promise((e=>s.then((()=>e({remove:n})))));return a.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await n()},a},f=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return a?h:p;case"removeListener":return g;default:return m(t)}}});return i[e]=f,v.set(e,{name:e,proxy:f,platforms:new Set([...Object.keys(t),...a?[n]:[]])}),f},y=(null===(o=null===u||void 0===u?void 0:u.currentPlatform)||void 0===o?void 0:o.registerPlugin)||b;return r.convertFileSrc||(r.convertFileSrc=e=>e),r.getPlatform=c,r.handleError=_,r.isNativePlatform=p,r.isPluginAvailable=h,r.pluginMethodNoop=C,r.registerPlugin=y,r.Exception=we,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r.platform=r.getPlatform(),r.isNative=r.isNativePlatform(),r},ve=e=>e.Capacitor=Ce(e),be=ve("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof s.g?s.g:{}),ye=be.registerPlugin;be.Plugins;const De=ye("CapacitorCalendar",{});var ke=s(9895);const Se=e=>((0,n.dD)("data-v-0501b54a"),e=e(),(0,n.Cn)(),e),Ie={key:0},We=Se((()=>(0,n._)("p",null,"Détails du cours",-1))),Pe=Se((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"history_edu",-1))),Te=Se((()=>(0,n._)("p",null,"Nom de la matière",-1))),$e=Se((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"face",-1))),Ee=Se((()=>(0,n._)("p",null,"Professeurs",-1))),Ne=Se((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"meeting_room",-1))),Me=Se((()=>(0,n._)("p",null,"Salle",-1))),je=Se((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"groups",-1))),xe=Se((()=>(0,n._)("p",null,"Groupe",-1))),Re=Se((()=>(0,n._)("p",null,"Horaires",-1))),Le=Se((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"schedule",-1))),Ue=Se((()=>(0,n._)("p",null,"Début",-1))),Ae=Se((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"schedule",-1))),qe=Se((()=>(0,n._)("p",null,"Fin",-1))),Oe=Se((()=>(0,n._)("p",null,"Statut du cours",-1))),ze=Se((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"information-circle",-1))),Be=Se((()=>(0,n._)("p",null,"Statut du cours",-1))),Ve={key:0},He=Se((()=>(0,n._)("br",null,null,-1))),Ge={key:1},Fe=Se((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"sticky_note_2",-1))),Ze=Se((()=>(0,n._)("p",null,"Mémo",-1))),Je=Se((()=>(0,n._)("p",null,"Actions",-1))),Ye=Se((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"notifications",-1))),Ke=Se((()=>(0,n._)("h2",null,"Activer les notifications",-1))),Qe=Se((()=>(0,n._)("p",null,"Vous allez recevoir une notification 5 minutes avant le début du cours",-1))),Xe=Se((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"delete",-1))),et=Se((()=>(0,n._)("h2",null,"Supprimer le cours personnalisé",-1))),tt=Se((()=>(0,n._)("p",null,"Supprime le cours personnalisé de votre emploi du temps",-1))),st=Se((()=>(0,n._)("span",{class:"material-symbols-outlined mdls",slot:"start"},"event",-1))),nt=Se((()=>(0,n._)("h2",null,"Ajouter au calendrier",-1))),at=Se((()=>(0,n._)("p",null,"Ajouter ce cours au calendrier par défaut de votre appareil",-1)));function ot(e,t,s,a,o,r){const i=(0,n.up)("IonBackButton"),u=(0,n.up)("ion-buttons"),d=(0,n.up)("ion-title"),c=(0,n.up)("ion-skeleton-text"),m=(0,n.up)("ion-button"),p=(0,n.up)("IonToolbar"),g=(0,n.up)("IonHeader"),h=(0,n.up)("IonLabel"),f=(0,n.up)("ion-label"),w=(0,n.up)("ion-item"),_=(0,n.up)("IonList"),C=(0,n.up)("ion-toggle"),v=(0,n.up)("IonItem"),b=(0,n.up)("ion-content");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(g,{class:"AppHeader",translucent:""},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,{slot:"start"},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{class:"only-ios",text:e.backTitle,onClick:e.pop},null,8,["text","onClick"]),(0,n.Wm)(i,{class:"only-md",onClick:e.pop},null,8,["onClick"])])),_:1}),e.openedCours?((0,n.wg)(),(0,n.j4)(d,{key:0},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(e.pageTitle),1)])),_:1})):((0,n.wg)(),(0,n.j4)(d,{key:1},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{style:{width:"200px"}})])),_:1})),(0,n.Wm)(u,{slot:"end"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{class:"itemBtn",onClick:t[0]||(t[0]=t=>e.shareCours())},{default:(0,n.w5)((()=>[(0,n.Uk)(" Partager ")])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(b,{fullscreen:!0},{default:(0,n.w5)((()=>[e.openedCours?((0,n.wg)(),(0,n.iD)("div",Ie,[(0,n.Wm)(h,{class:"listGroupTitle"},{default:(0,n.w5)((()=>[We])),_:1}),(0,n.Wm)(_,{class:"listGroup"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{class:"info-item"},{default:(0,n.w5)((()=>[Pe,(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[Te,(0,n._)("h2",null,(0,l.zw)(e.openCours_data.subject||"Pas de matière"),1)])),_:1})])),_:1}),(0,n.Wm)(w,{class:"info-item"},{default:(0,n.w5)((()=>[$e,(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[Ee,(0,n._)("h2",null,(0,l.zw)(e.teachers||"Pas de professeur"),1)])),_:1})])),_:1}),(0,n.Wm)(w,{class:"info-item"},{default:(0,n.w5)((()=>[Ne,(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[Me,(0,n._)("h2",null,(0,l.zw)(e.rooms||"Pas de salle"),1)])),_:1})])),_:1}),"true"==e.disableShowGroup&&e.groupNames.length?((0,n.wg)(),(0,n.j4)(w,{key:0,class:"info-item"},{default:(0,n.w5)((()=>[je,(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[xe,(0,n._)("h2",null,(0,l.zw)(e.groupNames||"Pas de groupe"),1)])),_:1})])),_:1})):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(h,{class:"listGroupTitle"},{default:(0,n.w5)((()=>[Re])),_:1}),(0,n.Wm)(_,{class:"listGroup times",lines:"none"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{class:"info-item"},{default:(0,n.w5)((()=>[Le,(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[Ue,(0,n._)("h2",null,(0,l.zw)(new Date(e.openCours_time.start).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})),1),(0,n._)("h4",null,(0,l.zw)(new Date(e.openCours_time.start).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})),1)])),_:1})])),_:1}),(0,n.Wm)(w,{class:"info-item"},{default:(0,n.w5)((()=>[Ae,(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[qe,(0,n._)("h2",null,(0,l.zw)(new Date(e.openCours_time.end).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})),1),(0,n._)("h4",null,(0,l.zw)(new Date(e.openCours_time.end).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})),1)])),_:1})])),_:1})])),_:1}),e.openCours_status.status||e.openCours_data.memo?((0,n.wg)(),(0,n.j4)(h,{key:0,class:"listGroupTitle"},{default:(0,n.w5)((()=>[Oe])),_:1})):(0,n.kq)("",!0),e.openCours_status.status||e.openCours_data.memo?((0,n.wg)(),(0,n.j4)(_,{key:1,class:"listGroup"},{default:(0,n.w5)((()=>[e.openCours_status.status?((0,n.wg)(),(0,n.j4)(w,{key:0,class:(0,l.C_)(["info-item",{cancelled:e.openCours_status.isCancelled}])},{default:(0,n.w5)((()=>[ze,(0,n.Wm)(f,{class:"ion-text-wrap"},{default:(0,n.w5)((()=>[Be,e.openCours_status.isCancelled?((0,n.wg)(),(0,n.iD)("h2",Ve,[(0,n.Uk)("Ce cours n'est pas maintenu."),He,(0,n.Uk)("Motif : "+(0,l.zw)(e.openCours_status.status),1)])):((0,n.wg)(),(0,n.iD)("h2",Ge,(0,l.zw)(e.openCours_status.status),1))])),_:1})])),_:1},8,["class"])):(0,n.kq)("",!0),e.openCours_data.memo?((0,n.wg)(),(0,n.j4)(w,{key:1,class:"info-item"},{default:(0,n.w5)((()=>[Fe,(0,n.Wm)(f,{class:"ion-text-wrap"},{default:(0,n.w5)((()=>[Ze,(0,n._)("h2",null,(0,l.zw)(e.openCours_data.memo),1)])),_:1})])),_:1})):(0,n.kq)("",!0)])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(h,{class:"listGroupTitle"},{default:(0,n.w5)((()=>[Je])),_:1}),(0,n.Wm)(_,{class:"listGroup"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,null,{default:(0,n.w5)((()=>[Ye,(0,n.Wm)(f,{class:"ion-text-wrap"},{default:(0,n.w5)((()=>[Ke,Qe])),_:1}),(0,n.Wm)(C,{onIonChange:t[1]||(t[1]=t=>e.changeNotif(t)),slot:"end",value:e.notificationEnabled,ref:"toggle"},null,8,["value"])])),_:1}),e.openCours_status.isCustom?((0,n.wg)(),(0,n.j4)(v,{key:0,button:"",onClick:t[2]||(t[2]=t=>e.deleteCustomCourse())},{default:(0,n.w5)((()=>[Xe,(0,n.Wm)(f,{class:"ion-text-wrap"},{default:(0,n.w5)((()=>[et,tt])),_:1})])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(v,{button:"",onClick:t[3]||(t[3]=t=>e.addToCalendar())},{default:(0,n.w5)((()=>[st,(0,n.Wm)(f,{class:"ion-text-wrap"},{default:(0,n.w5)((()=>[nt,at])),_:1})])),_:1})])),_:1})])):(0,n.kq)("",!0)])),_:1})],64)}s(2801),s(4916),s(5306);var lt=s(7806),rt=s(4161),it=s(3573);const ut=(0,n.aZ)({name:"FolderPage",components:{IonHeader:o.Gu,IonToolbar:o.sr,IonButtons:o.Sm,IonBackButton:o.oU,IonTitle:o.wd,IonContent:o.W2,IonSkeletonText:o.CK,IonList:o.q_,IonItem:o.Ie,IonLabel:o.Q$,IonToggle:o.ho},props:{urlCours:{type:String,required:!0}},data(){let e="Retour";const t=this.$router.currentRoute.value;return"Timetable"==t.name&&(e="Emp. du temps"),{pageTitle:"Cours",backTitle:e,openedCours:[],openCours_course:[],openCours_data:[],openCours_status:[],openCours_time:[],teachers:"",rooms:"",groupNames:"",notificationEnabled:!1,disableShowGroup:localStorage.getItem("disableShowGroup")}},methods:{async addToCalendar(){if(ke.dV.isNativePlatform()){var e;let s={availableCalendars:[]};try{s=await De.getAvailableCalendars()}catch(t){return void console.log("Error",t)}if(null!==(e=s)&&void 0!==e&&e.availableCalendars.length)try{const e=[];for(const m of s.availableCalendars)e.push({title:m.name});e.push({title:"Annuler",style:ce.LE.Cancel});const t=await ce.Vb.showActions({title:"Sélectionnez un calendrier",message:"Choisissez le calendrier dans lequel ajouter le cours.",options:e});if(t.index===e.length-1)return;const n=s.availableCalendars[t.index],a=this.openCours_course.id,o=this.openCours_data.subject,l=this.teachers,r=this.rooms;let i="Le cours se déroule normalement.";this.openCours_status.status&&(i=this.openCours_status.status);const u=`Vous êtes avec ${l} en ${r}. ${i}`,d=new Date(this.openCours_time.start).getTime(),c=new Date(this.openCours_time.end).getTime();await De.createEvent({id:a,title:o,location:r,notes:u,startDate:d,endDate:c,calendarId:n.id}),await me.V.alert({title:"Cours ajouté",message:"Le cours a bien été ajouté à votre calendrier."})}catch(t){console.error("Error creating calendar event",t),await me.V.alert({title:"Erreur",message:"Une erreur est survenue lors de l'ajout du cours à votre calendrier."})}}},async deleteCustomCourse(){ke.dV.isNative?ce.Vb.showActions({title:"Êtes-vous sûr de vouloir supprimer ce cours ?",message:"Ce cours devra être recréé si vous souhaitez le récupérer.",options:[{title:"Supprimer",style:ce.LE.Destructive},{title:"Annuler",style:ce.LE.Cancel}]}).then((e=>{0==e.index&&this.deleteCourse()})):this.deleteCourse()},async deleteCourse(){let e=JSON.parse(localStorage.getItem("customCourses"))||[];e=e.filter((e=>e.course.course.id!=this.openCours_course.id)),localStorage.setItem("customCourses",JSON.stringify(e)),await me.V.alert({title:"Cours supprimé",message:"Le cours a bien été supprimé."})},async openLink(e){await lt.A.open({url:e,presentationStyle:"popover"})},getStringToAsciiArray(e){const t=[];for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);t.push(n)}return t},async shareCours(){const e={name:this.openedCours.data.subject,teachers:this.openedCours.data.teachers.join(", ")||"Aucun professeur",rooms:this.openedCours.data.rooms.join(", ")||"Aucune salle",start:new Date(this.openedCours.time.start).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),end:new Date(this.openedCours.time.end).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),status:this.openedCours.status.status,color:this.openedCours.course.color,memo:this.openedCours.data.memo||"none"};let t=JSON.parse(localStorage.getItem("userData")).student.name;t=t.split(" ")[t.split(" ").length-1],localStorage.getItem("customName")&&(t=localStorage.getItem("customName").split(" ")[localStorage.getItem("customName").split(" ").length-1]),t=this.getStringToAsciiArray(t).join("-"),e.name=this.getStringToAsciiArray(e.name).join("-"),e.teachers=this.getStringToAsciiArray(e.teachers).join("-"),e.rooms=this.getStringToAsciiArray(e.rooms).join("-"),null!=e.status?e.status=this.getStringToAsciiArray(e.status).join("-"):e.status=this.getStringToAsciiArray("null").join("-");let s="";s+=t+"$",s+=e.name+"$",s+=e.teachers+"$",s+=e.rooms+"$",s+=e.start+"$",s+=e.end+"$",s+=e.color+"$",s+=e.status+"$",s+=e.memo;const n="https://getpapillon.xyz/course?c="+btoa(s);await rt.m.share({url:n,dialogTitle:"Partager votre cours de "+this.openedCours.data.subject})},async setNotif(){const e=this.openedCours;try{const s=e.data.subject,n=e.data.rooms[0]||"salle inconnue",a=e.data.teachers[0],o=new Date(e.time.start);if(o.setMinutes(o.getMinutes()-5),o.getTime()<(new Date).getTime())return!1;{const e=await it.s.checkPermissions();if("granted"!=e)try{await it.s.requestPermissions()}catch(t){return}try{await it.s.schedule({notifications:[{title:`${s} - Ça commence bientôt !`,body:`Vous êtes en ${n} avec ${a}. Le cours commence dans 5 minutes.`,id:1,schedule:{at:o},sound:"tone.ogg",attachments:null,actionTypeId:"",extra:null}]})}catch(t){return await me.V.alert({title:"Erreur",message:"Une erreur est survenue lors de la création de la notification. Veuillez réessayer."}),this.notificationEnabled=!1,void(this.$refs.notifSwitch.checked=!1)}this.notificationEnabled=!0}}catch(t){console.error(t)}},async unsetNotif(){const e=this.openedCours;await it.s.getPending().then((t=>{const s=t.notifications,n=new Date(e.time.start);n.setMinutes(n.getMinutes()-5),s.forEach((async e=>{const t=new Date(e.schedule.at);t.getTime()==n.getTime()&&(await it.s.cancel({notifications:[e]}),this.notificationEnabled=!1)}))}))},changeNotif(e){e.target.checked?this.setNotif():this.unsetNotif()}},async mounted(){if(this.urlCours){const e=this.urlCours,t=decodeURIComponent(e),s=JSON.parse(t);this.openedCours=s,this.openCours_course=s.course,this.openCours_data=s.data,this.openCours_status=s.status,this.openCours_time=s.time,this.teachers=s.data.teachers.join(", "),this.rooms=s.data.rooms.join(", "),this.groupNames=s.data.groupNames.join(", "),this.groupNames=this.groupNames.replace(/[[\]]/g,""),this.pageTitle=this.openCours_data.subject,this.pageTitle.length>11&&("Emp. du temps"==this.backTitle&&(this.backTitle="Ma journ."),this.pageTitle=this.pageTitle.substring(0,16)+"..."),await it.s.getPending().then((e=>{const t=e.notifications,s=new Date(this.openCours_time.start);s.setMinutes(s.getMinutes()-5),t.forEach((e=>{const t=new Date(e.schedule.at);t.getTime()==s.getTime()&&(this.notificationEnabled=!0,this.$refs.toggle.$el.checked=!0)}))}))}return!1}});var dt=s(3744);const ct=(0,dt.Z)(ut,[["render",ot],["__scopeId","data-v-0501b54a"]]),mt=ct;var pt=s(5137),gt=s(2605),ht=s(3162),ft=s(6251),wt=s(6520),_t=s(8903),Ct=s(8565),vt=s(3883);const bt=e=>((0,n.dD)("data-v-b4961440"),e=e(),(0,n.Cn)(),e),yt={key:0,class:"dist"},Dt={class:"CoursTime"},kt={class:"start"},St={class:"end"},It={class:"cours"},Wt=bt((()=>(0,n._)("div",{class:"bg"},null,-1))),Pt=bt((()=>(0,n._)("div",{class:"CoursColor",slot:"start"},null,-1))),Tt={class:"CoursData"},$t={class:"CoursName"},Et={class:"CoursInfoContainer"},Nt={key:0,class:"CoursInfo room"},Mt=bt((()=>(0,n._)("span",{class:"material-symbols-outlined smol",slot:"start"},"location_on",-1))),jt={key:1,class:"separator"},xt={class:"CoursInfo"},Rt=bt((()=>(0,n._)("span",{class:"material-symbols-outlined smol",slot:"start"},"face",-1))),Lt={key:0,class:"CoursInfoContainer"},Ut={class:"CoursInfo"},At=bt((()=>(0,n._)("span",{class:"material-symbols-outlined smol",slot:"start"},"groups",-1))),qt={key:0,class:"CoursInfo Status"},Ot={key:0,class:"material-symbols-outlined smol",slot:"start"},zt={key:1,class:"material-symbols-outlined smol",slot:"start"},Bt={key:1,class:"CoursInfo Status"},Vt=bt((()=>(0,n._)("span",{class:"material-symbols-outlined smol",slot:"start"},"quiz",-1))),Ht={key:2,class:"CoursInfo Status"},Gt=bt((()=>(0,n._)("span",{class:"material-symbols-outlined smol",slot:"start"},"directions_walk",-1))),Ft={key:3,class:"CoursInfo Status"},Zt=bt((()=>(0,n._)("span",{class:"material-symbols-outlined smol",slot:"start"},"sticky_note_2",-1)));function Jt(e,t,s,a,o,r){const i=(0,n.up)("ion-ripple-effect"),u=(0,n.up)("ion-label");return(0,n.wg)(),(0,n.iD)(n.HY,null,[e.distance&&!e.sameTime?((0,n.wg)(),(0,n.iD)("div",yt)):(0,n.kq)("",!0),e.sameTime?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",{key:1,class:(0,l.C_)(e.classes+e.isCancelled),style:(0,l.j5)(`--backgroundColor: ${e.color};`),onClick:t[0]||(t[0]=t=>e.openCours())},[(0,n._)("div",Dt,[(0,n._)("p",kt,(0,l.zw)(e.start.toLocaleString("fr-FR",{hour:"2-digit",minute:"2-digit"})),1),(0,n._)("p",St,(0,l.zw)(e.end.toLocaleString("fr-FR",{hour:"2-digit",minute:"2-digit"})),1)]),(0,n._)("div",It,[(0,n.Wm)(i),e.coursPourcentVisible?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"progressDiv",style:(0,l.j5)(`width: ${e.coursPourcent}%;`)},null,4)):(0,n.kq)("",!0),Wt,Pt,(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n._)("div",Tt,[(0,n._)("h3",$t,(0,l.zw)(e.subject),1),(0,n._)("div",null,[(0,n._)("div",Et,[null!==e.rooms?((0,n.wg)(),(0,n.iD)("div",Nt,[Mt,(0,n._)("p",null,(0,l.zw)(e.rooms),1)])):(0,n.kq)("",!0),null!==e.rooms?((0,n.wg)(),(0,n.iD)("div",jt)):(0,n.kq)("",!0),(0,n._)("div",xt,[Rt,(0,n._)("p",null,(0,l.zw)(e.teachers),1)])]),"true"==e.disableShowGroup&&null!==e.groupNames?((0,n.wg)(),(0,n.iD)("div",Lt,[(0,n._)("div",Ut,[At,(0,n._)("p",null,(0,l.zw)(e.groupNames.replace(/[[\]]/g,"").replace(/_/g," ")),1)])])):(0,n.kq)("",!0)]),e.status?((0,n.wg)(),(0,n.iD)("p",qt,[e.isCancelled?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("span",Ot,"info")),e.isCancelled?((0,n.wg)(),(0,n.iD)("span",zt,"error")):(0,n.kq)("",!0),(0,n.Uk)(" "+(0,l.zw)(e.status),1)])):(0,n.kq)("",!0),e.isTest?((0,n.wg)(),(0,n.iD)("p",Bt,[Vt,(0,n.Uk)(" Vous avez un contrôle ")])):(0,n.kq)("",!0),e.isOuting?((0,n.wg)(),(0,n.iD)("p",Ht,[Gt,(0,n.Uk)(" Sortie scolaire ")])):(0,n.kq)("",!0),e.memo?((0,n.wg)(),(0,n.iD)("p",Ft,[Zt,(0,n.Uk)(" Contient un mémo ")])):(0,n.kq)("",!0)])])),_:1})])],6))],64)}s(6699);const Yt=(0,n.aZ)({name:"CoursElement",components:{IonLabel:o.Q$,IonRippleEffect:o.H$},props:{subject:{type:String,required:!0},teachers:{type:String,required:!1,default:"Pas de professeur"},rooms:{type:String,required:!1,default:"Pas de salle"},groupNames:{type:String,required:!1,default:null},memo:{type:Boolean,required:!1,default:!1},start:{type:Date,required:!1,default:new Date},end:{type:Date,required:!1,default:new Date},color:{type:String,required:!1,default:"var(--ion-color-primary)"},isCancelled:{type:Boolean,required:!1,default:!1},isExempted:{type:Boolean,required:!1,default:!1},isDetention:{type:Boolean,required:!1,default:!1},isOuting:{type:Boolean,required:!1,default:!1},isTest:{type:Boolean,required:!1,default:!1},status:{type:String,required:!1,default:"normal"},sameTime:{type:Boolean,required:!1,default:!1},distance:{type:Boolean,required:!1,default:!1},lengthCours:{type:Number,required:!1,default:0}},data(){return{classes:"mainElemCours ion-activatable ripple-parent rounded-rectangle ",newColor:"",coursPourcent:0,coursPourcentVisible:!1,intervalUpdateProgressDiv:null,showPastProgress:"false"!=localStorage.getItem("tweakProgressBarShowPast"),disableShowGroup:localStorage.getItem("disableShowGroup")}},setup(){return{}},methods:{openCours(){this.$emit("open")},beforeRenderedProgressDiv(){if("true"!=localStorage.getItem("tweakProgressBar"))return!1;const e=new Date;`${e.getUTCDate()}-${e.getMonth()}`!=`${this.start.getUTCDate()}-${this.start.getMonth()}`?(this.classes.includes("progressDivEnabled")&&(this.classes=this.classes.replace("progressDivEnabled","")),this.coursPourcentVisible&&(this.coursPourcent=0,this.coursPourcentVisible=!1,clearInterval(this.intervalUpdateProgressDiv))):(this.coursPourcentVisible||(this.coursPourcentVisible=!0),this.autoUpdateProgressDiv(),this.updateProgressDiv())},updateProgressDiv(){const e=new Date;if(`${e.getUTCDate()}-${e.getMonth()}`!=`${this.start.getUTCDate()}-${this.start.getMonth()}`)return this.coursPourcent=0,this.coursPourcentVisible=!1,clearInterval(this.intervalUpdateProgressDiv),this.classes.includes("progressDivEnabled")&&(this.classes=this.classes.replace("progressDivEnabled","")),!1;if(3600*e.getHours()+60*e.getMinutes()+e.getSeconds()>3600*this.end.getHours()+60*this.end.getMinutes()+this.end.getSeconds()&&this.showPastProgress)return this.classes.includes("progressDivEnabled")||(this.classes+=" progressDivEnabled "),this.coursPourcentVisible=!0,this.coursPourcent=100,!1;if(this.classes.includes("progressDivEnabled")&&(this.classes=this.classes.replace("progressDivEnabled","")),3600*e.getHours()+60*e.getMinutes()+e.getSeconds()>=3600*this.start.getHours()+60*this.start.getMinutes()+this.start.getSeconds()&&3600*e.getHours()+60*e.getMinutes()+e.getSeconds()<=3600*this.end.getHours()+60*this.end.getMinutes()+this.end.getSeconds()){const t=(3600*e.getHours()+60*e.getMinutes()+e.getSeconds()-(3600*this.start.getHours()+60*this.start.getMinutes()+this.start.getSeconds()))/(3600*this.end.getHours()+60*this.end.getMinutes()+this.end.getSeconds()-(3600*this.start.getHours()+60*this.start.getMinutes()+this.start.getSeconds()))*100;this.coursPourcentVisible=!0,this.classes.includes("progressDivEnabled")||(this.classes+=" progressDivEnabled "),setTimeout((()=>{this.coursPourcent=t}),100)}},autoUpdateProgressDiv(){null!=this.intervalUpdateProgressDiv&&clearInterval(this.intervalUpdateProgressDiv),this.intervalUpdateProgressDiv=setInterval((()=>{this.updateProgressDiv()}),5e3)}},mounted(){this.distance&&(this.classes+=" distance "),this.lengthCours>1.2&&(this.classes+=" long "),this.newColor=ft.Z.lightenColor(this.color,-20)},beforeUnmount(){null!=this.intervalUpdateProgressDiv&&clearInterval(this.intervalUpdateProgressDiv)},beforeUpdate(){this.beforeRenderedProgressDiv()}}),Kt=(0,dt.Z)(Yt,[["render",Jt],["__scopeId","data-v-b4961440"]]),Qt=Kt;var Xt=s(1586);const es=(0,n.aZ)({name:"FolderPage",components:{IonButtons:o.Sm,IonButton:o.YG,IonContent:o.W2,IonHeader:o.Gu,IonMenuButton:o.fG,IonPage:o._i,IonTitle:o.wd,IonToolbar:o.sr,IonList:o.q_,IonModal:o.ki,CoursElement:Qt,IonDatetime:o.x4,Swiper:vt.tq,SwiperSlide:vt.o5,IonRefresher:o.nJ,IonRefresherContent:o.Wo,IonItem:o.Ie,IonLabel:o.Q$,IonSpinner:o.PQ,IonFab:o.IJ,IonInput:o.pK,IonProgressBar:o.X7,IonNavLink:o.Qx,IonPopover:o.d8},setup(){return{baseIndex:250,minDate:s(7585).xD(),maxDate:s(7585).Bq(),isDateAvailable:s(7585).eB,calendarOutline:_t.rom,calendarSharp:_t.BGW,todayOutline:_t.gZA,todaySharp:_t.l7O,presentingElement:null,Virtual:Ct.oM,EffectCoverflow:Ct.lI,ey:[]}},methods:{createDateString(e){const t=new Date(e),s=t.toLocaleString("default",{weekday:"long"}).slice(0,3);return s+". "+t.getDate()},rnInputChanged(){if(this.isChangingDate)this.isChangingDate=!1;else{const e=new Date(this.$refs.rnInput.$el.value);this.$rn=e,this.baseRn=e,this.swiper.slideTo(this.baseIndex,0,!1),this.days=[],document.dispatchEvent(new CustomEvent("rnChanged",{detail:e}))}},confirmRnInput(){this.changernPickerModalOpen(!1)},openRnPicker(){this.$refs.rnPickerModal.$el.present()},editTimetable(e,t){e=(0,wt.Z)(e);const s=JSON.parse(localStorage.getItem("customCourses"))||[];return s.forEach((s=>{const n=new Date(s.day),a=new Date(t),o=new Date(s.course.time.start),l=new Date(s.course.time.end);o.setDate(a.getDate()),o.setMonth(a.getMonth()),o.setFullYear(a.getFullYear()),l.setDate(a.getDate()),l.setMonth(a.getMonth()),l.setFullYear(a.getFullYear()),n.getDate()==a.getDate()&&n.getMonth()==a.getMonth()&&n.getFullYear()==a.getFullYear()&&(s.course.time.start=o,s.course.time.end=l,s.course.course.color=ft.Z.getSubjectColor(s.course.data.subject,ft.Z.getRandomColor(!0),!0),e.push(s.course))})),e.sort(((e,t)=>{const s=new Date(e.time.start),n=new Date(t.time.start);return s-n})),e},resetSwiper(){this.day1.error="STILL_LOADING",this.day0.error="STILL_LOADING",this.day2.error="STILL_LOADING"},async getTimetables(e,t,s){const n=setTimeout((()=>{this.isLoading=!0}),500);for(let a=0;a<3;a++){const o=this.swiper.realIndex+(a-1),l=this.baseIndex-o;let r=new Date(this.baseRn);t&&(r=new Date(this.$rn)),r.setDate(r.getDate()-l),1==a&&(this.$rn=r,this.rnButtonString=this.createDateString(this.$rn),this.rnCalendarString=this.$rn.toISOString().split("T")[0]),(0,Xt.Z)(r,e).then((e=>{2==a&&(clearTimeout(n),this.isLoading=!1,s&&s.detail.complete()),e.error?"ERR_BAD_REQUEST"==e.error?this.days[o]&&(this.days[o].loading=!0):(this.days[o]=[],this.days[o]&&(this.days[o].error=e.error)):(this.days[o]=this.editTimetable(e,r),this.loadedrnButtonString=this.createDateString(this.$rn),this.days[o]&&(this.days[o].loading=!1))}))}this.connected=await gt.Z.getStatus(),this.connected=this.connected.connected},handleRefresh(e){this.getTimetables(!0,!1,e)},getStringToAsciiArray(e){const t=[];for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);t.push(n)}return t},setNewCoursModalOpen(e){this.newCoursModalOpen=e},addNewCours(){const e=new Date,t=new Date,s=this.$refs.newCoursStartRef.$el.value;if(e.setHours(s.split(":")[0]),e.setMinutes(s.split(":")[1]),t.setHours(this.$refs.newCoursEndRef.$el.value.split(":")[0]),t.setMinutes(this.$refs.newCoursEndRef.$el.value.split(":")[1]),""==s||""==this.$refs.newCoursEndRef.$el.value||""==this.$refs.newCoursNameRef.$el.value||""==this.$refs.newCoursTeacherRef.$el.value||""==this.$refs.newCoursRoomRef.$el.value)return void ht.Z.presentError("Veuillez remplir tous les champs","danger","Tous les champs sont obligatoires à l'exception du groupe");const n=this.$refs.newCoursColorRef.value;"#000000"!==n&&ft.Z.getSubjectColor(this.$refs.newCoursNameRef.$el.value,n,!0);const a={course:{id:Math.floor(1e7*Math.random()),color:n,num:Math.floor(1e7*Math.random())},data:{subject:this.$refs.newCoursNameRef.$el.value,teachers:[this.$refs.newCoursTeacherRef.$el.value],rooms:[this.$refs.newCoursRoomRef.$el.value],groupNames:[this.$refs.newCoursGroupRef.$el.value],memo:null,hasMemo:!1,linkVirtual:null},time:{start:e,end:t},status:{isCancelled:!1,isExempted:!1,isDetention:!1,isOuting:!1,isTest:!1,isCustom:!0,status:null}},o={day:this.$rn,course:a},l=JSON.parse(localStorage.getItem("customCourses"))||[];l.push(o),localStorage.setItem("customCourses",JSON.stringify(l)),this.setNewCoursModalOpen(!1),this.getTimetables(!0)},changernPickerModalOpen(e){this.rnPickerModalOpen=e},deleteCustomCourse(e){let t=JSON.parse(localStorage.getItem("customCourses"))||[];t=t.filter((t=>t.course.course.id!=e)),localStorage.setItem("customCourses",JSON.stringify(t)),this.$refs.coursModal.$el.dismiss(),this.getTimetables(!0)},async unsetNotif(e){await it.s.getPending().then((t=>{const s=t.notifications,n=new Date(e.time.start);n.setMinutes(n.getMinutes()-5),s.forEach((async t=>{const s=new Date(t.schedule.at);s.getTime()==n.getTime()&&(await it.s.cancel({notifications:[t]}),this.selectedCourse.notificationEnabled=!1,ht.Z.presentToastFull("Notifications désactivées pour "+e.data.subject,"Vous ne receverez plus de notifications pour ce cours","light",_t.N9d))}))}))},async displayBetaMsg(){const e=await o.Cl.create({header:"Emploi du temps",message:"Cette page subit actuellement des grands changements. Son comportement pourrait être inhabituel et des bugs peuvent survenir.",mode:"md",buttons:["Je comprends"]});await e.present()},async addDayToCalendar(){if(ke.dV.isNativePlatform()){var e;let s={availableCalendars:[]};try{s=await De.getAvailableCalendars()}catch(t){return void console.log("Error",t)}if(null!==(e=s)&&void 0!==e&&e.availableCalendars.length)try{const e=[];for(const o of s.availableCalendars)e.push({title:o.name});e.push({title:"Annuler",style:ce.LE.Cancel});const t=await ce.Vb.showActions({title:"Sélectionnez un calendrier",message:"Choisissez le calendrier dans lequel ajouter le cours.",options:e});if(t.index===e.length-1)return;const n=s.availableCalendars[t.index],a=this.days[this.currentIndex];if(a.length<=0)return void await me.V.alert({title:"Aucun cours",message:"Il n'y a aucun cours à ajouter au calendrier.",mode:"md",buttons:["Ok"]});for(const s of a)if(!s.status.isCancelled){const e=s.course.id,t=s.data.subject,a=s.data.rooms.join(", "),o=s.data.teachers.join(", "),l=new Date(s.time.start).getTime(),r=new Date(s.time.end).getTime();let i,u="Le cours se déroule normalement.";s.status.status&&(u=s.status.status),i=o&&null===a?`Ce cours n'a ni salle et ni professeur attribué à celui-ci. ${u}`:`Vous êtes avec ${o} en ${a}. ${u}`,await De.createEvent({id:e,title:t,location:a,notes:i,startDate:l,endDate:r,calendarId:n.id})}await me.V.alert({title:"Tous les cours ont été ajoutés !",message:"Votre journée a bien été ajoutée à votre calendrier."})}catch(t){console.error("Error creating calendar event",t),await me.V.alert({title:"Erreur",message:"Une erreur est survenue lors de l'ajout des cours à votre calendrier."})}}}},data(){const e=Array.from({length:2*this.baseIndex}).map(((e,t)=>`Slide ${t}`));return{CoursView:mt,baseRn:new Date,slides:e,currentIndex:this.baseIndex,rnButtonString:this.createDateString(this.$rn),loadedrnButtonString:this.createDateString(this.$rn),rnCalendarString:this.$rn.toISOString().split("T")[0],day0:[],day1:[],day2:[],days:[],connected:!1,shouldResetSwiper:!1,selectedCourse:{name:"",teacher:"",room:"",groupNames:"",start:"",end:"",length:"",status:"",notificationEnabled:!1},newCoursModalOpen:!1,rnPickerModalOpen:!1,isChangingDate:!1,isLoading:!0,swiper:null}},mounted(){this.swiper=this.$refs.swiper.$el.swiper,this.presentingElement=this.$refs.pageHere.$el,document.addEventListener("rnChanged",(e=>{this.rnButtonString=this.createDateString(e.detail),this.getTimetables(!1,e.detail)})),this.getTimetables(),document.addEventListener("tokenUpdated",(()=>{this.getTimetables()})),this.swiper.on("slideChangeTransitionEnd",(()=>{this.resetSwiper(),this.isChangingDate=!0,this.getTimetables()})),this.swiper.on("activeIndexChange",(()=>{this.currentIndex=this.swiper.activeIndex})),pt.g.addListener("backButton",(()=>{this.newCoursModalOpen?this.newCoursModalOpen=!1:this.rnPickerModalOpen&&(this.rnPickerModalOpen=!1)}))}}),ts=(0,dt.Z)(es,[["render",de],["__scopeId","data-v-43f69674"]]),ss=ts,ns={components:{IonNav:o.O1,IonPage:o._i},data:function(){return{component:ss}}},as=(0,dt.Z)(ns,[["render",a]]),os=as}}]);
//# sourceMappingURL=423.1bafa37f.js.map